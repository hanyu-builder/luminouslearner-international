<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pollination Types Comparison | LuminousLearner</title>
    
    <!-- React & Tailwind -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Framer Motion -->
    <script src="https://unpkg.com/framer-motion@10.12.16/dist/framer-motion.js"></script>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        slate: {
                            850: '#1e293b', 
                            950: '#0F172A', // LuminousLearner Dark Mode Background
                        },
                        emerald: {
                            450: '#10b981',
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    }
                }
            }
        }
    </script>

    <style>
        body { font-family: 'Inter', sans-serif; background-color: #0F172A; color: #e2e8f0; margin: 0; overflow: hidden; }
        .font-mono { font-family: 'JetBrains Mono', monospace; }
        
        /* Highlight & Dim Effects */
        .highlighted { filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.6)); opacity: 1; z-index: 10; }
        .dimmed { opacity: 0.2; filter: grayscale(0.8) blur(1px); }
        .part-transition { transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); }

        /* Wind Particle Animation */
        .wind-flow { animation: wind 2s linear infinite; }
        @keyframes wind {
            0% { transform: translateX(-10px) translateY(0); opacity: 0; }
            20% { opacity: 0.5; }
            80% { opacity: 0.5; }
            100% { transform: translateX(50px) translateY(-10px); opacity: 0; }
        }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #0f172a; }
        ::-webkit-scrollbar-thumb { background-color: #334155; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background-color: #475569; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        const { motion, AnimatePresence } = window.Motion;

        const Icon = ({ name, className = "", size = 20 }) => {
            const [svgHtml, setSvgHtml] = useState('');
            useEffect(() => {
                if (window.lucide && window.lucide.icons) {
                    const pascalName = name.split('-').map(part => part.charAt(0).toUpperCase() + part.slice(1)).join('');
                    const iconData = window.lucide.icons[pascalName];
                    if (iconData && typeof window.lucide.createElement === 'function') {
                        const svgElement = window.lucide.createElement(iconData);
                        svgElement.setAttribute('class', className);
                        svgElement.setAttribute('width', size);
                        svgElement.setAttribute('height', size);
                        setSvgHtml(svgElement.outerHTML);
                    }
                }
            }, [name, className, size]);
            if (!svgHtml) return <span className={className} style={{ width: size, height: size, display: 'inline-block' }}></span>;
            return <span dangerouslySetInnerHTML={{ __html: svgHtml }} className="flex items-center justify-center" />;
        };

        // --- DATA ---
        const FLOWER_DATA = {
            insect: {
                name: 'Insect-pollinated',
                example: 'e.g. Rose, Hibiscus',
                color: 'text-pink-400',
                bgColor: 'bg-pink-900/20',
                borderColor: 'border-pink-500/30',
                features: {
                    petals: { label: 'Petals', desc: 'Large, brightly coloured to attract insects. Often have nectar guides.', icon: 'flower' },
                    scent: { label: 'Scent/Nectar', desc: 'Scented and produces nectar to reward pollinators.', icon: 'wind' },
                    stamen: { label: 'Stamens', desc: 'Enclosed within flower. Anthers are firm to brush against insects.', icon: 'circle-dot' },
                    stigma: { label: 'Stigma', desc: 'Enclosed within flower. Sticky to catch pollen from insect bodies.', icon: 'target' },
                    pollen: { label: 'Pollen', desc: 'Larger, sticky or spiky grains to stick to insect bodies. Produced in smaller amounts.', icon: 'snowflake' }
                }
            },
            wind: {
                name: 'Wind-pollinated',
                example: 'e.g. Grass, Rice, Wheat',
                color: 'text-emerald-400',
                bgColor: 'bg-emerald-900/20',
                borderColor: 'border-emerald-500/30',
                features: {
                    petals: { label: 'Petals', desc: 'Small, dull (green/brown) or absent. No need to attract insects.', icon: 'leaf' },
                    scent: { label: 'Scent/Nectar', desc: 'No scent or nectar produced. Waste of energy.', icon: 'x-circle' },
                    stamen: { label: 'Stamens', desc: 'Hang outside the flower (Exserted). Long filaments allow anthers to swing in wind.', icon: 'move-horizontal' },
                    stigma: { label: 'Stigma', desc: 'Hangs outside. Feathery (plumose) to catch airborne pollen.', icon: 'feather' },
                    pollen: { label: 'Pollen', desc: 'Small, light, smooth. Produced in huge quantities to ensure some reach a stigma.', icon: 'wind' }
                }
            }
        };

        // --- SVG VISUALS ---
        
        const InsectFlowerSVG = ({ selectedFeature, onSelect }) => {
            // Helper to determine class based on selection
            const getStyle = (featureId) => {
                if (!selectedFeature) return "part-transition opacity-100"; // Default state
                return featureId === selectedFeature 
                    ? "part-transition highlighted" 
                    : "part-transition dimmed";
            };

            return (
                <svg viewBox="0 0 400 400" className="w-full h-full drop-shadow-xl">
                    {/* Petals */}
                    <g onClick={() => onSelect('petals')} className={`cursor-pointer ${getStyle('petals')}`}>
                        {[0, 60, 120, 180, 240, 300].map(rot => (
                            <path key={rot} transform={`rotate(${rot} 200 200)`} d="M 200 200 Q 260 100 200 50 Q 140 100 200 200" fill="#f472b6" stroke="#db2777" strokeWidth="2" />
                        ))}
                        <circle cx="200" cy="200" r="40" fill="#fbcfe8" />
                    </g>
                    
                    {/* Nectary Guide (Visual hint) */}
                    <g onClick={() => onSelect('scent')} className={`cursor-pointer ${getStyle('scent')}`}>
                        <circle cx="200" cy="200" r="15" fill="#facc15" className="animate-pulse opacity-80" />
                    </g>

                    {/* Stamens (Inside) */}
                    <g onClick={() => onSelect('stamen')} className={`cursor-pointer ${getStyle('stamen')}`}>
                        {[45, 135, 225, 315].map(rot => (
                            <g key={rot} transform={`rotate(${rot} 200 200) translate(0, -30)`}>
                                <line x1="200" y1="200" x2="200" y2="180" stroke="#fde047" strokeWidth="3"/>
                                <ellipse cx="200" cy="175" rx="6" ry="8" fill="#ca8a04" />
                            </g>
                        ))}
                    </g>

                    {/* Stigma (Center) */}
                    <g onClick={() => onSelect('stigma')} className={`cursor-pointer ${getStyle('stigma')}`}>
                        <circle cx="200" cy="200" r="12" fill="#a78bfa" stroke="#7c3aed" strokeWidth="2" />
                        {/* Sticky surface hint */}
                        <path d="M 194 194 Q 200 200 206 194" stroke="white" strokeWidth="2" fill="none" opacity="0.8"/>
                    </g>
                    
                    {/* Insect (Bee) - Always visible unless something else selected */}
                    <g transform="translate(280, 100)" className={`float pointer-events-none ${selectedFeature ? 'dimmed' : ''}`}>
                        <path d="M 0 0 Q 20 -10 40 0 Q 20 20 0 0" fill="#fbbf24" stroke="black" strokeWidth="1"/>
                        <path d="M 10 -5 L 15 -20 M 25 -5 L 30 -20" stroke="black" strokeWidth="1"/>
                        <ellipse cx="10" cy="-10" rx="5" ry="8" fill="white" opacity="0.7" transform="rotate(-30)"/>
                    </g>
                </svg>
            );
        };

        const WindFlowerSVG = ({ selectedFeature, onSelect }) => {
            const getStyle = (featureId) => {
                if (!selectedFeature) return "part-transition opacity-100";
                return featureId === selectedFeature 
                    ? "part-transition highlighted" 
                    : "part-transition dimmed";
            };

            return (
                <svg viewBox="0 0 400 400" className="w-full h-full drop-shadow-xl">
                    {/* Stalk */}
                    <line x1="200" y1="400" x2="200" y2="200" stroke="#4ade80" strokeWidth="6" className={selectedFeature ? 'dimmed' : ''}/>
                    
                    {/* Bracts (Reduced Petals) */}
                    <g onClick={() => onSelect('petals')} className={`cursor-pointer ${getStyle('petals')}`}>
                        <path d="M 200 200 Q 160 150 200 100 Q 240 150 200 200" fill="#86efac" stroke="#16a34a" strokeWidth="2" />
                        <path d="M 200 200 Q 170 160 200 120 Q 230 160 200 200" fill="#bbf7d0" stroke="#16a34a" strokeWidth="1" />
                    </g>

                    {/* Hanging Stamens (Exserted) */}
                    <g onClick={() => onSelect('stamen')} className={`cursor-pointer ${getStyle('stamen')}`}>
                        {/* Left */}
                        <path d="M 190 180 Q 150 250 140 300" stroke="#fef08a" strokeWidth="2" fill="none" />
                        <rect x="130" y="300" width="20" height="40" fill="#facc15" stroke="#b45309" transform="rotate(10 140 300)" />
                        
                        {/* Right */}
                        <path d="M 210 180 Q 250 250 260 300" stroke="#fef08a" strokeWidth="2" fill="none" />
                        <rect x="250" y="300" width="20" height="40" fill="#facc15" stroke="#b45309" transform="rotate(-10 260 300)" />
                    </g>

                    {/* Feathery Stigma */}
                    <g onClick={() => onSelect('stigma')} className={`cursor-pointer ${getStyle('stigma')}`}>
                        {/* Left */}
                        <path d="M 200 200 Q 150 150 120 120" stroke="#d8b4fe" strokeWidth="3" fill="none" />
                        {/* Feathers */}
                        {[...Array(6)].map((_, i) => (
                            <line key={i} x1={130 + i*10} y1={130 + i*10} x2={110 + i*10} y2={150 + i*10} stroke="#d8b4fe" strokeWidth="2" />
                        ))}
                        
                        {/* Right */}
                        <path d="M 200 200 Q 250 150 280 120" stroke="#d8b4fe" strokeWidth="3" fill="none" />
                         {[...Array(6)].map((_, i) => (
                            <line key={i} x1={270 - i*10} y1={130 + i*10} x2={290 - i*10} y2={150 + i*10} stroke="#d8b4fe" strokeWidth="2" />
                        ))}
                    </g>
                    
                    {/* Wind Particles */}
                    <g className={`pointer-events-none ${selectedFeature ? 'dimmed' : ''}`}>
                        {[...Array(5)].map((_, i) => (
                            <circle key={i} cx="0" cy="0" r="2" fill="white" className="wind-flow" style={{animationDelay: `${i * 0.5}s`, transformOrigin: `${100 + i*50}px ${100 + i*30}px`}} />
                        ))}
                    </g>
                </svg>
            );
        };

        // --- MAIN APP ---
        const App = () => {
            const [selectedFeature, setSelectedFeature] = useState(null); 
            const [showMicroscope, setShowMicroscope] = useState(false);

            const handleFeatureSelect = (featureKey) => {
                // Toggle logic: clicking same feature again deselects it
                if (selectedFeature === featureKey && !showMicroscope) {
                    setSelectedFeature(null);
                } else {
                    setSelectedFeature(featureKey);
                    if (featureKey === 'pollen') setShowMicroscope(true);
                    else setShowMicroscope(false);
                }
            };

            // Close microscope handler
            const closeMicroscope = () => {
                setShowMicroscope(false);
                setSelectedFeature(null);
            };

            return (
                <div className="min-h-screen bg-[#0F172A] text-white flex flex-col md:flex-row overflow-hidden font-sans">
                    
                    {/* Sidebar */}
                    <div className="w-full md:w-80 bg-slate-900 border-r border-slate-800 flex flex-col z-10 shadow-xl h-screen shrink-0">
                        <div className="p-6 border-b border-slate-800">
                            <h1 className="text-xl font-bold flex items-center gap-2">
                                <Icon name="flower" className="text-pink-400" /> Pollination Types
                            </h1>
                            <p className="text-xs text-slate-400 mt-1">Insect vs Wind Adaptations</p>
                        </div>

                        <div className="p-6 space-y-8 flex-1 overflow-y-auto custom-scrollbar">
                            
                            {/* Feature Selector List */}
                            <div className="space-y-3">
                                <label className="text-xs font-bold text-slate-500 uppercase tracking-widest px-1">Compare Features</label>
                                <div className="grid grid-cols-1 gap-2">
                                    {Object.keys(FLOWER_DATA.insect.features).map(key => (
                                        <button 
                                            key={key}
                                            onClick={() => handleFeatureSelect(key)}
                                            className={`w-full text-left p-3 rounded-xl border transition-all flex items-center gap-3
                                                ${selectedFeature === key 
                                                    ? 'bg-slate-800 border-blue-500 text-white shadow-lg ring-1 ring-blue-500/50' 
                                                    : 'bg-slate-900/50 border-slate-700 text-slate-400 hover:bg-slate-800'}
                                            `}
                                        >
                                            <Icon name={FLOWER_DATA.insect.features[key].icon} size={18} className={selectedFeature === key ? 'text-blue-400' : ''}/>
                                            <span className="text-sm font-bold">{FLOWER_DATA.insect.features[key].label}</span>
                                        </button>
                                    ))}
                                </div>
                            </div>
                            
                            {/* Microscope Button */}
                            <div className="pt-4 border-t border-slate-800">
                                <button 
                                    onClick={() => { handleFeatureSelect('pollen'); }}
                                    className={`w-full py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-all border
                                        ${showMicroscope ? 'bg-purple-600 border-purple-500 text-white' : 'bg-slate-800 border-slate-600 text-slate-300 hover:text-white'}
                                    `}
                                >
                                    <Icon name="microscope" size={18}/> Pollen Microscope
                                </button>
                            </div>
                            
                            {/* Info */}
                            <div className="bg-blue-900/20 p-4 rounded-xl border border-blue-500/30">
                                <div className="flex items-center gap-2 mb-2 text-blue-400 font-bold text-xs uppercase">
                                    <Icon name="info" size={14} /> Concept
                                </div>
                                <p className="text-xs text-slate-300 leading-relaxed">
                                    Flowers are adapted to their specific pollination method to maximize the chance of reproduction.
                                </p>
                            </div>

                        </div>
                    </div>

                    {/* Main Stage */}
                    <div className="flex-1 bg-[#0F172A] relative flex flex-col p-4 md:p-6 overflow-hidden">
                        
                        <div className="flex-1 grid grid-cols-1 md:grid-cols-2 gap-6 h-full relative">
                            
                            {/* Insect Flower Panel */}
                            <div className={`relative bg-slate-900 rounded-3xl border border-slate-800 p-4 flex flex-col items-center transition-all duration-500 overflow-hidden
                                ${selectedFeature && !showMicroscope ? 'border-pink-500/30 bg-pink-900/10' : ''}
                            `}>
                                <div className="absolute top-4 left-4 px-3 py-1 rounded-full bg-pink-900/50 border border-pink-500/30 text-xs font-bold text-pink-300 uppercase tracking-wide z-10">
                                    Insect-pollinated
                                </div>
                                <div className="flex-1 w-full max-w-xs aspect-square relative flex items-center justify-center">
                                    <InsectFlowerSVG selectedFeature={selectedFeature} onSelect={handleFeatureSelect} />
                                    
                                    {/* Feature Highlight Overlay */}
                                    <AnimatePresence>
                                        {selectedFeature && !showMicroscope && (
                                            <motion.div 
                                                initial={{ opacity: 0, y: 10 }} animate={{ opacity: 1, y: 0 }} exit={{ opacity: 0 }}
                                                className="absolute bottom-4 left-4 right-4 bg-slate-800/95 backdrop-blur p-4 rounded-xl border border-slate-600 shadow-2xl text-center z-20"
                                            >
                                                <div className="text-pink-400 font-bold text-sm mb-1">
                                                    {FLOWER_DATA.insect.features[selectedFeature].label}
                                                </div>
                                                <p className="text-xs text-slate-300 leading-snug">
                                                    {FLOWER_DATA.insect.features[selectedFeature].desc}
                                                </p>
                                            </motion.div>
                                        )}
                                    </AnimatePresence>
                                </div>
                            </div>

                            {/* Wind Flower Panel */}
                            <div className={`relative bg-slate-900 rounded-3xl border border-slate-800 p-4 flex flex-col items-center transition-all duration-500 overflow-hidden
                                ${selectedFeature && !showMicroscope ? 'border-emerald-500/30 bg-emerald-900/10' : ''}
                            `}>
                                <div className="absolute top-4 left-4 px-3 py-1 rounded-full bg-emerald-900/50 border border-emerald-500/30 text-xs font-bold text-emerald-300 uppercase tracking-wide z-10">
                                    Wind-pollinated
                                </div>
                                <div className="flex-1 w-full max-w-xs aspect-square relative flex items-center justify-center">
                                    <WindFlowerSVG selectedFeature={selectedFeature} onSelect={handleFeatureSelect} />

                                    {/* Feature Highlight Overlay */}
                                    <AnimatePresence>
                                        {selectedFeature && !showMicroscope && (
                                            <motion.div 
                                                initial={{ opacity: 0, y: 10 }} animate={{ opacity: 1, y: 0 }} exit={{ opacity: 0 }}
                                                className="absolute bottom-4 left-4 right-4 bg-slate-800/95 backdrop-blur p-4 rounded-xl border border-slate-600 shadow-2xl text-center z-20"
                                            >
                                                <div className="text-emerald-400 font-bold text-sm mb-1">
                                                    {FLOWER_DATA.wind.features[selectedFeature].label}
                                                </div>
                                                <p className="text-xs text-slate-300 leading-snug">
                                                    {FLOWER_DATA.wind.features[selectedFeature].desc}
                                                </p>
                                            </motion.div>
                                        )}
                                    </AnimatePresence>
                                </div>
                            </div>

                            {/* Microscope Overlay (Pollen) */}
                            <AnimatePresence>
                                {showMicroscope && (
                                    <motion.div 
                                        initial={{ opacity: 0, scale: 0.9 }} animate={{ opacity: 1, scale: 1 }} exit={{ opacity: 0, scale: 0.9 }}
                                        className="absolute inset-0 z-30 flex items-center justify-center p-4 md:p-8 bg-black/80 backdrop-blur-md"
                                    >
                                        <div className="bg-slate-900 w-full max-w-3xl h-[500px] rounded-3xl border-2 border-slate-700 shadow-2xl flex overflow-hidden relative">
                                            
                                            {/* Close Button */}
                                            <button 
                                                onClick={closeMicroscope}
                                                className="absolute top-4 right-4 p-2 bg-slate-800 hover:bg-slate-700 rounded-full text-white transition-colors z-20 border border-slate-700"
                                            >
                                                <Icon name="x" size={20} />
                                            </button>

                                            {/* Left: Insect Pollen */}
                                            <div className="flex-1 border-r border-slate-800 p-8 flex flex-col items-center justify-center bg-pink-900/5 relative">
                                                <div className="absolute top-6 left-6 text-xs font-bold text-pink-500 uppercase tracking-widest">Insect Pollen</div>
                                                <div className="relative w-48 h-48">
                                                    <svg viewBox="0 0 100 100" className="w-full h-full drop-shadow-2xl">
                                                        {/* Spiky, Large Pollen */}
                                                        <circle cx="50" cy="50" r="35" fill="#facc15" stroke="#b45309" strokeWidth="2" />
                                                        {/* Spikes */}
                                                        {[...Array(12)].map((_, i) => (
                                                            <path key={i} d={`M 50 10 L 55 0 L 60 10`} fill="#b45309" transform={`rotate(${i*30} 50 50)`} />
                                                        ))}
                                                        <circle cx="40" cy="40" r="5" fill="#b45309" opacity="0.5"/>
                                                        <circle cx="60" cy="60" r="8" fill="#b45309" opacity="0.5"/>
                                                    </svg>
                                                </div>
                                                <div className="mt-8 flex gap-2 flex-wrap justify-center">
                                                    <span className="px-3 py-1 rounded-full bg-pink-900/30 border border-pink-500/30 text-xs text-pink-300 font-mono">Large</span>
                                                    <span className="px-3 py-1 rounded-full bg-pink-900/30 border border-pink-500/30 text-xs text-pink-300 font-mono">Sticky / Spiky</span>
                                                </div>
                                            </div>

                                            {/* Right: Wind Pollen */}
                                            <div className="flex-1 p-8 flex flex-col items-center justify-center bg-emerald-900/5 relative">
                                                <div className="absolute top-6 left-6 text-xs font-bold text-emerald-500 uppercase tracking-widest">Wind Pollen</div>
                                                <div className="relative w-48 h-48 grid grid-cols-3 gap-4 content-center justify-items-center">
                                                    {/* Many Small Smooth Pollen */}
                                                    {[...Array(9)].map((_, i) => (
                                                        <svg key={i} viewBox="0 0 100 100" className="w-10 h-10 animate-bounce" style={{animationDelay: `${i*0.2}s`, animationDuration: '3s'}}>
                                                            <circle cx="50" cy="50" r="45" fill="#fef08a" stroke="#eab308" strokeWidth="4" />
                                                        </svg>
                                                    ))}
                                                </div>
                                                <div className="mt-8 flex gap-2 flex-wrap justify-center">
                                                    <span className="px-3 py-1 rounded-full bg-emerald-900/30 border border-emerald-500/30 text-xs text-emerald-300 font-mono">Small & Light</span>
                                                    <span className="px-3 py-1 rounded-full bg-emerald-900/30 border border-emerald-500/30 text-xs text-emerald-300 font-mono">Huge Quantity</span>
                                                </div>
                                            </div>

                                        </div>
                                    </motion.div>
                                )}
                            </AnimatePresence>

                        </div>

                    </div>

                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
