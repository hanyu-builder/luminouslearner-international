<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cell Structure Comparator | LuminousLearner</title>
    
    <!-- React & Tailwind -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        slate: {
                            850: '#1e293b', 
                            950: '#0F172A', // LuminousLearner Dark Mode Background
                        },
                        emerald: {
                            450: '#10b981',
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    }
                }
            }
        }
    </script>

    <style>
        body { font-family: 'Inter', sans-serif; background-color: #0F172A; color: #e2e8f0; margin: 0; overflow: hidden; }
        .font-mono { font-family: 'JetBrains Mono', monospace; }
        
        /* Custom Animations */
        .organelle-hover:hover { filter: drop-shadow(0 0 5px rgba(56, 189, 248, 0.8)); cursor: pointer; transform: scale(1.05); transition: transform 0.2s; }
        .fade-in { animation: fadeIn 0.5s ease-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* Scrollbar styling for sidebar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #0f172a; }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #475569; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const Icon = ({ name, className = "", size = 20 }) => {
            const [svgHtml, setSvgHtml] = useState('');
            useEffect(() => {
                if (window.lucide && window.lucide.icons) {
                    const pascalName = name.split('-').map(part => part.charAt(0).toUpperCase() + part.slice(1)).join('');
                    const iconData = window.lucide.icons[pascalName];
                    if (iconData && typeof window.lucide.createElement === 'function') {
                        const svgElement = window.lucide.createElement(iconData);
                        svgElement.setAttribute('class', className);
                        svgElement.setAttribute('width', size);
                        svgElement.setAttribute('height', size);
                        setSvgHtml(svgElement.outerHTML);
                    }
                }
            }, [name, className, size]);
            if (!svgHtml) return <span className={className} style={{ width: size, height: size, display: 'inline-block' }}></span>;
            return <span dangerouslySetInnerHTML={{ __html: svgHtml }} className="flex items-center justify-center" />;
        };

        // --- DATA ---
        const ORGANELLES = {
            nucleus: { name: 'Nucleus', desc: 'Contains DNA, controls cell activities.', foundIn: ['animal', 'plant'] },
            nucleoid: { name: 'Nucleoid', desc: 'Region containing DNA, not enclosed by membrane.', foundIn: ['bacteria'] },
            cytoplasm: { name: 'Cytoplasm', desc: 'Jelly-like substance where chemical reactions occur.', foundIn: ['animal', 'plant', 'bacteria'] },
            membrane: { name: 'Cell Membrane', desc: 'Controls entry and exit of substances.', foundIn: ['animal', 'plant', 'bacteria'] },
            wall: { name: 'Cell Wall', desc: 'Provides support. (Cellulose in plants, Peptidoglycan in bacteria)', foundIn: ['plant', 'bacteria'] },
            mitochondria: { name: 'Mitochondria', desc: 'Site of aerobic respiration (ATP production).', foundIn: ['animal', 'plant'] },
            chloroplast: { name: 'Chloroplast', desc: 'Site of photosynthesis. Contains chlorophyll.', foundIn: ['plant'] },
            vacuole: { name: 'Large Central Vacuole', desc: 'Contains cell sap, maintains turgidity.', foundIn: ['plant'] },
            ribosome: { name: 'Ribosome', desc: 'Site of protein synthesis.', foundIn: ['animal', 'plant', 'bacteria'] },
            plasmid: { name: 'Plasmid', desc: 'Small ring of DNA.', foundIn: ['bacteria'] },
            flagellum: { name: 'Flagellum', desc: 'For movement.', foundIn: ['bacteria'] } 
        };

        const CELLS = {
            animal: { id: 'animal', name: 'Animal Cell', type: 'Eukaryotic', color: 'bg-red-500/20', border: 'border-red-500/50' },
            plant: { id: 'plant', name: 'Plant Cell', type: 'Eukaryotic', color: 'bg-emerald-500/20', border: 'border-emerald-500/50' },
            bacteria: { id: 'bacteria', name: 'Bacterial Cell', type: 'Prokaryotic', color: 'bg-blue-500/20', border: 'border-blue-500/50' }
        };

        // --- SVG COMPONENTS ---
        
        const AnimalCellSVG = ({ onHover }) => (
            <svg viewBox="0 0 300 300" className="w-full h-full">
                {/* Membrane (Irregular) */}
                <path d="M50 150 Q 50 50 150 50 Q 250 50 250 150 Q 250 250 150 250 Q 50 250 50 150 Z" 
                      fill="#fecaca" stroke="#ef4444" strokeWidth="3" 
                      className="organelle-hover" onClick={() => onHover('membrane')} />
                
                {/* Nucleus */}
                <circle cx="150" cy="150" r="40" fill="#991b1b" className="organelle-hover" onClick={() => onHover('nucleus')} />
                
                {/* Mitochondria */}
                <ellipse cx="100" cy="100" rx="15" ry="8" fill="#f87171" transform="rotate(45 100 100)" className="organelle-hover" onClick={() => onHover('mitochondria')} />
                <ellipse cx="200" cy="200" rx="15" ry="8" fill="#f87171" transform="rotate(-45 200 200)" className="organelle-hover" onClick={() => onHover('mitochondria')} />
                
                {/* Ribosomes (Dots) */}
                {[...Array(10)].map((_, i) => (
                    <circle key={i} cx={Math.random()*150 + 75} cy={Math.random()*150 + 75} r="2" fill="#000" className="organelle-hover" onClick={() => onHover('ribosome')} />
                ))}

                {/* Cytoplasm (Bg click) */}
                <text x="150" y="200" textAnchor="middle" fontSize="10" fill="#7f1d1d" className="pointer-events-none opacity-50">Cytoplasm</text>
                 {/* Invisible rect for cytoplasm click */}
                 <rect x="60" y="60" width="180" height="180" fill="transparent" onClick={() => onHover('cytoplasm')} />
            </svg>
        );

        const PlantCellSVG = ({ onHover }) => (
            <svg viewBox="0 0 300 300" className="w-full h-full">
                {/* Cell Wall (Rectangular) */}
                <rect x="40" y="40" width="220" height="220" rx="10" fill="#86efac" stroke="#166534" strokeWidth="6" className="organelle-hover" onClick={() => onHover('wall')} />
                
                {/* Membrane */}
                <rect x="46" y="46" width="208" height="208" rx="8" fill="transparent" stroke="#15803d" strokeWidth="1" className="organelle-hover" onClick={() => onHover('membrane')} />
                
                {/* Large Vacuole */}
                <rect x="70" y="70" width="160" height="100" rx="20" fill="#ecfccb" className="organelle-hover" onClick={() => onHover('vacuole')} />
                
                {/* Nucleus (Pushed to side) */}
                <circle cx="200" cy="200" r="30" fill="#14532d" className="organelle-hover" onClick={() => onHover('nucleus')} />
                
                {/* Chloroplasts (Green ovals) */}
                <ellipse cx="80" cy="220" rx="15" ry="10" fill="#22c55e" className="organelle-hover" onClick={() => onHover('chloroplast')} />
                <ellipse cx="120" cy="230" rx="15" ry="10" fill="#22c55e" className="organelle-hover" onClick={() => onHover('chloroplast')} />
                
                {/* Mitochondria */}
                <ellipse cx="60" cy="60" rx="12" ry="6" fill="#f87171" transform="rotate(30 60 60)" className="organelle-hover" onClick={() => onHover('mitochondria')} />
                
                {/* Ribosomes */}
                <circle cx="220" cy="100" r="2" fill="#000" className="organelle-hover" onClick={() => onHover('ribosome')} />
                 <circle cx="230" cy="120" r="2" fill="#000" className="organelle-hover" onClick={() => onHover('ribosome')} />

                 {/* Cytoplasm */}
                 <rect x="50" y="180" width="50" height="50" fill="transparent" onClick={() => onHover('cytoplasm')} />
            </svg>
        );

        const BacteriaSVG = ({ onHover }) => (
            <svg viewBox="0 0 300 300" className="w-full h-full">
                {/* Flagellum */}
                <path d="M 240 150 Q 260 130 280 150 T 300 150" fill="none" stroke="#93c5fd" strokeWidth="4" className="organelle-hover" onClick={() => onHover('flagellum')} />

                {/* Cell Wall (Capsule shape) */}
                <rect x="50" y="100" width="190" height="100" rx="40" fill="#bfdbfe" stroke="#1e40af" strokeWidth="5" className="organelle-hover" onClick={() => onHover('wall')} />
                
                {/* Membrane */}
                <rect x="55" y="105" width="180" height="90" rx="35" fill="transparent" stroke="#3b82f6" strokeWidth="2" className="organelle-hover" onClick={() => onHover('membrane')} />

                {/* Nucleoid (Squiggly DNA) */}
                <path d="M 100 150 Q 120 120 140 150 T 180 150" fill="none" stroke="#1e3a8a" strokeWidth="3" className="organelle-hover" onClick={() => onHover('nucleoid')} />
                
                {/* Plasmids (Small rings) */}
                <circle cx="80" cy="130" r="8" fill="none" stroke="#1e3a8a" strokeWidth="2" className="organelle-hover" onClick={() => onHover('plasmid')} />
                
                {/* Ribosomes */}
                {[...Array(15)].map((_, i) => (
                    <circle key={i} cx={Math.random()*150 + 70} cy={Math.random()*80 + 110} r="2" fill="#000" className="organelle-hover" onClick={() => onHover('ribosome')} />
                ))}

                {/* Cytoplasm */}
                <rect x="80" y="110" width="100" height="80" fill="transparent" onClick={() => onHover('cytoplasm')} />
            </svg>
        );

        // --- MAIN APP ---
        const App = () => {
            const [selectedCell, setSelectedCell] = useState('animal');
            const [selectedOrganelle, setSelectedOrganelle] = useState(null);
            const [showCompare, setShowCompare] = useState(false);

            const handleOrganelleClick = (id) => {
                setSelectedOrganelle(ORGANELLES[id]);
            };

            const renderCell = () => {
                switch(selectedCell) {
                    case 'animal': return <AnimalCellSVG onHover={handleOrganelleClick} />;
                    case 'plant': return <PlantCellSVG onHover={handleOrganelleClick} />;
                    case 'bacteria': return <BacteriaSVG onHover={handleOrganelleClick} />;
                    default: return null;
                }
            };

            return (
                <div className="min-h-screen bg-[#0F172A] text-white flex flex-col md:flex-row overflow-hidden font-sans">
                    
                    {/* Sidebar */}
                    <div className="w-full md:w-80 bg-slate-900 border-r border-slate-800 flex flex-col z-10 shadow-xl h-screen shrink-0">
                        <div className="p-6 border-b border-slate-800">
                            <h1 className="text-xl font-bold flex items-center gap-2">
                                <Icon name="microscope" className="text-emerald-400" /> Cell Comparator
                            </h1>
                            <p className="text-xs text-slate-400 mt-1">Topic I: Cells & Molecules</p>
                        </div>

                        <div className="p-6 space-y-8 flex-1 overflow-y-auto custom-scrollbar">
                            
                            {/* Cell Type Selector */}
                            <div className="space-y-3">
                                <label className="text-xs font-bold text-slate-500 uppercase tracking-widest px-1">Select Cell Type</label>
                                {Object.values(CELLS).map(cell => (
                                    <button 
                                        key={cell.id}
                                        onClick={() => { setSelectedCell(cell.id); setSelectedOrganelle(null); setShowCompare(false); }}
                                        className={`w-full text-left p-3 rounded-xl border transition-all flex items-center justify-between group
                                            ${selectedCell === cell.id 
                                                ? `bg-slate-800 ${cell.border} text-white shadow-lg` 
                                                : 'bg-slate-900/50 border-slate-700 text-slate-400 hover:bg-slate-800'}
                                        `}
                                    >
                                        <div>
                                            <span className="font-bold text-sm block">{cell.name}</span>
                                            <span className="text-[10px] text-slate-500">{cell.type}</span>
                                        </div>
                                        {selectedCell === cell.id && <Icon name="check-circle" size={16} className="text-emerald-400"/>}
                                    </button>
                                ))}
                            </div>

                            {/* Comparison Button */}
                            <button 
                                onClick={() => setShowCompare(!showCompare)}
                                className={`w-full py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-all border
                                    ${showCompare ? 'bg-indigo-600 border-indigo-500 text-white' : 'bg-slate-800 border-slate-700 text-slate-400 hover:text-white'}
                                `}
                            >
                                <Icon name="bar-chart-2" size={18} /> {showCompare ? 'Show Diagram' : 'Compare All'}
                            </button>

                        </div>
                    </div>

                    {/* Main Stage */}
                    <div className="flex-1 relative bg-[#020617] overflow-hidden flex flex-col items-center justify-center p-8">
                        
                        {showCompare ? (
                            // Comparison Table View
                            <div className="w-full max-w-4xl bg-slate-800 rounded-3xl border border-slate-700 p-8 overflow-y-auto max-h-[80vh] animate-in fade-in custom-scrollbar">
                                <h2 className="text-2xl font-bold mb-6 text-center">Structural Comparison</h2>
                                <div className="overflow-x-auto">
                                    <table className="w-full text-sm text-left">
                                        <thead className="text-xs text-slate-400 uppercase bg-slate-900/50">
                                            <tr>
                                                <th className="px-4 py-3 rounded-tl-lg">Structure</th>
                                                <th className="px-4 py-3 text-red-400">Animal</th>
                                                <th className="px-4 py-3 text-emerald-400">Plant</th>
                                                <th className="px-4 py-3 rounded-tr-lg text-blue-400">Bacteria</th>
                                            </tr>
                                        </thead>
                                        <tbody className="divide-y divide-slate-700">
                                            {Object.entries(ORGANELLES).map(([key, data]) => (
                                                <tr key={key} className="hover:bg-slate-700/30">
                                                    <td className="px-4 py-3 font-bold text-slate-300">{data.name.split(' (')[0]}</td>
                                                    <td className="px-4 py-3">
                                                        {data.foundIn.includes('animal') 
                                                            ? <Icon name="check" size={16} className="text-emerald-500"/> 
                                                            : <Icon name="x" size={16} className="text-slate-600"/>}
                                                    </td>
                                                    <td className="px-4 py-3">
                                                        {data.foundIn.includes('plant') 
                                                            ? <Icon name="check" size={16} className="text-emerald-500"/> 
                                                            : <Icon name="x" size={16} className="text-slate-600"/>}
                                                    </td>
                                                    <td className="px-4 py-3">
                                                        {data.foundIn.includes('bacteria') 
                                                            ? <Icon name="check" size={16} className="text-emerald-500"/> 
                                                            : <Icon name="x" size={16} className="text-slate-600"/>}
                                                    </td>
                                                </tr>
                                            ))}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        ) : (
                            // Interactive Diagram View
                            <div className="flex flex-col items-center w-full h-full">
                                {/* Diagram */}
                                <div className="relative w-full max-w-xl aspect-square bg-slate-900/30 rounded-full border-4 border-dashed border-slate-800 p-8 mb-8 animate-in fade-in">
                                    {renderCell()}
                                </div>

                                {/* Info Card (Bottom) */}
                                <div className="w-full max-w-2xl bg-slate-800/80 backdrop-blur p-6 rounded-2xl border border-slate-700 min-h-[120px] flex items-start gap-4 transition-all shadow-xl">
                                    <div className="p-3 bg-slate-900 rounded-xl shrink-0">
                                        <Icon name="info" className="text-blue-400" size={24} />
                                    </div>
                                    <div>
                                        <h3 className="text-lg font-bold text-white mb-1">
                                            {selectedOrganelle ? selectedOrganelle.name : 'Select an Organelle'}
                                        </h3>
                                        <p className="text-sm text-slate-400 leading-relaxed">
                                            {selectedOrganelle 
                                                ? selectedOrganelle.desc 
                                                : 'Click on any structure in the diagram above to learn more about its function and see which cells possess it.'}
                                        </p>
                                        
                                        {selectedOrganelle && (
                                            <div className="flex gap-2 mt-3">
                                                {['animal', 'plant', 'bacteria'].map(type => (
                                                    <span key={type} className={`text-[10px] px-2 py-1 rounded uppercase font-bold border ${
                                                        selectedOrganelle.foundIn.includes(type)
                                                            ? 'bg-emerald-500/20 text-emerald-400 border-emerald-500/30'
                                                            : 'bg-slate-800 text-slate-600 border-slate-700 opacity-50'
                                                    }`}>
                                                        {type}
                                                    </span>
                                                ))}
                                            </div>
                                        )}
                                    </div>
                                </div>
                            </div>
                        )}

                    </div>

                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
