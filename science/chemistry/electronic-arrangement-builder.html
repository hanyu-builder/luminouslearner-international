<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Electronic Arrangement Builder - LuminousLearner International</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=JetBrains+Mono:wght@400;700&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #0F172A; color: #e2e8f0; }
        .font-mono { font-family: 'JetBrains Mono', monospace; }
        
        .electron {
            transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        @keyframes pulse-core {
            0% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(239, 68, 68, 0); }
            100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0); }
        }
        .animate-core {
            animation: pulse-core 2s infinite;
        }

        @keyframes orbit {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .shell-ring {
            /* animation: orbit 60s linear infinite; */
             /* Disabled orbit animation for clarity, electrons position is static but can be animated if needed */
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <div id="root" class="flex-grow flex flex-col"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Element Data (1-20) - Internationalized
        const Elements = [
            { z: 1, symbol: 'H', name: 'Hydrogen' },
            { z: 2, symbol: 'He', name: 'Helium' },
            { z: 3, symbol: 'Li', name: 'Lithium' },
            { z: 4, symbol: 'Be', name: 'Beryllium' },
            { z: 5, symbol: 'B', name: 'Boron' },
            { z: 6, symbol: 'C', name: 'Carbon' },
            { z: 7, symbol: 'N', name: 'Nitrogen' },
            { z: 8, symbol: 'O', name: 'Oxygen' },
            { z: 9, symbol: 'F', name: 'Fluorine' },
            { z: 10, symbol: 'Ne', name: 'Neon' },
            { z: 11, symbol: 'Na', name: 'Sodium' },
            { z: 12, symbol: 'Mg', name: 'Magnesium' },
            { z: 13, symbol: 'Al', name: 'Aluminium' },
            { z: 14, symbol: 'Si', name: 'Silicon' },
            { z: 15, symbol: 'P', name: 'Phosphorus' },
            { z: 16, symbol: 'S', name: 'Sulphur' },
            { z: 17, symbol: 'Cl', name: 'Chlorine' },
            { z: 18, symbol: 'Ar', name: 'Argon' },
            { z: 19, symbol: 'K', name: 'Potassium' },
            { z: 20, symbol: 'Ca', name: 'Calcium' }
        ];

        const Icon = ({ name, size = 20, className = "" }) => {
            const [svg, setSvg] = useState('');
            useEffect(() => {
                if (window.lucide) {
                    const iconNode = window.lucide.icons[name];
                    if (iconNode) {
                        const iconSvg = window.lucide.createElement(iconNode);
                        iconSvg.setAttribute('width', size);
                        iconSvg.setAttribute('height', size);
                        iconSvg.setAttribute('class', className);
                        setSvg(iconSvg.outerHTML);
                    }
                }
            }, [name, size, className]);
            return <span dangerouslySetInnerHTML={{ __html: svg }} className="flex items-center" />;
        };

        const App = () => {
            const [protonCount, setProtonCount] = useState(1);
            const [arrangement, setArrangement] = useState([1]);
            const [isStable, setIsStable] = useState(false);

            // Calculate electron arrangement based on proton count
            useEffect(() => {
                const shells = [];
                let remaining = protonCount;

                // Shell 1: max 2
                if (remaining > 0) {
                    const n = Math.min(remaining, 2);
                    shells.push(n);
                    remaining -= n;
                }
                // Shell 2: max 8
                if (remaining > 0) {
                    const n = Math.min(remaining, 8);
                    shells.push(n);
                    remaining -= n;
                }
                // Shell 3: max 8 (for first 20 elements)
                if (remaining > 0) {
                    const n = Math.min(remaining, 8);
                    shells.push(n);
                    remaining -= n;
                }
                // Shell 4: max 2 (for K, Ca)
                if (remaining > 0) {
                    const n = Math.min(remaining, 2);
                    shells.push(n);
                    remaining -= n;
                }

                setArrangement(shells);

                // Check stability (Noble Gas structure)
                // He (2), Ne (2,8), Ar (2,8,8)
                const isNoble = (protonCount === 2) || (protonCount === 10) || (protonCount === 18);
                setIsStable(isNoble);

            }, [protonCount]);

            const currentElement = Elements.find(e => e.z === protonCount) || { symbol: '?', name: 'Unknown' };

            const changeProton = (delta) => {
                setProtonCount(prev => {
                    const newVal = prev + delta;
                    if (newVal < 1) return 1;
                    if (newVal > 20) return 20;
                    return newVal;
                });
            };

            // Helper to position electrons in a circle
            const getElectronPosition = (index, total, radius) => {
                const angle = (index / total) * 2 * Math.PI - Math.PI / 2; // Start from top
                const x = Math.cos(angle) * radius;
                const y = Math.sin(angle) * radius;
                return { x, y };
            };

            return (
                <div className="flex flex-col h-full container mx-auto px-4 py-6 max-w-5xl">
                    
                    {/* Header */}
                    <div className="flex justify-between items-center mb-6 border-b border-slate-700 pb-4">
                        <div>
                            <h1 className="text-2xl font-bold text-cyan-400 flex items-center gap-2">
                                <Icon name="Atom" /> Electronic Arrangement Builder
                            </h1>
                            <p className="text-slate-400 text-sm">Visualizing Electron Shells (Z = 1 to 20)</p>
                        </div>
                        <div className="bg-slate-800 px-4 py-2 rounded-lg text-sm font-mono text-cyan-300 border border-slate-700">
                            e‚Åª Config: {arrangement.join(', ')}
                        </div>
                    </div>

                    <div className="flex flex-col lg:flex-row gap-8 flex-grow">
                        
                        {/* Left: Atom Visualizer */}
                        <div className="w-full lg:w-2/3 bg-slate-900 rounded-3xl border-4 border-slate-800 relative flex items-center justify-center min-h-[400px] aspect-square lg:aspect-auto overflow-hidden shadow-2xl">
                            
                            {/* Background Grid */}
                            <div className="absolute inset-0 opacity-10" 
                                 style={{backgroundImage: 'radial-gradient(#67e8f9 1px, transparent 1px)', backgroundSize: '30px 30px'}}></div>

                            {/* The Nucleus */}
                            <div className="absolute z-20 w-16 h-16 bg-red-600 rounded-full flex items-center justify-center text-white font-bold shadow-lg animate-core ring-4 ring-red-900/50">
                                <div className="text-center">
                                    <div className="text-xs opacity-80">Protons</div>
                                    <div className="text-xl">{protonCount}</div>
                                </div>
                            </div>

                            {/* Electron Shells */}
                            {/* Shell 1 */}
                            <div className="absolute w-[140px] h-[140px] border border-slate-600 rounded-full flex items-center justify-center">
                                {arrangement[0] > 0 && Array.from({ length: arrangement[0] }).map((_, i) => {
                                    const pos = getElectronPosition(i, arrangement[0], 70);
                                    return (
                                        <div key={`s1-${i}`} className="electron absolute w-4 h-4 bg-cyan-400 rounded-full shadow-[0_0_10px_cyan] border border-white"
                                             style={{ transform: `translate(${pos.x}px, ${pos.y}px)` }}></div>
                                    );
                                })}
                            </div>

                            {/* Shell 2 */}
                            {arrangement.length >= 2 && (
                                <div className="absolute w-[240px] h-[240px] border border-slate-600 rounded-full flex items-center justify-center">
                                    {Array.from({ length: arrangement[1] }).map((_, i) => {
                                        const pos = getElectronPosition(i, arrangement[1], 120);
                                        return (
                                            <div key={`s2-${i}`} className="electron absolute w-4 h-4 bg-cyan-400 rounded-full shadow-[0_0_10px_cyan] border border-white"
                                                 style={{ transform: `translate(${pos.x}px, ${pos.y}px)` }}></div>
                                        );
                                    })}
                                </div>
                            )}

                            {/* Shell 3 */}
                            {arrangement.length >= 3 && (
                                <div className="absolute w-[340px] h-[340px] border border-slate-600 rounded-full flex items-center justify-center">
                                    {Array.from({ length: arrangement[2] }).map((_, i) => {
                                        const pos = getElectronPosition(i, arrangement[2], 170);
                                        return (
                                            <div key={`s3-${i}`} className="electron absolute w-4 h-4 bg-cyan-400 rounded-full shadow-[0_0_10px_cyan] border border-white"
                                                 style={{ transform: `translate(${pos.x}px, ${pos.y}px)` }}></div>
                                        );
                                    })}
                                </div>
                            )}

                            {/* Shell 4 */}
                            {arrangement.length >= 4 && (
                                <div className="absolute w-[440px] h-[440px] border border-slate-600 rounded-full flex items-center justify-center">
                                    {Array.from({ length: arrangement[3] }).map((_, i) => {
                                        const pos = getElectronPosition(i, arrangement[3], 220);
                                        return (
                                            <div key={`s4-${i}`} className="electron absolute w-4 h-4 bg-cyan-400 rounded-full shadow-[0_0_10px_cyan] border border-white"
                                                 style={{ transform: `translate(${pos.x}px, ${pos.y}px)` }}></div>
                                        );
                                    })}
                                </div>
                            )}

                            {/* Element Label */}
                            <div className="absolute bottom-4 right-4 bg-black/60 backdrop-blur px-4 py-2 rounded-xl border border-slate-600 text-right">
                                <div className="text-3xl font-bold text-white">{currentElement.symbol}</div>
                                <div className="text-sm text-slate-300">{currentElement.name}</div>
                            </div>

                            {/* Stability Badge */}
                            {isStable && (
                                <div className="absolute top-4 left-4 bg-yellow-500/20 border border-yellow-500 text-yellow-300 px-3 py-1 rounded-full text-xs font-bold flex items-center gap-2 animate-pulse">
                                    <Icon name="Star" size={14} /> Stable Octet/Duplet
                                </div>
                            )}
                        </div>

                        {/* Right: Controls & Info */}
                        <div className="w-full lg:w-1/3 flex flex-col gap-6">
                            
                            {/* Control Panel */}
                            <div className="bg-slate-800 p-6 rounded-2xl border border-slate-700 shadow-lg">
                                <h3 className="text-lg font-bold mb-4 text-white flex items-center gap-2">
                                    <Icon name="Sliders" /> Atom Controller
                                </h3>
                                
                                <div className="flex items-center justify-between gap-4 mb-6">
                                    <button 
                                        onClick={() => changeProton(-1)}
                                        className="w-12 h-12 rounded-full bg-slate-700 hover:bg-slate-600 text-white flex items-center justify-center transition-colors text-xl font-bold"
                                    >
                                        -
                                    </button>
                                    
                                    <div className="text-center">
                                        <div className="text-xs text-slate-400 uppercase font-bold">Proton Number</div>
                                        <div className="text-4xl font-mono font-bold text-cyan-400">{protonCount}</div>
                                    </div>

                                    <button 
                                        onClick={() => changeProton(1)}
                                        className="w-12 h-12 rounded-full bg-blue-600 hover:bg-blue-500 text-white flex items-center justify-center transition-colors text-xl font-bold shadow-[0_0_15px_rgba(37,99,235,0.5)]"
                                    >
                                        +
                                    </button>
                                </div>

                                <input 
                                    type="range" 
                                    min="1" 
                                    max="20" 
                                    value={protonCount} 
                                    onChange={(e) => setProtonCount(parseInt(e.target.value))}
                                    className="w-full h-2 bg-slate-600 rounded-lg appearance-none cursor-pointer accent-cyan-400"
                                />
                            </div>

                            {/* Info Card */}
                            <div className="bg-slate-800 p-6 rounded-2xl border border-slate-700 shadow-lg flex-grow">
                                <h3 className="text-lg font-bold mb-4 text-white flex items-center gap-2">
                                    <Icon name="Info" /> Shell Data
                                </h3>
                                
                                <div className="space-y-3">
                                    {[0, 1, 2, 3].map((shellIdx) => {
                                        const count = arrangement[shellIdx] || 0;
                                        const max = shellIdx === 0 ? 2 : shellIdx === 3 ? 2 : 8; // Simplified for Z=1-20
                                        const width = (count / max) * 100;
                                        const isFull = count === max;

                                        return (
                                            <div key={shellIdx} className="bg-slate-900/50 p-3 rounded-lg border border-slate-700/50">
                                                <div className="flex justify-between text-xs mb-1">
                                                    <span className="text-slate-400">Shell {shellIdx + 1}</span>
                                                    <span className={isFull ? 'text-green-400 font-bold' : 'text-slate-300'}>
                                                        {count} / {max} {isFull ? '(Full)' : ''}
                                                    </span>
                                                </div>
                                                <div className="w-full bg-slate-700 h-2 rounded-full overflow-hidden">
                                                    <div 
                                                        className={`h-full transition-all duration-500 ${isFull ? 'bg-green-500' : 'bg-cyan-500'}`}
                                                        style={{ width: `${width}%` }}
                                                    ></div>
                                                </div>
                                            </div>
                                        );
                                    })}
                                </div>

                                <div className="mt-6 p-4 bg-blue-900/20 border border-blue-800 rounded-lg text-sm text-blue-200">
                                    <div className="font-bold mb-1">Outermost Shell Electrons:</div>
                                    <div className="text-2xl font-mono font-bold text-white">{arrangement[arrangement.length - 1]}</div>
                                    <div className="text-xs opacity-70 mt-1">This determines the Group Number.</div>
                                </div>
                            </div>

                        </div>
                    </div>
                    
                    <div className="text-center text-slate-600 text-xs mt-8 border-t border-slate-800 pt-4">
                        Luminous Learner International | IB/A-Level Chemistry
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
