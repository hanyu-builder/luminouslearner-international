<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aliphatic Reaction Map - LuminousLearner International</title>
    
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #0F172A; margin: 0; overflow: hidden; color: #e2e8f0; }
        .font-mono { font-family: 'JetBrains Mono', monospace; }
        
        .node-container { transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1); cursor: pointer; }
        .node-container:hover { 
            transform: translateY(-5px) scale(1.05); 
            box-shadow: 0 0 25px rgba(56, 189, 248, 0.4); 
            z-index: 10;
        }
        
        .edge { transition: all 0.3s; cursor: pointer; opacity: 0.3; }
        .edge:hover { opacity: 1; stroke-width: 4px; filter: drop-shadow(0 0 4px #fff); }
        .edge-active { opacity: 1 !important; stroke-width: 4px !important; stroke-dasharray: 8; animation: flow 1.5s linear infinite; filter: drop-shadow(0 0 6px #a78bfa); }
        @keyframes flow { to { stroke-dashoffset: -16; } }

        .badge { font-size: 9px; text-transform: uppercase; letter-spacing: 0.05em; font-weight: 700; padding: 2px 6px; border-radius: 4px; }
        
        /* Custom Scrollbar for Info Panel */
        .info-scroll::-webkit-scrollbar { width: 6px; }
        .info-scroll::-webkit-scrollbar-track { background: #1e293b; }
        .info-scroll::-webkit-scrollbar-thumb { background: #475569; border-radius: 3px; }
    </style>
</head>
<body>
    <div id="root" style="height: 100vh; width: 100vw;"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const Icon = ({ name, className = "" }) => {
            useEffect(() => { if (window.lucide) window.lucide.createIcons(); });
            return <i data-lucide={name} className={className}></i>;
        };

        // --- DATASET v7.0: The Aliphatic Masterpiece (Internationalized) ---
        
        const Nodes = [
            // --- Col 1: Hydrocarbons ---
            { id: 'alkane', label: 'Alkane', x: 50, y: 200, color: '#94a3b8', cat: 'Hydrocarbon' },
            { id: 'alkyne', label: 'Alkyne', x: 50, y: 500, color: '#f59e0b', cat: 'Hydrocarbon' },

            // --- Col 2: Halides & Grignard ---
            { id: 'haloalkane', label: 'Halogenoalkane', x: 350, y: 100, color: '#facc15', cat: 'Derivative' },
            { id: 'grignard', label: 'Grignard Reagent', x: 350, y: -50, color: '#ec4899', cat: 'Organometallic' }, 
            { id: 'alkene', label: 'Alkene', x: 350, y: 350, color: '#4ade80', cat: 'Hydrocarbon' }, 
            { id: 'epoxide', label: 'Epoxide', x: 350, y: 650, color: '#22d3ee', cat: 'Ether (Adv)' },
            
            // --- Col 2.5: Sulfur (Bottom) ---
            { id: 'thiol', label: 'Thiol', x: 500, y: 800, color: '#fbbf24', cat: 'Sulfur (Adv)' },
            { id: 'sulfide', label: 'Sulfide', x: 800, y: 800, color: '#fbbf24', cat: 'Sulfur (Adv)' },
            { id: 'disulfide', label: 'Disulfide', x: 200, y: 800, color: '#d97706', cat: 'Sulfur (Adv)' },

            // --- Col 3: Oxygenates ---
            { id: 'ether', label: 'Ether', x: 750, y: 100, color: '#60a5fa', cat: 'Ether (Adv)' },
            { id: 'alcohol_1', label: 'Primary Alcohol', x: 750, y: 250, color: '#38bdf8', cat: 'Oxygen' },
            { id: 'alcohol_2', label: 'Secondary Alcohol', x: 750, y: 450, color: '#38bdf8', cat: 'Oxygen' },
            { id: 'alcohol_3', label: 'Tertiary Alcohol', x: 750, y: 650, color: '#0ea5e9', cat: 'Oxygen' }, 
            { id: 'diol', label: 'Diol', x: 550, y: 550, color: '#38bdf8', cat: 'Oxygen' },

            // --- Col 4: Carbonyls ---
            { id: 'nitrile', label: 'Nitrile', x: 1100, y: 50, color: '#fb923c', cat: 'Nitrogen' },
            { id: 'aldehyde', label: 'Aldehyde', x: 1100, y: 250, color: '#f472b6', cat: 'Carbonyl' },
            { id: 'ketone', label: 'Ketone', x: 1100, y: 450, color: '#f472b6', cat: 'Carbonyl' },

            // --- Col 5: Acids & Acyl Chlorides ---
            { id: 'acid', label: 'Carboxylic Acid', x: 1450, y: 250, color: '#ef4444', cat: 'Acid' },
            { id: 'acyl_chloride', label: 'Acyl Chloride', x: 1450, y: 450, color: '#ef4444', cat: 'Acid Derivative' }, 
            { id: 'ester', label: 'Ester', x: 1750, y: 450, color: '#c084fc', cat: 'Derivative' }, 

            // --- Col 6: Nitrogen ---
            { id: 'amine', label: 'Amine', x: 1800, y: 50, color: '#818cf8', cat: 'Nitrogen' },
            { id: 'amide', label: 'Amide', x: 1800, y: 250, color: '#a78bfa', cat: 'Nitrogen' },
        ];

        const Edges = [
            // HYDROCARBONS
            { from: 'alkane', to: 'haloalkane', reagents: 'X₂ / UV light', type: 'Sub', desc: 'Free Radical Substitution' },
            { from: 'alkyne', to: 'alkene', reagents: 'H₂ / Lindlar', type: 'Add', desc: 'Reduction to cis-alkene' },
            { from: 'alkyne', to: 'ketone', reagents: 'HgSO₄ / H₂SO₄', type: 'Add', desc: 'Hydration (Mark.)' },
            { from: 'alkyne', to: 'alkane', reagents: '2H₂ / Pt', type: 'Add', desc: 'Full Reduction' },

            // ALKENE REACTIONS
            { from: 'alkene', to: 'alkane', reagents: 'H₂ / Pt', type: 'Add', desc: 'Hydrogenation' },
            { from: 'alkene', to: 'haloalkane', reagents: 'HX(g)', type: 'Add', desc: 'Markovnikov Addition' },
            { from: 'alkene', to: 'haloalkane', reagents: 'HBr / Peroxide', type: 'Add', desc: '★ Anti-Markovnikov Addition' }, 
            { from: 'alkene', to: 'alcohol_2', reagents: 'H₂SO₄ / H₂O', type: 'Add', desc: 'Hydration (Markovnikov)' }, 
            { from: 'alkene', to: 'alcohol_1', reagents: '1.BH₃ 2.H₂O₂/OH⁻', type: 'Add', desc: '★ Hydroboration (Anti-Mark)' }, 
            { from: 'alkene', to: 'diol', reagents: 'Cold dil. KMnO₄', type: 'Ox', desc: 'Oxidation' },
            { from: 'alkene', to: 'epoxide', reagents: 'm-CPBA', type: 'Ox', desc: 'Epoxidation' },
            { from: 'alkene', to: 'aldehyde', reagents: '1.O₃ 2.Zn/H₂O', type: 'Cleave', desc: 'Ozonolysis' },
            { from: 'alkene', to: 'ketone', reagents: '1.O₃ 2.Zn/H₂O', type: 'Cleave', desc: 'Ozonolysis (Substituted)' },

            // GRIGNARD MAGIC
            { from: 'haloalkane', to: 'grignard', reagents: 'Mg / Dry Ether', type: 'Add', desc: 'Grignard Formation' },
            { from: 'grignard', to: 'alcohol_1', reagents: '1.HCHO 2.H₃O⁺', type: 'Syn', desc: 'Synthesis with Methanal' },
            { from: 'grignard', to: 'alcohol_2', reagents: '1.Aldehyde 2.H₃O⁺', type: 'Syn', desc: 'Synthesis with Aldehyde' },
            { from: 'grignard', to: 'alcohol_3', reagents: '1.Ketone 2.H₃O⁺', type: 'Syn', desc: 'Synthesis with Ketone' },
            { from: 'grignard', to: 'acid', reagents: '1.CO₂ 2.H₃O⁺', type: 'Syn', desc: 'Synthesis with CO₂' },

            // HALOALKANES
            { from: 'haloalkane', to: 'alcohol_1', reagents: 'NaOH(aq)', type: 'Sub', desc: 'Hydrolysis' },
            { from: 'haloalkane', to: 'alkene', reagents: 'NaOH(alc)', type: 'Elim', desc: 'Elimination' },
            { from: 'haloalkane', to: 'nitrile', reagents: 'KCN', type: 'Sub', desc: 'Step-up (+1 C)' },
            { from: 'haloalkane', to: 'amine', reagents: 'NH₃', type: 'Sub', desc: 'Substitution' },
            
            // SULFUR
            { from: 'haloalkane', to: 'thiol', reagents: 'NaSH', type: 'Sub', desc: 'Substitution' },
            { from: 'thiol', to: 'sulfide', reagents: '1.NaH 2.RX', type: 'Sub', desc: 'Synthesis' },
            { from: 'thiol', to: 'disulfide', reagents: 'I₂', type: 'Ox', desc: 'Oxidation' },
            { from: 'disulfide', to: 'thiol', reagents: 'Zn/H⁺', type: 'Red', desc: 'Reduction' },

            // ALCOHOLS
            { from: 'alcohol_1', to: 'haloalkane', reagents: 'SOCl₂', type: 'Sub', desc: 'Substitution' },
            { from: 'alcohol_1', to: 'aldehyde', reagents: 'PCC / DMP', type: 'Ox', desc: 'Mild Oxidation' },
            { from: 'alcohol_1', to: 'acid', reagents: 'KMnO₄/H⁺', type: 'Ox', desc: 'Full Oxidation' },
            { from: 'alcohol_1', to: 'ester', reagents: 'Acid/H⁺', type: 'Cond', desc: 'Esterification' },
            { from: 'alcohol_1', to: 'ether', reagents: '1.Na 2.RX', type: 'Sub', desc: 'Williamson Synthesis' },
            { from: 'alcohol_2', to: 'ketone', reagents: 'K₂Cr₂O₇/H⁺', type: 'Ox', desc: 'Oxidation' },

            // CARBONYLS
            { from: 'aldehyde', to: 'acid', reagents: 'K₂Cr₂O₇/H⁺', type: 'Ox', desc: 'Oxidation' },
            { from: 'aldehyde', to: 'alcohol_1', reagents: 'LiAlH₄', type: 'Red', desc: 'Reduction' },
            { from: 'ketone', to: 'alcohol_2', reagents: 'NaBH₄', type: 'Red', desc: 'Reduction' },

            // ACIDS & DERIVATIVES
            { from: 'acid', to: 'alcohol_1', reagents: 'LiAlH₄', type: 'Red', desc: 'Reduction' },
            { from: 'acid', to: 'acyl_chloride', reagents: 'SOCl₂', type: 'Sub', desc: 'Formation of Acid Chloride' },
            { from: 'acyl_chloride', to: 'acid', reagents: 'H₂O', type: 'Hyd', desc: 'Vigorous Hydrolysis' },
            { from: 'acyl_chloride', to: 'ester', reagents: 'Alcohol', type: 'Cond', desc: 'Fast Esterification' },
            { from: 'acyl_chloride', to: 'amide', reagents: 'NH₃', type: 'Sub', desc: 'Fast Amide Formation' },
            { from: 'acid', to: 'ester', reagents: 'Alcohol/H⁺', type: 'Cond', desc: 'Slow Esterification' },

            // NITROGEN
            { from: 'nitrile', to: 'acid', reagents: 'H⁺(aq)', type: 'Hyd', desc: 'Hydrolysis' },
            { from: 'nitrile', to: 'amine', reagents: 'LiAlH₄', type: 'Red', desc: 'Reduction' },
            { from: 'amide', to: 'amine', reagents: 'Br₂/NaOH', type: 'Deg', desc: 'Hofmann Degradation' },
            { from: 'amide', to: 'acid', reagents: 'H⁺(aq)', type: 'Hyd', desc: 'Hydrolysis' },
            { from: 'epoxide', to: 'diol', reagents: 'H₃O⁺', type: 'Hyd', desc: 'Hydrolysis' },
        ];

        const App = () => {
            const [selectedNode, setSelectedNode] = useState(null);
            const [selectedEdge, setSelectedEdge] = useState(null);
            const [transform, setTransform] = useState({ x: 0, y: 0, scale: 0.6 });
            const [isDragging, setIsDragging] = useState(false);
            const [dragStart, setDragStart] = useState({ x: 0, y: 0 });

            // Center the map on load
            useEffect(() => {
                const cx = window.innerWidth / 2 - 900 * 0.6;
                const cy = window.innerHeight / 2 - 400 * 0.6;
                setTransform({ x: cx, y: cy, scale: 0.6 });
            }, []);

            const getOffsetCoords = (s, e, offsetAmount = 14) => {
                const dx = e.x - s.x;
                const dy = e.y - s.y;
                const len = Math.sqrt(dx * dx + dy * dy);
                if (len === 0) return { x1: s.x, y1: s.y, x2: e.x, y2: e.y };
                const perpX = -dy / len;
                const perpY = dx / len;
                return {
                    x1: s.x + 90 + (perpX * offsetAmount), 
                    y1: s.y + 40 + (perpY * offsetAmount),
                    x2: e.x + 90 + (perpX * offsetAmount),
                    y2: e.y + 40 + (perpY * offsetAmount)
                };
            };

            const getNode = (id) => Nodes.find(n => n.id === id);

            return (
                <div 
                    className="w-full h-full relative overflow-hidden select-none bg-[#0F172A]"
                    onMouseDown={(e) => { setIsDragging(true); setDragStart({ x: e.clientX - transform.x, y: e.clientY - transform.y }); }}
                    onMouseMove={(e) => { if(isDragging) setTransform(p => ({ ...p, x: e.clientX - dragStart.x, y: e.clientY - dragStart.y })); }}
                    onMouseUp={() => setIsDragging(false)}
                    onWheel={(e) => setTransform(p => ({ ...p, scale: Math.min(Math.max(0.25, p.scale - e.deltaY * 0.001), 2) }))}
                >
                    {/* Header */}
                    <div className="absolute top-6 left-6 z-10 pointer-events-none">
                        <div className="bg-slate-900/80 backdrop-blur p-5 rounded-2xl border border-slate-700 shadow-2xl pointer-events-auto">
                            <h1 className="text-2xl font-bold text-white flex items-center gap-3">
                                 <Icon name="FlaskConical" className="text-pink-500" /> Aliphatic Master Map
                            </h1>
                            <p className="text-xs text-slate-400 mt-2 font-mono uppercase tracking-widest">Reaction Pathways & Reagents</p>
                            <div className="mt-4 text-[10px] text-slate-500">
                                Drag to Pan • Scroll to Zoom • Click to Interact
                            </div>
                        </div>
                    </div>

                    {/* Canvas */}
                    <div className="absolute origin-top-left will-change-transform" style={{ transform: `translate(${transform.x}px, ${transform.y}px) scale(${transform.scale})` }}>
                        <svg width="2500" height="1500" className="overflow-visible">
                            <defs>
                                <marker id="arrow" markerWidth="6" markerHeight="4" refX="16" refY="2" orient="auto">
                                    <path d="M0,0 L6,2 L0,4" fill="#475569" />
                                </marker>
                                <marker id="arrow-active" markerWidth="6" markerHeight="4" refX="16" refY="2" orient="auto">
                                    <path d="M0,0 L6,2 L0,4" fill="#a78bfa" />
                                </marker>
                            </defs>

                            {/* Edges */}
                            {Edges.map((edge, i) => {
                                const s = getNode(edge.from);
                                const e = getNode(edge.to);
                                const { x1, y1, x2, y2 } = getOffsetCoords(s, e, 15); 
                                const active = selectedEdge === edge || (selectedNode && (edge.from === selectedNode || edge.to === selectedNode));
                                
                                return (
                                    <g key={i} onClick={(e) => { e.stopPropagation(); setSelectedEdge(edge); setSelectedNode(null); }}>
                                        <line x1={x1} y1={y1} x2={x2} y2={y2} stroke="transparent" strokeWidth="24" />
                                        <line x1={x1} y1={y1} x2={x2} y2={y2} 
                                            className={`edge ${active ? 'edge-active' : ''}`}
                                            stroke={active ? "#a78bfa" : (edge.from === 'grignard' ? '#ec4899' : "#475569")} 
                                            strokeWidth="2"
                                            strokeDasharray={edge.from === 'grignard' ? '5,5' : '0'}
                                            markerEnd={active ? "url(#arrow-active)" : "url(#arrow)"}
                                        />
                                        {transform.scale > 0.45 && (
                                            <foreignObject x={(x1+x2)/2 - 60} y={(y1+y2)/2 - 12} width="120" height="24" style={{pointerEvents:'none'}}>
                                                <div className={`text-[10px] text-center rounded font-mono transition-opacity duration-300
                                                    ${active ? 'bg-purple-900/90 text-purple-200 shadow-lg' : 'opacity-0'}`}>
                                                    {edge.reagents.split(' ')[0]}
                                                </div>
                                            </foreignObject>
                                        )}
                                    </g>
                                );
                            })}

                            {/* Nodes */}
                            {Nodes.map(node => {
                                const isActive = selectedNode === node.id;
                                const isRelated = selectedEdge?.from === node.id || selectedEdge?.to === node.id;

                                return (
                                    <foreignObject key={node.id} x={node.x} y={node.y} width="180" height="80">
                                        <div 
                                            onClick={(e) => { e.stopPropagation(); setSelectedNode(node.id); setSelectedEdge(null); }}
                                            className={`
                                                w-full h-full rounded-xl border flex flex-col items-center justify-center node-container
                                                backdrop-blur-sm
                                                ${isActive 
                                                    ? 'bg-slate-800 border-purple-500 ring-2 ring-purple-500/30 text-white' 
                                                    : 'bg-slate-800/60 border-slate-700 text-slate-300 hover:bg-slate-700 hover:border-slate-500'
                                                }
                                                ${isRelated && !isActive ? 'border-cyan-500/50 bg-slate-800/80 text-cyan-100' : ''}
                                            `}
                                        >
                                            <div className="text-base font-bold text-center tracking-tight">{node.label}</div>
                                            <div className="badge mt-1 opacity-80" style={{color: node.color, backgroundColor: `${node.color}15`}}>
                                                {node.cat}
                                            </div>
                                        </div>
                                    </foreignObject>
                                );
                            })}
                        </svg>
                    </div>

                    {/* Info Panel */}
                    <div className={`absolute bottom-0 left-0 w-full p-6 transition-transform duration-500 z-20 flex justify-center ${selectedNode || selectedEdge ? 'translate-y-0' : 'translate-y-[120%]'}`}>
                        <div className="bg-slate-800/95 backdrop-blur-xl shadow-2xl rounded-2xl border border-slate-700 w-full max-w-4xl p-8 relative text-slate-200">
                            <button onClick={() => {setSelectedNode(null); setSelectedEdge(null);}} className="absolute top-4 right-4 p-2 rounded-full hover:bg-slate-700 text-slate-400">
                                <Icon name="X" className="w-5 h-5" />
                            </button>
                            
                            {selectedEdge && (
                                <div className="grid grid-cols-1 md:grid-cols-12 gap-8 items-start info-scroll max-h-[40vh] overflow-y-auto">
                                    <div className="md:col-span-4 flex flex-col items-center justify-center p-6 bg-slate-900/50 rounded-xl border border-slate-700/50">
                                        <div className="text-lg font-bold text-cyan-400">{getNode(selectedEdge.from).label}</div>
                                        <Icon name="ArrowDown" className="my-3 text-slate-500 w-6 h-6" />
                                        <div className="text-lg font-bold text-purple-400">{getNode(selectedEdge.to).label}</div>
                                    </div>
                                    <div className="md:col-span-8 space-y-4">
                                        <div>
                                            <label className="text-xs font-bold text-slate-500 uppercase tracking-wider">Reagents & Conditions</label>
                                            <div className="text-xl font-mono font-bold text-white bg-slate-900 p-4 rounded-lg border border-slate-600 mt-2 shadow-inner">
                                                {selectedEdge.reagents}
                                            </div>
                                        </div>
                                        <div className="flex flex-wrap gap-3">
                                            <div className="bg-cyan-900/30 text-cyan-300 border border-cyan-800 px-3 py-1 rounded text-xs font-bold uppercase">
                                                {selectedEdge.type}
                                            </div>
                                            <div className="text-slate-400 text-sm flex items-center">
                                                <Icon name="Info" className="w-4 h-4 mr-2" />
                                                {selectedEdge.desc}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            )}

                            {selectedNode && (
                                <div className="text-center py-2">
                                    <h2 className="text-4xl font-bold text-white mb-3">{getNode(selectedNode).label}</h2>
                                    <div className="inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-slate-900 border border-slate-700 text-sm font-mono text-slate-400 mb-6">
                                        Family: <span style={{color: getNode(selectedNode).color}}>{getNode(selectedNode).cat}</span>
                                    </div>
                                    <p className="text-slate-400 text-base max-w-xl mx-auto leading-relaxed">
                                        Interactive Aliphatic Map. Click arrows to view synthetic pathways.
                                    </p>
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
