<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Functional Group Spotter - LuminousLearner International</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=JetBrains+Mono:wght@400;700&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #0F172A; color: #e2e8f0; }
        .font-mono { font-family: 'JetBrains Mono', monospace; }
        
        .option-btn {
            transition: all 0.2s ease;
        }
        .option-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3);
        }
        .option-btn:active:not(:disabled) {
            transform: scale(0.98);
        }
        
        /* Molecule Display Area */
        .molecule-card {
            background-image: radial-gradient(#334155 1px, transparent 1px);
            background-size: 20px 20px;
        }
        
        /* Highlight Box Animation */
        @keyframes pulse-stroke {
            0% { stroke-opacity: 1; stroke-width: 3; }
            50% { stroke-opacity: 0.6; stroke-width: 5; }
            100% { stroke-opacity: 1; stroke-width: 3; }
        }
        .highlight-box {
            fill: rgba(239, 68, 68, 0.1); /* Red tint */
            stroke: #ef4444;             /* Red border */
            stroke-width: 3;
            stroke-dasharray: 8 4;       /* Dashed line */
            animation: pulse-stroke 2s infinite;
            pointer-events: none;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <div id="root" class="flex-grow flex flex-col"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // Question Database (Internationalized)
        const Questions = [
            {
                id: 1,
                type: 'series',
                formula: 'CH3-CH2-OH',
                structureSVG: (
                    <svg viewBox="0 0 300 150" className="w-full h-full">
                        <text x="50" y="80" className="font-mono text-3xl font-bold" fill="#e2e8f0">CH₃—CH₂—<tspan fill="#ef4444">OH</tspan></text>
                        <rect x="200" y="50" width="60" height="50" rx="8" className="highlight-box" />
                    </svg>
                ),
                question: "Which Homologous Series does this molecule belong to?",
                options: ["Alkane", "Alkene", "Alcohol", "Carboxylic Acid"],
                answer: "Alcohol",
                explanation: "It contains a Hydroxyl group (-OH) attached to a saturated carbon atom."
            },
            {
                id: 2,
                type: 'group',
                formula: 'CH3-COOH',
                structureSVG: (
                    <svg viewBox="0 0 300 150" className="w-full h-full">
                        <text x="60" y="80" className="font-mono text-3xl font-bold" fill="#e2e8f0">CH₃—<tspan fill="#ef4444">COOH</tspan></text>
                        <rect x="140" y="50" width="100" height="50" rx="8" className="highlight-box" />
                    </svg>
                ),
                question: "What is the name of the circled functional group?",
                options: ["Hydroxyl group", "Carboxyl group", "Carbonyl group", "Ester group"],
                answer: "Carboxyl group",
                explanation: "The -COOH group is called the Carboxyl group, which defines Carboxylic Acids."
            },
            {
                id: 3,
                type: 'series',
                formula: 'CH2=CH2',
                structureSVG: (
                    <svg viewBox="0 0 300 150" className="w-full h-full">
                        <text x="80" y="80" className="font-mono text-3xl font-bold" fill="#e2e8f0">CH₂<tspan fill="#ef4444">=</tspan>CH₂</text>
                        <rect x="135" y="55" width="30" height="40" rx="5" className="highlight-box" />
                    </svg>
                ),
                question: "Which Homologous Series is characterized by this bond?",
                options: ["Alkane", "Alkene", "Alcohol", "Aldehyde"],
                answer: "Alkene",
                explanation: "The Carbon-Carbon Double Bond (C=C) is the functional group of Alkenes."
            },
            {
                id: 4,
                type: 'group',
                formula: 'CH3-CHO',
                structureSVG: (
                    <svg viewBox="0 0 300 150" className="w-full h-full">
                        <text x="60" y="80" className="font-mono text-3xl font-bold" fill="#e2e8f0">CH₃—</text>
                        <text x="140" y="80" className="font-mono text-3xl font-bold" fill="#e2e8f0">C</text>
                        
                        <line x1="150" y1="60" x2="150" y2="35" stroke="#ef4444" strokeWidth="3" />
                        <line x1="156" y1="60" x2="156" y2="35" stroke="#ef4444" strokeWidth="3" />
                        <text x="142" y="30" className="font-mono text-3xl font-bold" fill="#ef4444">O</text>
                        
                        <line x1="165" y1="75" x2="185" y2="75" stroke="#e2e8f0" strokeWidth="3" />
                        <text x="190" y="80" className="font-mono text-3xl font-bold" fill="#e2e8f0">H</text>
                        
                        <rect x="130" y="10" width="90" height="90" rx="12" className="highlight-box" />
                    </svg>
                ),
                question: "What is the name of this functional group (-CHO)?",
                options: ["Ketone group", "Aldehyde group", "Carboxyl group", "Ester linkage"],
                answer: "Aldehyde group",
                explanation: "A Carbonyl group bonded to at least one Hydrogen atom is an Aldehyde group."
            },
            {
                id: 5,
                type: 'series',
                formula: 'CH3-CO-CH3',
                structureSVG: (
                    <svg viewBox="0 0 300 150" className="w-full h-full">
                        <text x="40" y="80" className="font-mono text-3xl font-bold" fill="#e2e8f0">CH₃—</text>
                        <text x="120" y="80" className="font-mono text-3xl font-bold" fill="#e2e8f0">C</text>
                        
                        <line x1="130" y1="60" x2="130" y2="35" stroke="#ef4444" strokeWidth="3" />
                        <line x1="136" y1="60" x2="136" y2="35" stroke="#ef4444" strokeWidth="3" />
                        <text x="122" y="30" className="font-mono text-3xl font-bold" fill="#ef4444">O</text>
                        
                        <text x="150" y="80" className="font-mono text-3xl font-bold" fill="#e2e8f0">—CH₃</text>
                        
                        <rect x="110" y="10" width="50" height="90" rx="12" className="highlight-box" />
                    </svg>
                ),
                question: "Which homologous series is this molecule part of?",
                options: ["Aldehyde", "Ketone", "Carboxylic Acid", "Ester"],
                answer: "Ketone",
                explanation: "A Carbonyl group (C=O) bonded to two other carbon atoms is a Ketone."
            },
             {
                id: 6,
                type: 'series',
                formula: 'CH3-COO-CH3',
                structureSVG: (
                    <svg viewBox="0 0 300 150" className="w-full h-full">
                        <text x="20" y="80" className="font-mono text-3xl font-bold" fill="#e2e8f0">CH₃—</text>
                        <text x="100" y="80" className="font-mono text-3xl font-bold" fill="#ef4444">COO</text>
                        <text x="170" y="80" className="font-mono text-3xl font-bold" fill="#e2e8f0">—CH₃</text>
                        <rect x="95" y="50" width="80" height="50" rx="8" className="highlight-box" />
                    </svg>
                ),
                question: "Which functional group is shown here?",
                options: ["Carboxyl group", "Ether linkage", "Ester group", "Ketone group"],
                answer: "Ester group",
                explanation: "The -COO- group connecting two alkyl chains is an Ester group (or Ester linkage)."
            }
        ];

        const App = () => {
            const [currentQIndex, setCurrentQIndex] = useState(0);
            const [score, setScore] = useState(0);
            const [streak, setStreak] = useState(0);
            const [selectedOption, setSelectedOption] = useState(null);
            const [showResult, setShowResult] = useState(false);
            const [isCorrect, setIsCorrect] = useState(false);
            const [shuffledOptions, setShuffledOptions] = useState([]);

            // Shuffle function
            const shuffleArray = (array) => {
                const newArr = [...array];
                for (let i = newArr.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [newArr[i], newArr[j]] = [newArr[j], newArr[i]];
                }
                return newArr;
            };

            // Load question
            useEffect(() => {
                setShuffledOptions(shuffleArray(Questions[currentQIndex].options));
                setSelectedOption(null);
                setShowResult(false);
            }, [currentQIndex]);

            const handleOptionClick = (option) => {
                if (showResult) return;
                
                setSelectedOption(option);
                const correct = option === Questions[currentQIndex].answer;
                setIsCorrect(correct);
                setShowResult(true);
                
                if (correct) {
                    setScore(s => s + 10);
                    setStreak(s => s + 1);
                } else {
                    setStreak(0);
                }
            };

            const nextQuestion = () => {
                // Infinite Mode: Pick random next question
                let nextIndex;
                do {
                    nextIndex = Math.floor(Math.random() * Questions.length);
                } while (nextIndex === currentQIndex);

                setCurrentQIndex(nextIndex);
            };

            const currentQ = Questions[currentQIndex];

            // Icon Component
            const Icon = ({ name, size = 20, className = "" }) => {
                const [svg, setSvg] = useState('');
                useEffect(() => {
                    if (window.lucide) {
                        const iconNode = window.lucide.icons[name];
                        if (iconNode) {
                            const iconSvg = window.lucide.createElement(iconNode);
                            iconSvg.setAttribute('width', size);
                            iconSvg.setAttribute('height', size);
                            iconSvg.setAttribute('class', className);
                            setSvg(iconSvg.outerHTML);
                        }
                    }
                }, [name, size, className]);
                return <span dangerouslySetInnerHTML={{ __html: svg }} className="flex items-center" />;
            };

            return (
                <div className="flex flex-col h-full container mx-auto px-4 py-6 max-w-6xl">
                    
                    {/* Header */}
                    <div className="flex justify-between items-center mb-6 border-b border-slate-800 pb-4">
                        <div>
                            <h1 className="text-2xl font-bold text-emerald-400 flex items-center gap-2">
                                <Icon name="Search" /> Functional Group Spotter
                            </h1>
                            <p className="text-slate-500 text-sm">Organic Chemistry Essentials</p>
                        </div>
                        <div className="flex gap-4">
                            <div className="bg-slate-900 px-4 py-2 rounded-xl border border-slate-800 shadow-sm font-mono font-bold text-orange-500 flex items-center gap-2">
                                <Icon name="Flame" size={16}/> Streak: {streak}
                            </div>
                            <div className="bg-slate-900 px-4 py-2 rounded-xl border border-slate-800 shadow-sm font-mono font-bold text-indigo-400">
                                Score: {score}
                            </div>
                        </div>
                    </div>

                    <div className="flex flex-col gap-6">
                        
                        {/* Upper Section: Split 2 Columns */}
                        <div className="grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-8">
                            
                            {/* Left: Visualization */}
                            <div className="bg-slate-900 p-4 rounded-3xl shadow-xl border border-slate-800 molecule-card min-h-[300px] flex items-center justify-center relative overflow-hidden">
                                <div className="w-full h-full">
                                    {currentQ.structureSVG}
                                </div>
                                <div className="absolute bottom-4 text-center w-full text-slate-500 text-xs font-bold uppercase tracking-widest bg-slate-900/90 py-1">
                                    Identify the structure in the Red Box
                                </div>
                            </div>

                            {/* Right: Question & Options */}
                            <div className="bg-slate-900 p-6 rounded-2xl shadow-xl border border-slate-800 flex flex-col justify-center">
                                <h3 className="text-xl font-bold text-slate-200 mb-6 leading-snug">
                                    {currentQ.question}
                                </h3>
                                
                                <div className="grid grid-cols-1 gap-3">
                                    {shuffledOptions.map((opt, idx) => {
                                        let btnStyle = 'bg-slate-800 text-slate-300 border-slate-700 hover:bg-slate-700 hover:border-slate-600';
                                        let icon = null;

                                        if (showResult) {
                                            if (opt === currentQ.answer) {
                                                btnStyle = 'bg-emerald-900/30 text-emerald-400 border-emerald-500/50 ring-1 ring-emerald-500/50';
                                                icon = <Icon name="Check" size={18}/>;
                                            } else if (opt === selectedOption) {
                                                btnStyle = 'bg-red-900/30 text-red-400 border-red-500/50 ring-1 ring-red-500/50';
                                                icon = <Icon name="X" size={18}/>;
                                            } else {
                                                btnStyle = 'opacity-30 bg-slate-800 border-slate-800';
                                            }
                                        } else if (selectedOption === opt) {
                                            btnStyle = 'bg-indigo-900/30 text-indigo-400 border-indigo-500';
                                        }

                                        return (
                                            <button
                                                key={idx}
                                                onClick={() => handleOptionClick(opt)}
                                                disabled={showResult}
                                                className={`option-btn w-full p-4 rounded-xl border font-bold text-left flex justify-between items-center ${btnStyle}`}
                                            >
                                                <span>{opt}</span>
                                                {icon}
                                            </button>
                                        );
                                    })}
                                </div>
                            </div>
                        </div>

                        {/* Lower Section: Feedback (Full Width) */}
                        <div className="w-full">
                            {showResult ? (
                                <div className={`p-6 rounded-2xl border-l-8 shadow-md animate-in slide-in-from-bottom-2 fade-in flex flex-col md:flex-row items-center gap-6 ${isCorrect ? 'bg-emerald-900/20 border-emerald-500' : 'bg-red-900/20 border-red-500'}`}>
                                    <div className="flex-grow">
                                        <div className="flex items-center gap-3 mb-2">
                                            <div className={`p-2 rounded-full ${isCorrect ? 'bg-emerald-500/20 text-emerald-400' : 'bg-red-500/20 text-red-400'}`}>
                                                <Icon name={isCorrect ? "ThumbsUp" : "Info"} size={24} />
                                            </div>
                                            <h4 className={`text-xl font-black ${isCorrect ? 'text-emerald-400' : 'text-red-400'}`}>
                                                {isCorrect ? 'Correct!' : 'Incorrect!'}
                                            </h4>
                                        </div>
                                        <p className="text-slate-300 text-sm md:text-base leading-relaxed pl-1">
                                            <span className="font-bold text-slate-400">Explanation: </span>{currentQ.explanation}
                                        </p>
                                    </div>
                                    
                                    <button 
                                        onClick={nextQuestion}
                                        className={`w-full md:w-auto px-8 py-3 rounded-xl font-bold text-white transition-colors flex items-center justify-center gap-2 shadow-lg whitespace-nowrap ${isCorrect ? 'bg-emerald-600 hover:bg-emerald-500' : 'bg-red-600 hover:bg-red-500'}`}
                                    >
                                        Next Question <Icon name="ArrowRight" size={18} />
                                    </button>
                                </div>
                            ) : (
                                <div className="w-full bg-slate-900/50 rounded-2xl border-2 border-dashed border-slate-800 p-8 text-center text-slate-600">
                                    <div className="mx-auto mb-2 opacity-30 w-8 h-8 flex justify-center"><Icon name="Lightbulb" size={32} /></div>
                                    <p className="text-sm">Select an option above to see the explanation.</p>
                                </div>
                            )}
                        </div>

                    </div>
                    
                    <div className="text-center text-slate-600 text-xs mt-12 border-t border-slate-800 pt-6">
                        Luminous Learner International | IB/A-Level Chemistry
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
