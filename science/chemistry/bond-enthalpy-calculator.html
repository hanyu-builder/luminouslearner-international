<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bond Enthalpy Calculator - LuminousLearner International</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=JetBrains+Mono:wght@400;700&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #0F172A; color: #e2e8f0; }
        .font-mono { font-family: 'JetBrains Mono', monospace; }
        
        .bond-select {
            appearance: none;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%239ca3af' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 0.5rem center;
            background-repeat: no-repeat;
            background-size: 1.5em 1.5em;
            background-color: #1f2937; /* Dark BG */
            border-color: #374151;
            color: #e2e8f0;
        }

        /* Energy Diagram Animations */
        @keyframes grow-up { from { height: 0; } to { height: var(--h); } }
        @keyframes grow-down { from { height: 0; } to { height: var(--h); } }
        .arrow-up { animation: grow-up 1s ease-out forwards; }
        .arrow-down { animation: grow-down 1s ease-out forwards; }
    </style>
</head>
<body class="min-h-screen flex flex-col bg-[#0F172A] text-white">

    <div id="root" class="flex-grow flex flex-col"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const Icon = ({ name, size = 20, className = "" }) => {
            const [svg, setSvg] = useState('');
            useEffect(() => {
                if (window.lucide && window.lucide.icons[name]) {
                    const iconNode = window.lucide.icons[name];
                    const iconSvg = window.lucide.createElement(iconNode);
                    iconSvg.setAttribute('width', size);
                    iconSvg.setAttribute('height', size);
                    iconSvg.setAttribute('class', className);
                    setSvg(iconSvg.outerHTML);
                }
            }, [name, size, className]);
            return <span dangerouslySetInnerHTML={{ __html: svg }} className="flex items-center" />;
        };

        // Bond Enthalpy Data (kJ/mol) - Standard Textbook Values
        const BondData = {
            'C-H': 413, 'C-C': 347, 'C=C': 612, 'C-O': 358, 'C=O': 799, 
            'O=O': 498, 'O-H': 464, 'H-H': 436, 'H-Cl': 432, 'Cl-Cl': 243,
            'N-H': 391, 'N≡N': 945, 'C-Cl': 327, 'H-Br': 366, 'Br-Br': 193, 'H-I': 299, 'I-I': 151
        };

        // Presets (Internationalized)
        const Presets = [
            {
                name: 'Methane Combustion',
                reactants: [ { bond: 'C-H', count: 4 }, { bond: 'O=O', count: 2 } ],
                products: [ { bond: 'C=O', count: 2 }, { bond: 'O-H', count: 4 } ],
                eq: 'CH₄ + 2O₂ → CO₂ + 2H₂O'
            },
            {
                name: 'Ethene Hydrogenation',
                reactants: [ { bond: 'C=C', count: 1 }, { bond: 'C-H', count: 4 }, { bond: 'H-H', count: 1 } ],
                products: [ { bond: 'C-C', count: 1 }, { bond: 'C-H', count: 6 } ],
                eq: 'C₂H₄ + H₂ → C₂H₆'
            },
            {
                name: 'Hydrogen Combustion',
                reactants: [ { bond: 'H-H', count: 2 }, { bond: 'O=O', count: 1 } ],
                products: [ { bond: 'O-H', count: 4 } ],
                eq: '2H₂ + O₂ → 2H₂O'
            }
        ];

        const App = () => {
            const [reactants, setReactants] = useState([{ id: 1, bond: 'C-H', count: 1 }]);
            const [products, setProducts] = useState([{ id: 1, bond: 'C=O', count: 1 }]);
            const [result, setResult] = useState(null);
            
            // Calculate
            const calculate = () => {
                let energyIn = 0;
                let energyOut = 0;
                let isValid = true;

                reactants.forEach(r => {
                    const count = parseFloat(r.count);
                    if (r.bond && BondData[r.bond] && !isNaN(count) && count >= 0) {
                        energyIn += BondData[r.bond] * count;
                    } else {
                        isValid = false;
                    }
                });

                products.forEach(p => {
                    const count = parseFloat(p.count);
                    if (p.bond && BondData[p.bond] && !isNaN(count) && count >= 0) {
                        energyOut += BondData[p.bond] * count;
                    } else {
                        isValid = false;
                    }
                });

                if (!isValid) {
                    setResult({ error: 'Please select bonds and enter valid counts.' });
                    return;
                }

                const deltaH = energyIn - energyOut;
                setResult({ energyIn, energyOut, deltaH });
            };

            // Handlers
            const addRow = (type) => {
                const newItem = { id: Date.now(), bond: Object.keys(BondData)[0], count: 1 };
                if (type === 'reactants') setReactants([...reactants, newItem]);
                else setProducts([...products, newItem]);
                setResult(null);
            };
            
            const removeRow = (type, id) => {
                if (type === 'reactants' && reactants.length > 1) setReactants(reactants.filter(i => i.id !== id));
                else if (type === 'products' && products.length > 1) setProducts(products.filter(i => i.id !== id));
                setResult(null);
            };

            const updateRow = (type, id, field, value) => {
                const list = type === 'reactants' ? reactants : products;
                const newList = list.map(item => item.id === id ? { ...item, [field]: value } : item);
                if (type === 'reactants') setReactants(newList);
                else setProducts(newList);
                setResult(null);
            };

            const loadPreset = (preset) => {
                setReactants(preset.reactants.map((r, i) => ({ ...r, id: `r-${i}` })));
                setProducts(preset.products.map((p, i) => ({ ...p, id: `p-${i}` })));
                setResult(null);
            };

            return (
                <div className="flex flex-col h-full container mx-auto px-4 py-6 max-w-7xl">
                    
                    {/* Header with Presets */}
                    <div className="flex flex-col md:flex-row justify-between items-center mb-8 pb-4 gap-4 border-b border-slate-800">
                        <div>
                            <h1 className="text-3xl font-bold text-pink-400 flex items-center gap-2">
                                <Icon name="Link2" className="text-pink-400" /> Bond Enthalpy Calculator
                            </h1>
                            <p className="text-slate-500 text-sm">Calculate &Delta;H using Bond Energies</p>
                        </div>
                        
                        {/* Presets in Header */}
                        <div className="flex gap-2 bg-slate-900 p-1.5 rounded-xl border border-slate-800 shadow-xl">
                            {Presets.map((p, idx) => (
                                <button 
                                    key={idx} 
                                    onClick={() => loadPreset(p)}
                                    className="px-4 py-1.5 text-xs font-bold text-slate-300 hover:bg-slate-700 hover:text-white rounded-lg transition-all"
                                >
                                    {p.name}
                                </button>
                            ))}
                        </div>
                    </div>

                    <div className="flex flex-col lg:flex-row gap-8 flex-grow items-stretch">
                        
                        {/* Left Column: Inputs (Stacked Vertically) */}
                        <div className="w-full lg:w-5/12 flex flex-col gap-6">
                            
                            {/* Reactants (Broken) - Red */}
                            <div className="bg-slate-900 p-6 rounded-3xl shadow-xl border-l-8 border-red-500 relative overflow-hidden flex-1">
                                <h3 className="text-sm font-bold text-red-400 uppercase mb-4 flex items-center gap-2">
                                    <Icon name="Scissors" size={16}/> Bonds Broken (Endothermic, +H)
                                </h3>
                                <div className="space-y-3 relative z-10">
                                    {reactants.map(item => (
                                        <div key={item.id} className="flex gap-2 items-center">
                                            <select 
                                                value={item.bond} 
                                                onChange={(e) => updateRow('reactants', item.id, 'bond', e.target.value)}
                                                className="flex-1 p-3 bg-slate-800 border border-slate-700 rounded-xl text-sm font-mono font-bold bond-select focus:ring-2 focus:ring-red-400 outline-none"
                                            >
                                                {Object.keys(BondData).map(b => <option key={b} value={b}>{b} ({BondData[b]})</option>)}
                                            </select>
                                            <input 
                                                type="number" 
                                                value={item.count} 
                                                onChange={(e) => updateRow('reactants', item.id, 'count', e.target.value)}
                                                className="w-20 p-3 bg-slate-800 border border-slate-700 rounded-xl text-sm text-center font-bold focus:ring-2 focus:ring-red-400 outline-none"
                                                min="1"
                                            />
                                            <button onClick={() => removeRow('reactants', item.id)} className="text-slate-500 hover:text-red-400 p-1">
                                                <Icon name="X" size={18}/>
                                            </button>
                                        </div>
                                    ))}
                                    <button onClick={() => addRow('reactants')} className="w-full py-2 border-2 border-dashed border-slate-700 text-slate-400 rounded-xl hover:border-red-500/50 hover:text-red-400 text-xs font-bold transition-all mt-2">
                                        + Add Bond
                                    </button>
                                </div>
                            </div>

                            {/* Products (Formed) - Green */}
                            <div className="bg-slate-900 p-6 rounded-3xl shadow-xl border-l-8 border-emerald-500 relative overflow-hidden flex-1">
                                <h3 className="text-sm font-bold text-emerald-400 uppercase mb-4 flex items-center gap-2">
                                    <Icon name="Link" size={16}/> Bonds Formed (Exothermic, -H)
                                </h3>
                                <div className="space-y-3 relative z-10">
                                    {products.map(item => (
                                        <div key={item.id} className="flex gap-2 items-center">
                                            <select 
                                                value={item.bond} 
                                                onChange={(e) => updateRow('products', item.id, 'bond', e.target.value)}
                                                className="flex-1 p-3 bg-slate-800 border border-slate-700 rounded-xl text-sm font-mono font-bold bond-select focus:ring-2 focus:ring-emerald-400 outline-none"
                                            >
                                                {Object.keys(BondData).map(b => <option key={b} value={b}>{b} ({BondData[b]})</option>)}
                                            </select>
                                            <input 
                                                type="number" 
                                                value={item.count} 
                                                onChange={(e) => updateRow('products', item.id, 'count', e.target.value)}
                                                className="w-20 p-3 bg-slate-800 border border-slate-700 rounded-xl text-sm text-center font-bold focus:ring-2 focus:ring-emerald-400 outline-none"
                                                min="1"
                                            />
                                            <button onClick={() => removeRow('products', item.id)} className="text-slate-500 hover:text-emerald-400 p-1">
                                                <Icon name="X" size={18}/>
                                            </button>
                                        </div>
                                    ))}
                                    <button onClick={() => addRow('products')} className="w-full py-2 border-2 border-dashed border-slate-700 text-slate-400 rounded-xl hover:border-emerald-500/50 hover:text-emerald-400 text-xs font-bold transition-all mt-2">
                                        + Add Bond
                                    </button>
                                </div>
                            </div>

                            <button 
                                onClick={calculate}
                                className="w-full py-4 bg-pink-600 text-white rounded-2xl font-bold shadow-lg hover:bg-pink-500 transition-all text-lg flex items-center justify-center gap-2 active:scale-95 shadow-pink-900/50"
                            >
                                <Icon name="Calculator" /> Calculate &Delta;H
                            </button>

                        </div>

                        {/* Right Column: Results & Diagram */}
                        <div className="w-full lg:w-7/12 flex flex-col gap-6">
                            
                            {/* Final Result Card */}
                            {result && !result.error ? (
                                <div className="bg-slate-900 p-8 rounded-3xl shadow-xl border border-slate-800 text-center relative overflow-hidden flex-1">
                                    <div className="relative z-10">
                                        <div className="text-xs font-bold text-slate-400 uppercase tracking-widest mb-3">Net Enthalpy Change (ΔH)</div>
                                        <div className={`text-8xl font-mono font-black tracking-tighter ${result.deltaH < 0 ? 'text-emerald-400' : 'text-red-400'}`}>
                                            {result.deltaH > 0 ? '+' : ''}{result.deltaH}
                                        </div>
                                        <div className="text-xl mt-2 font-bold opacity-80 text-slate-300">kJ mol⁻¹</div>
                                        
                                        <div className={`mt-6 inline-block px-6 py-2 rounded-full text-xs font-bold uppercase tracking-wide border ${result.deltaH < 0 ? 'bg-emerald-900/30 text-emerald-300 border-emerald-500/50' : 'bg-red-900/30 text-red-300 border-red-500/50'}`}>
                                            {result.deltaH < 0 ? 'EXOTHERMIC REACTION' : 'ENDOTHERMIC REACTION'}
                                        </div>
                                    </div>
                                </div>
                            ) : (
                                <div className="bg-slate-900 rounded-3xl border-4 border-dashed border-slate-700 flex items-center justify-center h-full min-h-[200px] text-slate-500 flex-1">
                                    <p className="text-lg opacity-80">Click 'Calculate' to see the result.</p>
                                </div>
                            )}

                            {/* Breakdown */}
                            <div className="bg-slate-900 p-6 rounded-3xl shadow-xl border border-slate-800 flex-1">
                                <h3 className="text-sm font-bold text-slate-400 uppercase mb-4 border-b border-slate-700 pb-2">
                                    Energy Breakdown
                                </h3>
                                
                                <div className="grid grid-cols-2 gap-4">
                                    <div className="p-3 bg-slate-800 rounded-xl border border-red-800/50">
                                        <div className="text-xs text-red-400 uppercase font-bold">Bonds Broken (Input)</div>
                                        <div className="text-3xl font-mono font-black text-red-400">
                                            {result ? result.energyIn : '...'}
                                        </div>
                                        <span className="text-xs text-slate-500">kJ</span>
                                    </div>
                                    <div className="p-3 bg-slate-800 rounded-xl border border-emerald-800/50">
                                        <div className="text-xs text-emerald-400 uppercase font-bold">Bonds Formed (Output)</div>
                                        <div className="text-3xl font-mono font-black text-emerald-400">
                                            {result ? result.energyOut : '...'}
                                        </div>
                                        <span className="text-xs text-slate-500">kJ</span>
                                    </div>
                                </div>

                                <div className="mt-4 pt-4 border-t border-slate-700">
                                    <div className="text-xs text-slate-500 mb-1 uppercase font-bold">Calculation Formula</div>
                                    <div className="font-mono text-sm text-white">
                                        &Delta;H = &Sigma;E(Broken) - &Sigma;E(Formed)
                                    </div>
                                </div>
                            </div>
                            {result && result.error && (
                                <div className="bg-red-900/30 p-4 rounded-xl border border-red-800/50 text-red-400 text-sm font-bold">
                                    <Icon name="AlertCircle" size={16}/> {result.error}
                                </div>
                            )}
                        </div>

                    </div>
                    
                    <div className="text-center text-slate-600 text-xs mt-8 border-t border-slate-800 pt-6">
                        Luminous Learner International | IB/A-Level Chemistry
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
