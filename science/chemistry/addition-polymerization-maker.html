<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Addition Polymerization Maker - LuminousLearner International</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Roboto+Mono:wght@400;700&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #0F172A; color: #e2e8f0; }
        .font-mono { font-family: 'Roboto Mono', monospace; }
        
        /* Monomer Animation */
        .monomer {
            transition: all 0.5s ease;
        }
        
        /* Bond Opening Animation */
        @keyframes open-bond {
            0% { transform: rotate(0deg); width: 40px; }
            50% { transform: rotate(90deg); width: 20px; opacity: 0.5; }
            100% { transform: rotate(180deg); width: 60px; opacity: 1; }
        }
        .bond-opening {
            animation: open-bond 1s ease-out forwards;
        }

        /* Chain Growth */
        .polymer-chain {
            display: flex;
            align-items: center;
            justify-content: center;
            overflow-x: auto;
            padding: 20px;
        }
        
        .bracket {
            font-size: 4rem;
            font-weight: 100;
            color: #cbd5e1;
            line-height: 1;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <div id="root" class="flex-grow flex flex-col"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const Icon = ({ name, size = 20, className = "" }) => {
            const [svg, setSvg] = useState('');
            useEffect(() => {
                if (window.lucide) {
                    const iconNode = window.lucide.icons[name];
                    if (iconNode) {
                        const iconSvg = window.lucide.createElement(iconNode);
                        iconSvg.setAttribute('width', size);
                        iconSvg.setAttribute('height', size);
                        iconSvg.setAttribute('class', className);
                        setSvg(iconSvg.outerHTML);
                    }
                }
            }, [name, size, className]);
            return <span dangerouslySetInnerHTML={{ __html: svg }} className="flex items-center" />;
        };

        // Monomer Data (Internationalized)
        const Monomers = [
            { 
                id: 'ethene', 
                name: 'Ethene', 
                polymer: 'Polythene (PE)', 
                sideGroups: ['H', 'H', 'H', 'H'], 
                color: 'bg-blue-600',
                uses: 'Plastic bags, Bottles',
                conditions: [
                    { type: 'LDPE', detail: 'High Pressure (1000 atm), High Temp (200°C), Trace O₂' },
                    { type: 'HDPE', detail: 'Low Pressure, Low Temp, Ziegler-Natta Catalyst' }
                ]
            },
            { 
                id: 'propene', 
                name: 'Propene', 
                polymer: 'Polypropene (PP)', 
                sideGroups: ['CH₃', 'H', 'H', 'H'], 
                color: 'bg-yellow-500',
                uses: 'Ropes, Crates, Medical Equipment',
                conditions: [
                    { type: 'General', detail: 'Ziegler-Natta Catalyst, Moderate Temp & Pressure' }
                ]
            },
            { 
                id: 'chloroethene', 
                name: 'Chloroethene', 
                polymer: 'Polyvinyl Chloride (PVC)', 
                sideGroups: ['Cl', 'H', 'H', 'H'], 
                color: 'bg-green-600',
                uses: 'Water pipes, Wire insulation, Raincoats',
                conditions: [
                    { type: 'General', detail: 'Peroxide initiator, Heat (40-60°C), High Pressure' }
                ]
            },
            { 
                id: 'styrene', 
                name: 'Styrene', 
                polymer: 'Polystyrene (PS)', 
                sideGroups: ['C₆H₅', 'H', 'H', 'H'], 
                color: 'bg-purple-600',
                uses: 'Foam packaging, Disposable cutlery, CD cases',
                conditions: [
                    { type: 'General', detail: 'Peroxide initiator, Heat (Reflux)' }
                ]
            }
        ];

        const App = () => {
            const [selectedMonomer, setSelectedMonomer] = useState(Monomers[0]);
            const [isPolymerizing, setIsPolymerizing] = useState(false);
            const [step, setStep] = useState(0); // 0: Ready, 1: Open Bond, 2: Connect
            const [chainLength, setChainLength] = useState(1);

            const startPolymerization = () => {
                if (isPolymerizing) return;
                setIsPolymerizing(true);
                setStep(0);
                setChainLength(1);

                // Animation Sequence
                setTimeout(() => setStep(1), 500); // Open bonds
                setTimeout(() => {
                    setStep(2);
                    // Grow chain
                    let count = 1;
                    const interval = setInterval(() => {
                        count++;
                        setChainLength(count);
                        if (count >= 3) {
                            clearInterval(interval);
                            setIsPolymerizing(false);
                        }
                    }, 800);
                }, 1500);
            };

            const reset = () => {
                setIsPolymerizing(false);
                setStep(0);
                setChainLength(1);
            };

            // Render a single unit (monomer or repeating unit)
            const Unit = ({ groups, isOpen, isLinked }) => {
                return (
                    <div className={`relative flex flex-col items-center transition-all duration-1000 ${isLinked ? 'mx-0' : 'mx-4'}`}>
                        
                        {/* Top Groups */}
                        <div className="flex gap-8 mb-1">
                            <div className="w-8 h-8 rounded-full bg-slate-700 flex items-center justify-center text-xs font-bold border border-slate-500 shadow-sm">{groups[0]}</div>
                            <div className="w-8 h-8 rounded-full bg-slate-700 flex items-center justify-center text-xs font-bold border border-slate-500 shadow-sm">{groups[2]}</div>
                        </div>

                        {/* Carbon Backbone */}
                        <div className="flex items-center relative">
                            {/* Left Bond */}
                            <div className={`h-2 bg-slate-300 transition-all duration-500 ${isOpen ? 'w-8 -ml-8' : 'w-0'}`}></div>
                            
                            {/* C-C Core */}
                            <div className="flex items-center gap-0 relative bg-slate-800 px-2 py-1 rounded-lg border border-slate-600 z-10 shadow-md">
                                <div className="w-10 h-10 rounded-full bg-slate-600 flex items-center justify-center font-bold text-xl shadow-inner text-white border border-slate-500">C</div>
                                
                                {/* Double/Single Bond */}
                                <div className="w-12 h-8 flex flex-col justify-center items-center gap-1 mx-1">
                                    <div className="w-full h-1.5 bg-slate-300 rounded-full"></div>
                                    <div className={`w-full h-1.5 bg-slate-300 rounded-full transition-all duration-500 ${isOpen ? 'opacity-0 scale-x-0' : 'opacity-100 scale-x-100'}`}></div>
                                </div>

                                <div className="w-10 h-10 rounded-full bg-slate-600 flex items-center justify-center font-bold text-xl shadow-inner text-white border border-slate-500">C</div>
                            </div>

                            {/* Right Bond */}
                            <div className={`h-2 bg-slate-300 transition-all duration-500 ${isOpen ? 'w-8 -mr-8' : 'w-0'}`}></div>
                        </div>

                        {/* Bottom Groups */}
                        <div className="flex gap-8 mt-1">
                            <div className="w-8 h-8 rounded-full bg-slate-700 flex items-center justify-center text-xs font-bold border border-slate-500 shadow-sm">{groups[1]}</div>
                            <div className="w-8 h-8 rounded-full bg-slate-700 flex items-center justify-center text-xs font-bold border border-slate-500 shadow-sm">{groups[3]}</div>
                        </div>
                    </div>
                );
            };

            return (
                <div className="flex flex-col h-full container mx-auto px-4 py-6 max-w-5xl">
                    
                    {/* Header */}
                    <div className="flex justify-between items-center mb-6 border-b border-slate-800 pb-4">
                        <div>
                            <h1 className="text-2xl font-bold text-yellow-400 flex items-center gap-2">
                                <Icon name="Link" /> Addition Polymerization Maker
                            </h1>
                            <p className="text-slate-500 text-sm">Visualize Monomer to Polymer Conversion</p>
                        </div>
                        <button onClick={reset} className="px-4 py-2 bg-slate-800 text-slate-400 rounded-lg hover:bg-slate-700 hover:text-white font-bold text-sm flex items-center gap-2 transition-colors border border-slate-700">
                            <Icon name="RotateCcw" size={16} /> Reset
                        </button>
                    </div>

                    <div className="flex flex-col lg:flex-row gap-8 flex-grow">
                        
                        {/* Left: Reaction Stage */}
                        <div className="w-full lg:w-2/3 bg-slate-900 rounded-3xl border-4 border-slate-800 relative flex flex-col items-center justify-center min-h-[500px] shadow-2xl overflow-hidden p-8">
                            
                            {/* Background Grid */}
                            <div className="absolute inset-0 opacity-5" 
                                 style={{backgroundImage: 'radial-gradient(#fbbf24 1px, transparent 1px)', backgroundSize: '30px 30px'}}></div>

                            {/* Info Tag */}
                            <div className="absolute top-4 left-4 bg-slate-950/80 px-3 py-1 rounded-lg border border-slate-700 text-xs font-bold text-yellow-400 uppercase tracking-wider z-20 shadow-lg">
                                {step === 0 ? 'Monomers' : step === 1 ? 'Breaking Double Bond' : 'Polymerization'}
                            </div>

                            {/* Main Visualization */}
                            <div className="relative z-10 w-full h-64 flex items-center justify-center overflow-hidden">
                                {step < 2 ? (
                                    /* Monomers Stage */
                                    <div className="flex gap-4 items-center">
                                        <Unit groups={selectedMonomer.sideGroups} isOpen={step === 1} isLinked={false} />
                                        <div className="text-4xl font-bold text-slate-600 pb-4">+</div>
                                        <Unit groups={selectedMonomer.sideGroups} isOpen={step === 1} isLinked={false} />
                                        <div className="text-4xl font-bold text-slate-600 pb-4">+</div>
                                        <Unit groups={selectedMonomer.sideGroups} isOpen={step === 1} isLinked={false} />
                                    </div>
                                ) : (
                                    /* Polymer Stage */
                                    <div className="flex items-center animate-in slide-in-from-right duration-1000">
                                        <div className="text-slate-500 text-4xl mr-2 font-light">~</div>
                                        {Array.from({length: chainLength}).map((_, i) => (
                                            <Unit key={i} groups={selectedMonomer.sideGroups} isOpen={true} isLinked={true} />
                                        ))}
                                        <div className="text-slate-500 text-4xl ml-2 font-light">~</div>
                                    </div>
                                )}
                            </div>

                            {/* Equation Display */}
                            <div className="absolute bottom-28 text-center w-full px-4">
                                <div className="bg-slate-950/50 p-3 rounded-xl border border-slate-700 inline-block shadow-lg backdrop-blur-sm">
                                    <div className="text-xs text-slate-500 font-bold mb-1 uppercase">Chemical Equation</div>
                                    <div className="font-mono text-lg text-white">
                                        n <span className="text-yellow-400">{selectedMonomer.name.split(' ')[0]}</span> &rarr; 
                                        <span className="text-green-400"> {selectedMonomer.polymer.split(' ')[0]}</span>
                                    </div>
                                </div>
                            </div>

                            {/* Action Button - Enlarged for Visibility */}
                            <div className="absolute bottom-8 z-20">
                                <button 
                                    onClick={startPolymerization}
                                    disabled={isPolymerizing || step === 2}
                                    className={`px-12 py-4 rounded-full font-bold text-lg shadow-xl transition-all flex items-center justify-center gap-3 min-w-[260px] transform hover:scale-105 active:scale-95
                                        ${step === 2 ? 'bg-green-600 text-white cursor-default opacity-100' : 'bg-yellow-500 hover:bg-yellow-600 text-slate-900'}
                                    `}
                                >
                                    {step === 2 ? (
                                        <>
                                            <Icon name="Check" size={24} className="stroke-[3]"/> 
                                            <span>Complete</span>
                                        </>
                                    ) : (
                                        <>
                                            <Icon name="Play" size={24} className="stroke-[3] fill-current"/> 
                                            <span>Start Polymerization</span>
                                        </>
                                    )}
                                </button>
                            </div>

                        </div>

                        {/* Right: Selection & Info */}
                        <div className="w-full lg:w-1/3 flex flex-col gap-6">
                            
                            {/* Monomer Selector */}
                            <div className="bg-slate-900 p-6 rounded-2xl border border-slate-800 shadow-lg">
                                <h3 className="text-lg font-bold mb-4 text-white flex items-center gap-2">
                                    <Icon name="Layers" className="text-blue-400"/> Select Monomer
                                </h3>
                                <div className="space-y-2">
                                    {Monomers.map(m => (
                                        <button
                                            key={m.id}
                                            onClick={() => { setSelectedMonomer(m); reset(); }}
                                            disabled={isPolymerizing && step > 0}
                                            className={`w-full p-3 rounded-xl border text-left transition-all flex justify-between items-center
                                                ${selectedMonomer.id === m.id 
                                                    ? 'bg-yellow-900/20 border-yellow-500 text-yellow-400' 
                                                    : 'bg-slate-800 border-slate-700 text-slate-400 hover:bg-slate-700 hover:border-slate-500'}
                                            `}
                                        >
                                            <span className="font-bold">{m.name.split(' ')[0]}</span>
                                            <span className="text-xs opacity-70 font-mono bg-slate-950 px-2 py-0.5 rounded border border-slate-800">{m.sideGroups[0]} group</span>
                                        </button>
                                    ))}
                                </div>
                            </div>

                            {/* Polymer Info */}
                            <div className="bg-slate-900 p-6 rounded-2xl border border-slate-800 shadow-lg flex-grow animate-in fade-in slide-in-from-bottom-4">
                                <div className="mb-4">
                                    <div className="text-xs text-slate-500 uppercase font-bold mb-1">Resulting Polymer</div>
                                    <div className="text-2xl font-bold text-white mb-2">{selectedMonomer.polymer}</div>
                                    <div className="inline-block bg-green-900/30 text-green-400 px-3 py-1 rounded-full text-xs border border-green-800 font-mono shadow-sm">
                                        Repeating Unit: -[ C-C ]-
                                    </div>
                                </div>

                                <div className="space-y-4 text-sm text-slate-300 leading-relaxed border-t border-slate-700 pt-4">
                                    <div>
                                        <strong className="text-yellow-400 block mb-1 text-xs uppercase flex items-center gap-2">
                                            <Icon name="Package" size={12}/> Uses
                                        </strong>
                                        <p>{selectedMonomer.uses}</p>
                                    </div>

                                    {/* Process Conditions Section */}
                                    <div className="bg-purple-900/20 p-3 rounded-lg border border-purple-500/30">
                                        <strong className="text-purple-300 block mb-2 text-xs uppercase flex items-center gap-2">
                                            <Icon name="Settings2" size={12}/> Process Conditions
                                        </strong>
                                        <ul className="space-y-2">
                                            {selectedMonomer.conditions.map((cond, idx) => (
                                                <li key={idx} className="text-xs border-l-2 border-purple-500 pl-2">
                                                    {cond.type !== 'General' && <span className="font-bold text-purple-200 block">{cond.type}</span>}
                                                    <span className="text-slate-400">{cond.detail}</span>
                                                </li>
                                            ))}
                                        </ul>
                                    </div>
                                    
                                    <div className="bg-slate-950 p-3 rounded-lg border border-slate-700 mt-2">
                                        <strong className="text-blue-400 block mb-1 text-xs uppercase flex items-center gap-1">
                                            <Icon name="Info" size={12}/> Key Mechanism
                                        </strong>
                                        <ul className="list-disc list-inside pl-1 text-xs text-slate-400 space-y-1">
                                            <li>Double bond (C=C) breaks.</li>
                                            <li>Single bonds (C-C) form to link units.</li>
                                            <li>The carbon backbone extends.</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                    
                    <div className="text-center text-slate-600 text-xs mt-8 border-t border-slate-800 pt-4">
                        Luminous Learner International | IB/A-Level Chemistry
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
