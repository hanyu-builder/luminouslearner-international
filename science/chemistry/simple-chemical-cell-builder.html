<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Chemical Cell Builder - LuminousLearner International</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=JetBrains+Mono:wght@400;700&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #0F172A; color: #e2e8f0; }
        .font-mono { font-family: 'JetBrains Mono', monospace; }

        /* Bulb Glow Animation */
        @keyframes glow {
            0% { box-shadow: 0 0 10px var(--glow-color); }
            50% { box-shadow: 0 0 30px var(--glow-color); }
            100% { box-shadow: 0 0 10px var(--glow-color); }
        }
        .bulb-glow {
            animation: glow 1.5s infinite ease-in-out;
            transition: all 0.5s ease;
        }

        /* Bubble Animation */
        @keyframes rise {
            0% { transform: translateY(0) scale(0.5); opacity: 0; }
            50% { opacity: 1; }
            100% { transform: translateY(-60px) scale(1.2); opacity: 0; }
        }
        .bubble {
            position: absolute;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 50%;
            animation: rise 2s infinite linear;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <div id="root" class="flex-grow flex flex-col"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- Internal Icons ---
        const Icons = {
            Battery: ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect width="16" height="10" x="2" y="7" rx="2" ry="2"/><line x1="22" x2="22" y1="11" y2="13"/><line x1="6" x2="6" y1="11" y2="13"/><line x1="10" x2="10" y1="11" y2="13"/><line x1="14" x2="14" y1="11" y2="13"/></svg>,
            Settings: ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M20 7h-9"/><path d="M14 17H5"/><circle cx="17" cy="17" r="3"/><circle cx="7" cy="7" r="3"/></svg>,
            Info: ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>,
            Lightbulb: ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M15 14c.2-1 .7-1.7 1.5-2.5 1-1 1.5-2.4 1.5-3.8 0-3.2-2.5-5.7-5.7-5.7C9 2 6.6 4.1 6.3 7c-.2 2.2 1 4.3 2.7 5.5.6.5 1.1 1.2 1.1 2"/><path d="M9 18h6"/><path d="M10 22h4"/></svg>,
            ArrowRight: ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>
        };

        // Metals Data (Internationalized)
        const Metals = [
            { id: 'Mg', name: 'Magnesium (Mg)', symbol: 'Mg', E: -2.37, color: 'bg-gray-300 border-gray-400' },
            { id: 'Zn', name: 'Zinc (Zn)', symbol: 'Zn', E: -0.76, color: 'bg-slate-400 border-slate-500' },
            { id: 'Fe', name: 'Iron (Fe)', symbol: 'Fe', E: -0.44, color: 'bg-amber-700 border-amber-800' },
            { id: 'Cu', name: 'Copper (Cu)', symbol: 'Cu', E: 0.34, color: 'bg-orange-500 border-orange-600' },
            { id: 'Ag', name: 'Silver (Ag)', symbol: 'Ag', E: 0.80, color: 'bg-slate-200 border-slate-300' }
        ];

        // Electrolytes Data (Internationalized)
        const Electrolytes = [
            { id: 'HCl', name: 'Dilute HCl', type: 'acid', color: 'bg-yellow-100/10', conductivity: 1.0, desc: 'Strong Electrolyte' },
            { id: 'NaCl', name: 'Dilute NaCl', type: 'neutral', color: 'bg-sky-100/10', conductivity: 0.9, desc: 'Strong Electrolyte' },
            { id: 'Lemon', name: 'Lemon Juice', type: 'acid', color: 'bg-yellow-400/20', conductivity: 0.4, desc: 'Weak Electrolyte (Citric Acid)' },
            { id: 'Vinegar', name: 'Vinegar', type: 'acid', color: 'bg-orange-100/10', conductivity: 0.3, desc: 'Weak Electrolyte (Acetic Acid)' },
            { id: 'Water', name: 'Distilled Water', type: 'neutral', color: 'bg-blue-100/5', conductivity: 0.01, desc: 'Non-electrolyte' }
        ];

        const App = () => {
            const [electrodeL, setElectrodeL] = useState(Metals[1]); // Zn
            const [electrodeR, setElectrodeR] = useState(Metals[3]); // Cu
            const [electrolyte, setElectrolyte] = useState(Electrolytes[0]); // HCl
            
            const [voltage, setVoltage] = useState(0);
            const [current, setCurrent] = useState(0);
            const [anode, setAnode] = useState(null); // 'left' or 'right'
            const [electrons, setElectrons] = useState([]);
            const [showVoltmeter, setShowVoltmeter] = useState(false);

            useEffect(() => {
                const diff = Math.abs(electrodeR.E - electrodeL.E);
                setVoltage(diff);

                const simulatedCurrent = diff * electrolyte.conductivity;
                setCurrent(simulatedCurrent);

                if (diff < 0.01) {
                    setAnode(null);
                } else if (electrodeL.E < electrodeR.E) {
                    setAnode('left'); // Left is Anode (Oxidation, loses e-)
                } else {
                    setAnode('right'); // Right is Anode
                }

            }, [electrodeL, electrodeR, electrolyte]);

            // Electron Animation
            useEffect(() => {
                let interval;
                if (current > 0.05) {
                    const spawnRate = Math.max(100, 500 - (current * 200)); 
                    interval = setInterval(() => {
                        setElectrons(prev => {
                            const newE = { id: Date.now(), progress: 0 };
                            const next = [...prev, newE].filter(e => e.progress < 100); 
                            return next;
                        });
                    }, spawnRate);
                } else {
                    setElectrons([]);
                }
                return () => clearInterval(interval);
            }, [current]);

            useEffect(() => {
                let animFrame;
                const updatePos = () => {
                    const speed = Math.max(0.5, current * 1.5);
                    setElectrons(prev => prev.map(e => ({ ...e, progress: e.progress + speed })));
                    animFrame = requestAnimationFrame(updatePos);
                };
                if (current > 0.05) {
                    animFrame = requestAnimationFrame(updatePos);
                }
                return () => cancelAnimationFrame(animFrame);
            }, [current]);

            const getVoltageColor = (v) => {
                if (v > 2.0) return 'text-red-400 bg-red-900/30 border-red-500/50';
                if (v > 1.0) return 'text-orange-400 bg-orange-900/30 border-orange-500/50';
                if (v > 0.5) return 'text-yellow-400 bg-yellow-900/30 border-yellow-500/50';
                return 'text-slate-400 bg-slate-800 border-slate-700';
            };
            
            const getBulbStyle = () => {
                if (current < 0.05) return { opacity: 0.3, filter: 'grayscale(100%) brightness(0.5)' };
                const brightness = 1 + (current * 0.8);
                const dropShadow = Math.min(50, current * 20);
                const colorIntensity = Math.min(1, current / 1.5);
                return { 
                    opacity: 1, 
                    filter: `drop-shadow(0 0 ${dropShadow}px rgba(250, 204, 21, ${colorIntensity})) brightness(${brightness})`,
                    '--glow-color': `rgba(250, 204, 21, ${colorIntensity})`,
                    transform: `scale(${1 + current * 0.05})` 
                };
            };

            return (
                <div className="flex flex-col h-full container mx-auto px-4 py-6 max-w-5xl">
                    
                    {/* Header */}
                    <div className="flex justify-between items-center mb-6 border-b border-slate-800 pb-4">
                        <div>
                            <h1 className="text-2xl font-bold text-yellow-500 flex items-center gap-2">
                                <Icons.Battery /> Simple Chemical Cell
                            </h1>
                            <p className="text-slate-500 text-sm">Voltaic Cell Simulator</p>
                        </div>
                        <div className="flex items-center gap-2">
                            <span className="text-sm font-bold text-slate-500 uppercase">Mode:</span>
                            <button onClick={() => setShowVoltmeter(false)} className={`px-3 py-1 rounded text-xs font-bold border transition-colors ${!showVoltmeter ? 'bg-yellow-500/20 text-yellow-400 border-yellow-500' : 'bg-slate-800 text-slate-500 border-slate-700'}`}>Bulb</button>
                            <button onClick={() => setShowVoltmeter(true)} className={`px-3 py-1 rounded text-xs font-bold border transition-colors ${showVoltmeter ? 'bg-blue-500/20 text-blue-400 border-blue-500' : 'bg-slate-800 text-slate-500 border-slate-700'}`}>Voltmeter</button>
                        </div>
                    </div>

                    <div className="flex flex-col lg:flex-row gap-8 flex-grow">
                        
                        {/* Left: Configuration */}
                        <div className="w-full lg:w-1/3 flex flex-col gap-6">
                            <div className="bg-slate-900 p-5 rounded-2xl shadow-xl border border-slate-800">
                                <h3 className="text-sm font-bold text-slate-400 uppercase mb-4 flex items-center gap-2">
                                    <Icons.Settings className="text-slate-500" /> Cell Configuration
                                </h3>
                                
                                <div className="mb-4">
                                    <label className="text-xs font-bold text-slate-500 block mb-1">Electrode A (Left)</label>
                                    <select value={electrodeL.symbol} onChange={(e) => setElectrodeL(Metals.find(m => m.symbol === e.target.value))} className="w-full p-3 bg-slate-800 border border-slate-700 rounded-xl font-bold text-slate-200 outline-none focus:ring-2 focus:ring-yellow-500/50">
                                        {Metals.map(m => <option key={m.symbol} value={m.symbol}>{m.name}</option>)}
                                    </select>
                                </div>
                                <div className="mb-4">
                                    <label className="text-xs font-bold text-slate-500 block mb-1">Electrode B (Right)</label>
                                    <select value={electrodeR.symbol} onChange={(e) => setElectrodeR(Metals.find(m => m.symbol === e.target.value))} className="w-full p-3 bg-slate-800 border border-slate-700 rounded-xl font-bold text-slate-200 outline-none focus:ring-2 focus:ring-yellow-500/50">
                                        {Metals.map(m => <option key={m.symbol} value={m.symbol}>{m.name}</option>)}
                                    </select>
                                </div>
                                <div className="mb-2">
                                    <label className="text-xs font-bold text-slate-500 block mb-1">Electrolyte Solution</label>
                                    <select value={electrolyte.id} onChange={(e) => setElectrolyte(Electrolytes.find(el => el.id === e.target.value))} className="w-full p-3 bg-slate-800 border border-slate-700 rounded-xl font-bold text-blue-400 outline-none focus:ring-2 focus:ring-blue-500/50">
                                        {Electrolytes.map(e => <option key={e.id} value={e.id}>{e.name}</option>)}
                                    </select>
                                    <p className="text-[10px] text-slate-500 mt-1 text-right">{electrolyte.desc}</p>
                                </div>
                            </div>

                            <div className="bg-slate-900 p-5 rounded-2xl text-slate-300 shadow-xl border border-slate-800">
                                <h3 className="text-sm font-bold text-yellow-500 uppercase mb-2 flex items-center gap-2">
                                    <Icons.Info className="text-yellow-500" /> Principles
                                </h3>
                                <div className="text-sm space-y-2 opacity-90 text-slate-400">
                                    <p>• The more reactive metal (higher in E.C.S.) loses electrons and becomes the <strong>Anode (-)</strong>.</p>
                                    <p>• Electrons flow through the wire to the less reactive metal, the <strong>Cathode (+)</strong>.</p>
                                    <p>• <strong>Voltage</strong> depends on the difference in reactivity between the two metals.</p>
                                </div>
                            </div>
                        </div>

                        {/* Right: Visualization */}
                        <div className="w-full lg:w-2/3 flex flex-col gap-6 items-center justify-center bg-slate-900 rounded-3xl border-4 border-slate-800 relative overflow-hidden min-h-[500px] p-8">
                            <div className="absolute inset-0 opacity-5" style={{backgroundImage: 'radial-gradient(#fff 1px, transparent 1px)', backgroundSize: '20px 20px'}}></div>

                            {/* Circuit Top */}
                            <div className="relative w-full max-w-md h-32 flex justify-center items-center mb-4">
                                <svg className="absolute inset-0 w-full h-full overflow-visible" preserveAspectRatio="none">
                                    <line x1="25%" y1="100%" x2="25%" y2="50%" stroke="#475569" strokeWidth="4" />
                                    <line x1="75%" y1="100%" x2="75%" y2="50%" stroke="#475569" strokeWidth="4" />
                                    <line x1="25%" y1="50%" x2="75%" y2="50%" stroke="#475569" strokeWidth="4" />
                                </svg>

                                <div className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-10 bg-slate-800 p-2 rounded-full shadow-lg border-2 border-slate-700">
                                    {showVoltmeter ? (
                                        <div className="w-24 h-16 bg-black rounded-lg border-4 border-slate-600 flex items-center justify-center font-mono text-green-400 font-bold text-xl shadow-inner">
                                            {voltage.toFixed(2)} V
                                        </div>
                                    ) : (
                                        <div className={`bulb-glow transition-all duration-500`} style={getBulbStyle()}>
                                            <Icons.Lightbulb className="text-yellow-400 fill-yellow-400" />
                                        </div>
                                    )}
                                </div>

                                {/* Electrons */}
                                {electrons.map(e => {
                                    let x, y;
                                    const p = e.progress;
                                    if (anode === 'left') {
                                        if (p < 20) { x = 25; y = 100 - (p/20)*50; }
                                        else if (p < 80) { x = 25 + ((p-20)/60)*50; y = 50; }
                                        else { x = 75; y = 50 + ((p-80)/20)*50; }
                                    } else {
                                        if (p < 20) { x = 75; y = 100 - (p/20)*50; }
                                        else if (p < 80) { x = 75 - ((p-20)/60)*50; y = 50; }
                                        else { x = 25; y = 50 + ((p-80)/20)*50; }
                                    }
                                    return <div key={e.id} className="absolute w-3 h-3 bg-yellow-400 rounded-full shadow-lg z-20" style={{ left: `${x}%`, top: `${y}%`, transform: 'translate(-50%, -50%)' }}></div>;
                                })}

                                {anode && current > 0.05 && (
                                    <div className="absolute top-0 bg-yellow-500/20 text-yellow-400 text-[10px] px-2 py-0.5 rounded-full font-bold border border-yellow-500/50 animate-pulse">
                                        e⁻ Flow {anode === 'left' ? '→' : '←'}
                                    </div>
                                )}
                            </div>

                            {/* Beaker & Electrodes */}
                            <div className="relative w-full max-w-md flex justify-center">
                                <div className="w-64 h-48 border-x-4 border-b-4 border-slate-600 bg-white/5 backdrop-blur-sm rounded-b-3xl relative overflow-hidden">
                                    <div className={`absolute bottom-0 w-full h-3/4 ${electrolyte.color} transition-colors duration-500`}></div>
                                    {anode && current > 0.05 && electrolyte.type === 'acid' && (
                                        <div className="absolute bottom-0 w-full h-3/4 overflow-hidden">
                                            <div className={`absolute w-1/2 h-full ${anode === 'left' ? 'right-0' : 'left-0'}`}>
                                                {[...Array(6)].map((_, i) => (
                                                    <div key={i} className="bubble" style={{left: `${Math.random()*60 + 20}%`, bottom: `${Math.random()*20}%`, width: `${Math.random()*6+4}px`, height: `${Math.random()*6+4}px`, animationDelay: `${Math.random()}s`}}></div>
                                                ))}
                                            </div>
                                        </div>
                                    )}
                                </div>
                                
                                <div className={`absolute top-[-20px] left-[25%] -translate-x-1/2 w-12 h-40 ${electrodeL.color} border-2 rounded-md shadow-md flex items-end justify-center pb-2 transition-all`}>
                                    <span className="font-bold text-slate-800">{electrodeL.symbol}</span>
                                    {current > 0.05 && anode === 'left' && <div className="absolute -top-8 text-slate-300 font-bold text-lg">-</div>}
                                    {current > 0.05 && anode === 'right' && <div className="absolute -top-8 text-slate-300 font-bold text-lg">+</div>}
                                </div>

                                <div className={`absolute top-[-20px] left-[75%] -translate-x-1/2 w-12 h-40 ${electrodeR.color} border-2 rounded-md shadow-md flex items-end justify-center pb-2 transition-all`}>
                                    <span className="font-bold text-slate-800">{electrodeR.symbol}</span>
                                    {current > 0.05 && anode === 'right' && <div className="absolute -top-8 text-slate-300 font-bold text-lg">-</div>}
                                    {current > 0.05 && anode === 'left' && <div className="absolute -top-8 text-slate-300 font-bold text-lg">+</div>}
                                </div>
                            </div>

                            {/* Combined Result Display */}
                            <div className="bg-slate-800 px-6 py-3 rounded-xl shadow-lg border border-slate-700 text-center mt-2 w-full max-w-sm">
                                {current > 0.001 ? (
                                    <div className="flex items-center justify-between gap-4">
                                        <div className="flex-1 text-left">
                                            <div className="text-xs text-slate-500 uppercase font-bold mb-1">Electron Flow</div>
                                            <div className="font-bold text-xl text-slate-200 flex items-center gap-2">
                                                {anode === 'left' ? electrodeL.symbol : electrodeR.symbol} 
                                                <Icons.ArrowRight className="text-blue-400 w-6 h-6" />
                                                {anode === 'left' ? electrodeR.symbol : electrodeL.symbol}
                                            </div>
                                            <div className="text-[10px] text-slate-500">From Anode to Cathode</div>
                                        </div>
                                        
                                        <div className={`flex-1 text-right p-2 rounded-xl border-2 ${getVoltageColor(voltage)}`}>
                                            <div className="text-[10px] uppercase font-bold mb-0.5 opacity-70">Voltage Diff.</div>
                                            <div className="font-mono font-black text-2xl">{voltage.toFixed(2)} V</div>
                                        </div>
                                    </div>
                                ) : (
                                    <div className="text-slate-500 font-bold py-2">
                                        {voltage === 0 ? 'No Reaction (Same Metal)' : 'Low Conductivity / No Current'}
                                    </div>
                                )}
                            </div>

                        </div>
                    </div>
                    
                    <div className="text-center text-slate-600 text-xs mt-6 border-t border-slate-800 pt-4">
                        Luminous Learner International | IB/A-Level Chemistry
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
