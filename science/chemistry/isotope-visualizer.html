<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Isotope Visualizer - LuminousLearner International</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=JetBrains+Mono:wght@400;700&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #0F172A; color: #e2e8f0; }
        .font-mono { font-family: 'JetBrains Mono', monospace; }
        
        /* Nucleon (Proton/Neutron) Animation */
        @keyframes jiggle {
            0% { transform: translate(0, 0); }
            25% { transform: translate(1px, 1px); }
            50% { transform: translate(-1px, 0); }
            75% { transform: translate(0, -1px); }
            100% { transform: translate(0, 0); }
        }
        .nucleon {
            animation: jiggle 2s infinite ease-in-out;
            transition: all 0.3s ease;
        }

        /* Radiation Effect */
        @keyframes radiate {
            0% { box-shadow: 0 0 0 0 rgba(234, 179, 8, 0.7); }
            70% { box-shadow: 0 0 0 20px rgba(234, 179, 8, 0); }
            100% { box-shadow: 0 0 0 0 rgba(234, 179, 8, 0); }
        }
        .radioactive {
            animation: radiate 1.5s infinite;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <div id="root" class="flex-grow flex flex-col"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Isotope Data (Internationalized)
        const IsotopeData = {
            H: {
                name: 'Hydrogen',
                symbol: 'H',
                z: 1,
                isotopes: [
                    { a: 1, neutrons: 0, name: 'Protium', abundance: 99.98, stable: true },
                    { a: 2, neutrons: 1, name: 'Deuterium (D)', abundance: 0.015, stable: true },
                    { a: 3, neutrons: 2, name: 'Tritium (T)', abundance: 0, stable: false, halfLife: '12.3 years' }
                ]
            },
            C: {
                name: 'Carbon',
                symbol: 'C',
                z: 6,
                isotopes: [
                    { a: 12, neutrons: 6, name: 'Carbon-12', abundance: 98.93, stable: true },
                    { a: 13, neutrons: 7, name: 'Carbon-13', abundance: 1.07, stable: true },
                    { a: 14, neutrons: 8, name: 'Carbon-14', abundance: 0, stable: false, halfLife: '5730 years' }
                ]
            },
            Cl: {
                name: 'Chlorine',
                symbol: 'Cl',
                z: 17,
                isotopes: [
                    { a: 35, neutrons: 18, name: 'Chlorine-35', abundance: 75.76, stable: true },
                    { a: 36, neutrons: 19, name: 'Chlorine-36', abundance: 0, stable: false, halfLife: '301,000 years' },
                    { a: 37, neutrons: 20, name: 'Chlorine-37', abundance: 24.24, stable: true }
                ]
            }
        };

        const Icon = ({ name, size = 20, className = "" }) => {
            const [svg, setSvg] = useState('');
            useEffect(() => {
                if (window.lucide) {
                    const iconNode = window.lucide.icons[name];
                    if (iconNode) {
                        const iconSvg = window.lucide.createElement(iconNode);
                        iconSvg.setAttribute('width', size);
                        iconSvg.setAttribute('height', size);
                        iconSvg.setAttribute('class', className);
                        setSvg(iconSvg.outerHTML);
                    }
                }
            }, [name, size, className]);
            return <span dangerouslySetInnerHTML={{ __html: svg }} className="flex items-center" />;
        };

        const App = () => {
            const [selectedElement, setSelectedElement] = useState('H');
            const [neutronCount, setNeutronCount] = useState(0);
            
            // Load initial state when element changes
            useEffect(() => {
                const defaultIso = IsotopeData[selectedElement].isotopes[0];
                setNeutronCount(defaultIso.neutrons);
            }, [selectedElement]);

            const elementData = IsotopeData[selectedElement];
            const protonCount = elementData.z;
            const massNumber = protonCount + neutronCount;
            
            // Find matching real isotope data
            const currentIsotope = elementData.isotopes.find(iso => iso.neutrons === neutronCount);
            
            // Calculate RAM (Relative Atomic Mass) for display
            const calculateRAM = () => {
                let totalAbundance = 0;
                let weightedSum = 0;
                elementData.isotopes.forEach(iso => {
                    if (iso.stable) {
                        weightedSum += iso.a * iso.abundance;
                        totalAbundance += iso.abundance;
                    }
                });
                return totalAbundance > 0 ? (weightedSum / totalAbundance).toFixed(2) : "N/A";
            };

            const ram = calculateRAM();

            // Helper to generate nucleus visualization
            const renderNucleus = () => {
                const particles = [];
                // Pack particles in a spiral/cluster
                // const total = protonCount + neutronCount;
                // const radius = Math.sqrt(total) * 8; 
                
                for (let i = 0; i < protonCount; i++) {
                    const angle = i * 137.5; // Golden angle
                    const r = 6 * Math.sqrt(i);
                    const x = r * Math.cos(angle * Math.PI / 180);
                    const y = r * Math.sin(angle * Math.PI / 180);
                    particles.push(
                        <div key={`p-${i}`} className="nucleon absolute w-6 h-6 bg-red-500 rounded-full shadow-inner border border-red-400 flex items-center justify-center text-[10px] font-bold z-10 text-white"
                             style={{ transform: `translate(${x}px, ${y}px)` }}>
                            +
                        </div>
                    );
                }
                for (let i = 0; i < neutronCount; i++) {
                    const idx = i + protonCount;
                    const angle = idx * 137.5;
                    const r = 6 * Math.sqrt(idx);
                    const x = r * Math.cos(angle * Math.PI / 180);
                    const y = r * Math.sin(angle * Math.PI / 180);
                    particles.push(
                        <div key={`n-${i}`} className="nucleon absolute w-6 h-6 bg-slate-500 rounded-full shadow-inner border border-slate-400 z-0"
                             style={{ transform: `translate(${x}px, ${y}px)` }}>
                        </div>
                    );
                }
                return particles;
            };

            return (
                <div className="flex flex-col h-full container mx-auto px-4 py-6 max-w-6xl">
                    
                    {/* Header */}
                    <div className="flex justify-between items-center mb-6 border-b border-slate-700 pb-4">
                        <div>
                            <h1 className="text-2xl font-bold text-yellow-400 flex items-center gap-2">
                                <Icon name="Atom" /> Isotope Visualizer
                            </h1>
                            <p className="text-slate-400 text-sm">Protons vs Neutrons: Stability & Mass</p>
                        </div>
                        
                        <div className="flex gap-2">
                            {Object.keys(IsotopeData).map(symbol => (
                                <button
                                    key={symbol}
                                    onClick={() => setSelectedElement(symbol)}
                                    className={`w-10 h-10 rounded-lg font-bold transition-all border
                                        ${selectedElement === symbol 
                                            ? 'bg-yellow-600 text-white border-yellow-400 shadow-[0_0_10px_orange]' 
                                            : 'bg-slate-800 text-slate-400 border-slate-700 hover:bg-slate-700'}
                                    `}
                                >
                                    {symbol}
                                </button>
                            ))}
                        </div>
                    </div>

                    <div className="flex flex-col lg:flex-row gap-8 flex-grow">
                        
                        {/* Left: Visualizer */}
                        <div className="w-full lg:w-2/3 bg-slate-900 rounded-3xl border-4 border-slate-800 relative flex flex-col items-center min-h-[500px] shadow-2xl overflow-hidden p-8">
                            
                            {/* Background Grid */}
                            <div className="absolute inset-0 opacity-10" style={{backgroundImage: 'radial-gradient(#facc15 1px, transparent 1px)', backgroundSize: '30px 30px'}}></div>

                            {/* Info Overlay */}
                            <div className="absolute top-6 left-6 z-20">
                                <div className="text-xs text-slate-400 uppercase font-bold mb-1">Atomic Symbol</div>
                                <div className="flex items-center gap-4 bg-slate-950/80 p-3 rounded-xl border border-slate-700 backdrop-blur-sm shadow-lg">
                                    <div className="text-center font-serif leading-none">
                                        <div className="text-green-400 text-lg font-bold">{massNumber}</div>
                                        <div className="text-red-400 text-lg font-bold">{protonCount}</div>
                                    </div>
                                    <div className="text-6xl font-bold text-white">{elementData.symbol}</div>
                                </div>
                            </div>

                            {/* Stability Status */}
                            <div className="absolute top-6 right-6 z-20">
                                {currentIsotope ? (
                                    <div className={`px-4 py-2 rounded-lg border flex items-center gap-2 font-bold backdrop-blur-sm shadow-lg
                                        ${currentIsotope.stable 
                                            ? 'bg-green-900/40 border-green-500 text-green-300' 
                                            : 'bg-yellow-900/40 border-yellow-500 text-yellow-300 radioactive'}
                                    `}>
                                        <Icon name={currentIsotope.stable ? "ShieldCheck" : "Radiation"} size={18}/>
                                        {currentIsotope.stable ? 'Stable' : 'Unstable'}
                                    </div>
                                ) : (
                                    <div className="px-4 py-2 rounded-lg border border-slate-500 bg-slate-800/50 text-slate-400 flex items-center gap-2 font-bold">
                                        <Icon name="HelpCircle" size={18}/> Theoretical
                                    </div>
                                )}
                            </div>

                            {/* Nucleus Area */}
                            <div className="flex-grow flex items-center justify-center w-full relative z-10">
                                <div className="relative">
                                    {renderNucleus()}
                                    {/* Electron Cloud Hint */}
                                    <div className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[300px] h-[300px] border border-slate-600/30 rounded-full animate-pulse pointer-events-none"></div>
                                    <div className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[450px] h-[450px] border border-slate-600/20 rounded-full pointer-events-none"></div>
                                </div>
                            </div>

                            {/* Legend */}
                            <div className="absolute bottom-4 w-full flex justify-center gap-6">
                                <div className="flex items-center gap-2 bg-slate-900/80 px-3 py-1 rounded-full border border-slate-700">
                                    <div className="w-4 h-4 bg-red-500 rounded-full border border-red-300 shadow-sm"></div>
                                    <span className="text-xs text-slate-300 font-bold">Proton (+)</span>
                                </div>
                                <div className="flex items-center gap-2 bg-slate-900/80 px-3 py-1 rounded-full border border-slate-700">
                                    <div className="w-4 h-4 bg-slate-500 rounded-full border border-slate-400 shadow-sm"></div>
                                    <span className="text-xs text-slate-300 font-bold">Neutron (0)</span>
                                </div>
                            </div>

                        </div>

                        {/* Right: Controls & Data */}
                        <div className="w-full lg:w-1/3 flex flex-col gap-6">
                            
                            {/* Controls */}
                            <div className="bg-slate-900 p-6 rounded-2xl border border-slate-800 shadow-lg">
                                <h3 className="text-lg font-bold mb-4 text-white flex items-center gap-2">
                                    <Icon name="Sliders" /> Nucleon Control
                                </h3>
                                
                                {/* Protons (Fixed for Element) */}
                                <div className="mb-6 opacity-70">
                                    <div className="flex justify-between text-sm mb-2">
                                        <span className="text-red-400 font-bold">Protons (Z)</span>
                                        <span className="text-white font-mono font-bold">{protonCount}</span>
                                    </div>
                                    <div className="w-full bg-slate-800 h-3 rounded-full overflow-hidden border border-slate-700">
                                        <div className="h-full bg-red-500" style={{width: '100%'}}></div>
                                    </div>
                                    <p className="text-xs text-slate-500 mt-1">Fixed for {elementData.name}. Changing protons changes the element!</p>
                                </div>

                                {/* Neutrons (Adjustable) */}
                                <div>
                                    <div className="flex justify-between text-sm mb-2">
                                        <span className="text-slate-300 font-bold">Neutrons (N)</span>
                                        <span className="text-white font-mono text-xl font-bold">{neutronCount}</span>
                                    </div>
                                    <div className="flex items-center gap-4">
                                        <button 
                                            onClick={() => setNeutronCount(p => Math.max(0, p - 1))}
                                            className="w-10 h-10 rounded-lg bg-slate-700 hover:bg-slate-600 text-white font-bold transition-colors shadow-md active:scale-95"
                                        >-</button>
                                        <input 
                                            type="range" 
                                            min="0" 
                                            max={protonCount * 2 + 2} 
                                            value={neutronCount} 
                                            onChange={(e) => setNeutronCount(parseInt(e.target.value))}
                                            className="flex-grow h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-slate-400"
                                        />
                                        <button 
                                            onClick={() => setNeutronCount(p => p + 1)}
                                            className="w-10 h-10 rounded-lg bg-slate-700 hover:bg-slate-600 text-white font-bold transition-colors shadow-md active:scale-95"
                                        >+</button>
                                    </div>
                                </div>
                            </div>

                            {/* Isotope Details */}
                            <div className="bg-slate-900 p-6 rounded-2xl border border-slate-800 shadow-lg flex-grow">
                                <h3 className="text-lg font-bold mb-4 text-white flex items-center gap-2">
                                    <Icon name="Database" /> Isotope Data
                                </h3>
                                
                                {currentIsotope ? (
                                    <div className="space-y-4 animate-in fade-in slide-in-from-bottom-2">
                                        <div className="bg-slate-950 p-4 rounded-xl border border-slate-700">
                                            <div className="text-slate-400 text-xs uppercase font-bold mb-1">Isotope Name</div>
                                            <div className="text-2xl font-bold text-green-400">{currentIsotope.name}</div>
                                        </div>

                                        <div className="grid grid-cols-2 gap-3">
                                            <div className="bg-slate-950 p-3 rounded-lg border border-slate-700">
                                                <div className="text-slate-400 text-xs font-bold uppercase">Abundance</div>
                                                <div className="text-lg font-mono text-white">
                                                    {currentIsotope.abundance > 0 ? `${currentIsotope.abundance}%` : 'Trace'}
                                                </div>
                                            </div>
                                            <div className="bg-slate-950 p-3 rounded-lg border border-slate-700">
                                                <div className="text-slate-400 text-xs font-bold uppercase">Mass No. (A)</div>
                                                <div className="text-lg font-mono text-white">{massNumber}</div>
                                            </div>
                                        </div>

                                        {!currentIsotope.stable && (
                                            <div className="bg-yellow-900/20 p-3 rounded-lg border border-yellow-700/50 text-yellow-200 text-xs">
                                                <span className="font-bold block mb-1 flex items-center gap-2"><Icon name="Radio" size={14}/> Radioactive</span>
                                                Half-life: {currentIsotope.halfLife}
                                            </div>
                                        )}
                                    </div>
                                ) : (
                                    <div className="text-center py-8 text-slate-500 italic border-2 border-dashed border-slate-700 rounded-xl bg-slate-950/30">
                                        This isotope is theoretical or extremely rare in nature.
                                    </div>
                                )}

                                {/* RAM Explanation */}
                                <div className="mt-6 pt-4 border-t border-slate-700">
                                    <div className="flex items-center justify-between mb-2">
                                        <span className="text-xs font-bold text-slate-400 uppercase">Relative Atomic Mass (Aáµ£)</span>
                                        <span className="text-xl font-mono font-bold text-blue-400">{ram}</span>
                                    </div>
                                    <p className="text-xs text-slate-500 leading-relaxed">
                                        This is the <strong>weighted average</strong> of the masses of all naturally occurring isotopes of {elementData.name}.
                                    </p>
                                </div>
                            </div>

                        </div>
                    </div>
                    
                    <div className="text-center text-slate-600 text-xs mt-8 border-t border-slate-800 pt-4">
                        Luminous Learner International | IB/A-Level Chemistry
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
