<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Laboratory Safety Hazard Symbol Quiz</title>
    
    <!-- React & Tailwind -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #0F172A; color: #e2e8f0; margin: 0; overflow: hidden; }
        .font-mono { font-family: 'JetBrains Mono', monospace; }
        
        /* Custom Animations */
        .fade-in { animation: fadeIn 0.4s ease-out; }
        .slide-up { animation: slideUp 0.4s ease-out; }
        .shake { animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both; }
        
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        @keyframes shake { 
            10%, 90% { transform: translate3d(-1px, 0, 0); } 
            20%, 80% { transform: translate3d(2px, 0, 0); } 
            30%, 50%, 70% { transform: translate3d(-4px, 0, 0); } 
            40%, 60% { transform: translate3d(4px, 0, 0); } 
        }

        /* Hazard Symbol Style */
        .hazard-box {
            width: 120px; height: 120px;
            transform: rotate(45deg);
            display: flex; justify-content: center; align-items: center;
            border: 4px solid #ef4444; /* Red Border */
            background: white;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
            margin: 20px auto;
        }
        .hazard-icon {
            transform: rotate(-45deg);
            color: black;
        }
        
        /* GHS style: Diamond shape with red border */
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        const Icon = ({ name, className = "", size = 20 }) => {
            const [svgHtml, setSvgHtml] = useState('');
            useEffect(() => {
                if (window.lucide && window.lucide.icons) {
                    const pascalName = name.split('-').map(part => part.charAt(0).toUpperCase() + part.slice(1)).join('');
                    const iconData = window.lucide.icons[pascalName];
                    if (iconData && typeof window.lucide.createElement === 'function') {
                        const svgElement = window.lucide.createElement(iconData);
                        svgElement.setAttribute('class', className);
                        svgElement.setAttribute('width', size);
                        svgElement.setAttribute('height', size);
                        setSvgHtml(svgElement.outerHTML);
                    }
                }
            }, [name, className, size]);
            if (!svgHtml) return <span className={className} style={{ width: size, height: size, display: 'inline-block' }}></span>;
            return <span dangerouslySetInnerHTML={{ __html: svgHtml }} className="flex items-center justify-center" />;
        };

        // --- DATA: Hazard Symbols (Translated) ---
        const HAZARDS = [
            {
                id: 'flammable',
                name: 'Flammable',
                icon: 'flame', 
                desc: 'Substances that can catch fire easily. Keep away from open flames and heat sources.',
                example: 'Ethanol, Acetone'
            },
            {
                id: 'oxidizing',
                name: 'Oxidizing',
                icon: 'flame-kindling', // Used as fallback if custom fails, but we will enable custom
                isCustom: true, // Enable the SVG defined in CustomSymbol
                desc: 'Provides oxygen to make other substances burn more fiercely.',
                example: 'KMnO₄, Concentrated HNO₃'
            },
            {
                id: 'corrosive',
                name: 'Corrosive',
                icon: 'test-tube-2', 
                isCustom: true,
                desc: 'Can burn skin and eyes, and attack metals.',
                example: 'Conc. H₂SO₄, NaOH'
            },
            {
                id: 'toxic',
                name: 'Toxic / Poison',
                icon: 'skull',
                desc: 'Can cause death or serious injury if swallowed, inhaled, or absorbed through skin.',
                example: 'Mercury, Cyanide'
            },
            {
                id: 'irritant',
                name: 'Harmful / Irritant',
                icon: 'alert-circle', // Exclamation mark
                desc: 'May cause irritation to skin, eyes, or respiratory system. Less severe than toxic.',
                example: 'Dilute acids, Iodine'
            },
            {
                id: 'explosive',
                name: 'Explosive',
                icon: 'bomb',
                desc: 'Substances that may explode under effect of heat or shock.',
                example: 'TNT, Azides'
            },
            {
                id: 'health',
                name: 'Health Hazard',
                icon: 'heart-pulse', // Approximation
                desc: 'Carcinogenic, mutagenic, reproductive toxicity, or respiratory sensitizer.',
                example: 'Benzene, Asbestos'
            },
            {
                id: 'environment',
                name: 'Environmental Hazard',
                icon: 'tree-deciduous',
                isCustom: true, // Enable the SVG defined in CustomSymbol
                desc: 'Toxic to aquatic life with long lasting effects.',
                example: 'Heavy metal salts, Pesticides'
            }
        ];

        // Custom SVG components for specific GHS symbols not in Lucide
        const CustomSymbol = ({ id, className }) => {
            if (id === 'corrosive') {
                // Hand and metal corrosion
                return (
                    <svg viewBox="0 0 24 24" width="48" height="48" fill="none" stroke="black" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                        <path d="M4 20h16M4 16h16M5 12l3 4M19 12l-3 4" />
                        <path d="M9 4v6m6-6v6" />
                        <path d="M7 4h10" />
                    </svg>
                );
            }
            if (id === 'environment') {
                // Dead fish and tree
                return (
                    <svg viewBox="0 0 24 24" width="48" height="48" fill="none" stroke="black" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                        <path d="M12 3v10m-4-4l4-4 4 4" />
                        <path d="M4 20h16" />
                        <path d="M16 14l3 3-3 3" />
                    </svg>
                );
            }
             if (id === 'oxidizing') {
                // Circle on flame
                return (
                    <svg viewBox="0 0 24 24" width="48" height="48" fill="none" stroke="black" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                        <circle cx="12" cy="15" r="5" />
                        <path d="M12 2v8" />
                        <path d="M8 6l4 4M16 6l-4 4" />
                    </svg>
                );
            }
            // Fallbacks
            return <Icon name="alert-triangle" size={48} className={`text-black ${className}`} />;
        };

        const App = () => {
            const [mode, setMode] = useState('menu'); // menu, quiz, learn
            const [currentQ, setCurrentQ] = useState(null);
            const [options, setOptions] = useState([]);
            const [score, setScore] = useState(0);
            const [streak, setStreak] = useState(0);
            const [feedback, setFeedback] = useState(null); // null, correct, wrong
            const [selectedOption, setSelectedOption] = useState(null); // Add selected option state

            const startQuiz = () => {
                setScore(0);
                setStreak(0);
                nextQuestion();
                setMode('quiz');
            };

            const nextQuestion = () => {
                setFeedback(null);
                setSelectedOption(null); // Reset selected option
                
                // Pick random hazard
                const target = HAZARDS[Math.floor(Math.random() * HAZARDS.length)];
                
                // Pick 3 distractors
                const others = HAZARDS.filter(h => h.id !== target.id);
                const distractors = others.sort(() => 0.5 - Math.random()).slice(0, 3);
                
                const opts = [target, ...distractors].sort(() => 0.5 - Math.random());
                
                setCurrentQ(target);
                setOptions(opts);
            };

            const handleAnswer = (selected) => {
                if (feedback) return;
                setSelectedOption(selected.id); // Set selected option

                if (selected.id === currentQ.id) {
                    setScore(s => s + 10 + (streak * 2));
                    setStreak(s => s + 1);
                    setFeedback({ status: 'correct', msg: 'Correct! ' + currentQ.desc });
                } else {
                    setStreak(0);
                    setFeedback({ status: 'wrong', msg: `Oops! That symbol means ${currentQ.name}.` });
                }
            };

            // --- VIEWS ---

            if (mode === 'menu') {
                return (
                    <div className="min-h-screen bg-[#0F172A] flex flex-col items-center justify-center p-6 text-center text-white">
                        <div className="mb-8 animate-in">
                            <div className="flex justify-center gap-4 mb-6">
                                <div className="hazard-box scale-75">
                                    <Icon name="skull" size={48} className="hazard-icon" />
                                </div>
                                <div className="hazard-box scale-75">
                                    <Icon name="flame" size={48} className="hazard-icon" />
                                </div>
                            </div>
                            <h1 className="text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-red-500 mb-2">
                                Hazard Quiz
                            </h1>
                            <p className="text-slate-400">Master the GHS Safety Symbols</p>
                        </div>
                        
                        <div className="space-y-4 w-full max-w-xs">
                            <button onClick={startQuiz} className="w-full py-4 bg-red-600 hover:bg-red-500 rounded-xl font-bold shadow-lg transition-all hover:scale-105 flex items-center justify-center gap-2">
                                <Icon name="play-circle" /> Start Quiz
                            </button>
                            <button onClick={() => setMode('learn')} className="w-full py-4 bg-slate-800 hover:bg-slate-700 rounded-xl font-bold border border-slate-600 transition-all flex items-center justify-center gap-2">
                                <Icon name="book-open" /> Study Guide
                            </button>
                        </div>
                    </div>
                );
            }

            if (mode === 'learn') {
                return (
                    <div className="min-h-screen bg-[#0F172A] text-white p-6 overflow-y-auto">
                        <div className="max-w-4xl mx-auto">
                            <button onClick={() => setMode('menu')} className="mb-6 text-slate-400 hover:text-white flex items-center gap-2">
                                <Icon name="arrow-left" /> Back to Menu
                            </button>
                            <h2 className="text-2xl font-bold mb-6 flex items-center gap-2">
                                <Icon name="book" className="text-yellow-400" /> Hazard Symbols Guide
                            </h2>
                            
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                {HAZARDS.map(h => (
                                    <div key={h.id} className="bg-slate-800 rounded-xl border border-slate-700 p-6 flex items-start gap-6">
                                        <div className="hazard-box shrink-0 scale-75 -ml-2 -mt-2">
                                            {h.isCustom ? <CustomSymbol id={h.id} className="hazard-icon" /> : <Icon name={h.icon} size={48} className="hazard-icon" />}
                                        </div>
                                        <div>
                                            <h3 className="text-lg font-bold text-white mb-1">{h.name}</h3>
                                            <p className="text-sm text-slate-300 mb-2">{h.desc}</p>
                                            <div className="text-xs font-mono text-slate-500 bg-slate-900 px-2 py-1 rounded inline-block">
                                                Ex: {h.example}
                                            </div>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>
                );
            }

            // QUIZ MODE
            if (!currentQ) {
                return (
                    <div className="min-h-screen bg-[#0F172A] flex items-center justify-center text-white">
                        <Icon name="loader-2" className="animate-spin w-8 h-8" />
                    </div>
                );
            }

            return (
                <div className="min-h-screen bg-[#0F172A] text-white flex flex-col items-center p-4 md:p-8">
                    
                    {/* Header */}
                    <div className="w-full max-w-2xl flex justify-between items-center mb-8">
                        <button onClick={() => setMode('menu')} className="p-2 bg-slate-800 rounded-lg hover:bg-slate-700 text-slate-400">
                            <Icon name="x" />
                        </button>
                        <div className="flex items-center gap-4">
                             {streak > 1 && (
                                <div className="flex items-center gap-1 text-orange-400 font-bold animate-pulse">
                                    <Icon name="flame" className="w-5 h-5 fill-current"/> {streak}
                                </div>
                             )}
                             <div className="bg-slate-900 px-4 py-1.5 rounded-lg border border-slate-700 font-mono text-emerald-400 font-bold">
                                {score} pts
                             </div>
                        </div>
                    </div>

                    {/* Question Card - Key forces re-render on new question */}
                    <div key={currentQ.id} className="w-full max-w-md bg-slate-800 rounded-3xl border border-slate-700 p-8 text-center shadow-2xl mb-6 slide-up">
                        <div className="text-xs font-bold text-slate-500 uppercase tracking-widest mb-6">Identify this Symbol</div>
                        
                        <div className="flex justify-center mb-8">
                            <div className="hazard-box scale-125 transition-transform hover:scale-150">
                                {currentQ.isCustom ? <CustomSymbol id={currentQ.id} className="hazard-icon" /> : <Icon name={currentQ.icon} size={48} className="hazard-icon" />}
                            </div>
                        </div>
                    </div>

                    {/* Options */}
                    <div className="w-full max-w-md grid grid-cols-1 gap-3 slide-up" style={{animationDelay: '0.1s'}}>
                        {options.map((opt, i) => {
                            let btnClass = "p-4 rounded-xl font-bold text-left border-2 transition-all flex items-center justify-between ";
                            
                            if (feedback) {
                                if (opt.id === currentQ.id) {
                                    btnClass += "bg-emerald-600 border-emerald-500 text-white shadow-lg";
                                } else if (feedback.status === 'wrong' && opt.id === selectedOption) {
                                    btnClass += "bg-red-900/20 border-red-500 text-red-400 opacity-100"; // Highlight wrong choice
                                } else {
                                    btnClass += "bg-slate-800 border-slate-700 text-slate-500 opacity-50";
                                }
                            } else {
                                btnClass += "bg-slate-800 border-slate-700 text-slate-200 hover:border-blue-400 hover:bg-slate-750 cursor-pointer";
                            }

                            return (
                                <button 
                                    key={i} 
                                    onClick={() => handleAnswer(opt)}
                                    disabled={!!feedback}
                                    className={btnClass}
                                >
                                    <span>{opt.name}</span>
                                    {feedback && opt.id === currentQ.id && <Icon name="check-circle" className="text-white" />}
                                    {feedback && feedback.status === 'wrong' && opt.id === selectedOption && <Icon name="x-circle" className="text-red-400" />}
                                </button>
                            );
                        })}
                    </div>

                    {/* Feedback */}
                    {feedback && (
                        <div className={`w-full max-w-md mt-6 p-4 rounded-2xl border flex items-center gap-4 animate-in shadow-lg ${feedback.status === 'correct' ? 'bg-emerald-900/40 border-emerald-500/50' : 'bg-red-900/40 border-red-500/50'}`}>
                            <div className={`p-3 rounded-full shrink-0 ${feedback.status === 'correct' ? 'bg-emerald-500 text-white' : 'bg-red-500 text-white'}`}>
                                <Icon name={feedback.status === 'correct' ? "check" : "x"} className="w-6 h-6" />
                            </div>
                            <div className="flex-1">
                                <h3 className={`font-bold ${feedback.status === 'correct' ? 'text-emerald-400' : 'text-red-400'}`}>
                                    {feedback.status === 'correct' ? "Well done!" : "Not quite..."}
                                </h3>
                                <p className="text-slate-300 text-sm mt-1 leading-tight">{feedback.msg}</p>
                            </div>
                            <button onClick={nextQuestion} className="px-6 py-3 bg-white text-slate-900 font-bold rounded-xl hover:bg-slate-100 transition-colors shadow-md">
                                Next
                            </button>
                        </div>
                    )}

                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
