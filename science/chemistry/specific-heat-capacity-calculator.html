<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Specific Heat Capacity Calculator - LuminousLearner International</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=JetBrains+Mono:wght@400;700&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #0F172A; color: #e2e8f0; }
        .font-mono { font-family: 'JetBrains Mono', monospace; }
        
        /* Heat Animation */
        @keyframes heat-wave {
            0% { transform: translateY(0) scale(1); opacity: 0.6; }
            50% { opacity: 0.3; }
            100% { transform: translateY(-20px) scale(1.2); opacity: 0; }
        }
        .heat-wave {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 20px;
            background: linear-gradient(to top, rgba(239, 68, 68, 0.5), transparent);
            animation: heat-wave 1s infinite linear;
        }

        /* Thermometer Liquid */
        .thermometer-liquid {
            transition: height 1s ease-out, background-color 1s ease;
        }

        /* Custom Button Hover (Dark Mode) */
        .material-btn {
            transition: all 0.2s;
            background-color: #1f2937; 
            border-color: #374151;
        }
        .material-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3);
            background-color: #374151;
        }
        .material-btn.selected {
             border-color: #f472b6 !important;
             background-color: #831843 !important; /* Rose 900 for selection */
             color: #fecdd3;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col bg-[#0F172A] text-white">

    <div id="root" class="flex-grow flex flex-col"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const Icon = ({ name, size = 20, className = "" }) => {
            const [svg, setSvg] = useState('');
            useEffect(() => {
                if (window.lucide && window.lucide.icons[name]) {
                    const iconNode = window.lucide.icons[name];
                    const iconSvg = window.lucide.createElement(iconNode);
                    iconSvg.setAttribute('width', size);
                    iconSvg.setAttribute('height', size);
                    iconSvg.setAttribute('class', className);
                    setSvg(iconSvg.outerHTML);
                }
            }, [name, size, className]);
            return <span dangerouslySetInnerHTML={{ __html: svg }} className="flex items-center" />;
        };

        // Specific Heat Capacities (J g^-1 K^-1)
        const Materials = [
            { name: 'Water', c: 4.18, color: 'bg-blue-400/50', type: 'liquid', icon: 'üíß', unit: 'J g‚Åª¬π K‚Åª¬π' },
            { name: 'Ethanol', c: 2.44, color: 'bg-yellow-400/30', type: 'liquid', icon: 'üß™', unit: 'J g‚Åª¬π K‚Åª¬π' },
            { name: 'Aluminium', c: 0.90, color: 'bg-gray-400', type: 'solid', icon: '‚ö™', unit: 'J g‚Åª¬π K‚Åª¬π' },
            { name: 'Iron', c: 0.45, color: 'bg-gray-600', type: 'solid', icon: 'üî©', unit: 'J g‚Åª¬π K‚Åª¬π' },
            { name: 'Copper', c: 0.39, color: 'bg-orange-600', type: 'solid', icon: 'üü§', unit: 'J g‚Åª¬π K‚Åª¬π' },
            { name: 'Lead', c: 0.13, color: 'bg-slate-700', type: 'solid', icon: '‚¨õ', unit: 'J g‚Åª¬π K‚Åª¬π' }
        ];

        const App = () => {
            // State
            const [target, setTarget] = useState('Q'); // Q, m, c, dt
            
            const [Q, setQ] = useState('');
            const [m, setM] = useState('');
            const [c, setC] = useState(Materials[0].c); // Default to Water's C
            const [dt, setDt] = useState('');
            const [t1, setT1] = useState(''); // Initial Temp
            const [t2, setT2] = useState(''); // Final Temp

            const [result, setResult] = useState(null);
            const [error, setError] = useState('');
            const [isHeating, setIsHeating] = useState(false);
            const [materialColor, setMaterialColor] = useState(Materials[0].color);
            const [materialName, setMaterialName] = useState(Materials[0].name);

            // Handle Preset Selection
            const handleMaterialSelect = (mat) => {
                setC(mat.c);
                setMaterialColor(mat.color);
                setMaterialName(mat.name);
                setResult(null);
            };

            // Auto-calculate Delta T
            useEffect(() => {
                if (t1 !== '' && t2 !== '') {
                    setDt((parseFloat(t2) - parseFloat(t1)).toFixed(1));
                }
            }, [t1, t2]);

            // Main Calculation
            const calculate = () => {
                setError('');
                setResult(null);
                setIsHeating(false);

                const valQ = parseFloat(Q);
                const valM = parseFloat(m);
                const valC = parseFloat(c);
                const valDt = parseFloat(dt);

                let res = 0;
                let formulaStr = '';
                let resultUnit = '';

                try {
                    if (target === 'Q') {
                        if (!m || !c || !dt) throw new Error('Enter Mass (m), C (c), and Temp Change (ŒîT)');
                        res = valM * valC * valDt;
                        formulaStr = `Q = ${valM} √ó ${valC} √ó ${valDt}`;
                        resultUnit = 'J';
                    } else if (target === 'm') {
                        if (!Q || !c || !dt) throw new Error('Enter Energy (Q), C (c), and Temp Change (ŒîT)');
                        res = valQ / (valC * valDt);
                        formulaStr = `m = ${valQ} √∑ (${valC} √ó ${valDt})`;
                        resultUnit = 'g';
                    } else if (target === 'c') {
                        if (!Q || !m || !dt) throw new Error('Enter Energy (Q), Mass (m), and Temp Change (ŒîT)');
                        res = valQ / (valM * valDt);
                        formulaStr = `c = ${valQ} √∑ (${valM} √ó ${valDt})`;
                        resultUnit = 'J g‚Åª¬π K‚Åª¬π';
                    } else if (target === 'dt') {
                        if (!Q || !m || !c) throw new Error('Enter Energy (Q), Mass (m), and C (c)');
                        res = valQ / (valM * valC);
                        formulaStr = `ŒîT = ${valQ} √∑ (${valM} √ó ${valC})`;
                        resultUnit = '¬∞C / K';
                    }

                    if (!isFinite(res) || isNaN(res) || res < 0) {
                        if (target !== 'Q' || res < 0) throw new Error('Invalid calculation or negative result.');
                    }

                    setIsHeating(true);
                    setTimeout(() => {
                        setResult({ value: res, formula: formulaStr, unit: resultUnit });
                        setIsHeating(false);
                    }, 1000); // Animation delay

                } catch (e) {
                    setError(e.message);
                }
            };

            const reset = () => {
                setQ(''); setM(''); setC(Materials[0].c); setDt('');
                setT1(''); setT2('');
                setResult(null); setError('');
                setIsHeating(false);
                setMaterialColor(Materials[0].color);
                setMaterialName(Materials[0].name);
            };

            // Visual Helpers
            const getTempColor = (tempHeight) => {
                // Map height (0-100) to color (Blue to Red/Orange)
                if (tempHeight < 20) return '#60a5fa'; // Blue (Cold)
                if (tempHeight > 80) return '#ef4444'; // Red (Hot)
                return '#f97316'; // Orange (Medium)
            };
            
            const tempHeight = () => {
                let tempVal = 25;
                
                if (t2) {
                    tempVal = parseFloat(t2);
                } else if (dt) {
                    tempVal = (parseFloat(t1)||25) + parseFloat(dt);
                }
                
                // If solving for dT, show final state based on result
                if (target === 'dt' && result) {
                    tempVal = 25 + result.value;
                }
                
                // Map -10~110 to 0~100%
                return Math.min(100, Math.max(0, (tempVal + 10) / 120 * 100));
            };

            const isDisabled = (field) => target === field;

            return (
                <div className="flex flex-col h-full container mx-auto px-4 py-6 max-w-6xl">
                    
                    {/* Header */}
                    <div className="flex justify-between items-center mb-6 border-b border-slate-800 pb-4">
                        <div>
                            <h1 className="text-2xl font-bold text-rose-400 flex items-center gap-2">
                                <Icon name="Thermometer" className="text-rose-400"/> Specific Heat Capacity Calculator
                            </h1>
                            <p className="text-slate-500 text-sm">Solve Q = mcŒîT</p>
                        </div>
                        <button onClick={reset} className="px-4 py-2 bg-slate-800 text-slate-400 rounded-lg hover:bg-slate-700 hover:text-white font-bold text-sm flex items-center gap-2 transition-colors border border-slate-700">
                            <Icon name="RotateCcw" size={16}> </Icon> Reset
                        </button>
                    </div>

                    <div className="flex flex-col lg:flex-row gap-8 flex-grow">
                        
                        {/* Left: Controls */}
                        <div className="w-full lg:w-5/12 flex flex-col gap-6">
                            
                            {/* Target Selection */}
                            <div className="bg-slate-900 p-4 rounded-2xl border border-slate-800 shadow-xl">
                                <label className="text-xs font-bold text-slate-400 uppercase mb-2 block">Select Variable to Solve For</label>
                                <div className="grid grid-cols-4 gap-2">
                                    {['Q', 'm', 'c', 'dt'].map(t => (
                                        <button
                                            key={t}
                                            onClick={() => { setTarget(t); setResult(null); }}
                                            className={`py-2 rounded-lg font-bold text-sm border-2 transition-all border-slate-700
                                                ${target === t ? 'border-rose-500 bg-rose-900/30 text-rose-400' : 'text-slate-400 hover:border-rose-300'}
                                            `}
                                        >
                                            {t === 'dt' ? 'ŒîT' : t}
                                        </button>
                                    ))}
                                </div>
                            </div>

                            {/* Input Form */}
                            <div className="bg-slate-900 p-6 rounded-2xl shadow-xl border border-rose-900/30 flex flex-col gap-4">
                                
                                {/* Q Input */}
                                <div className={`relative group ${isDisabled('Q') ? 'opacity-50 pointer-events-none' : ''}`}>
                                    <label className="text-xs font-bold text-rose-400 uppercase mb-1 flex justify-between">
                                        <span>Energy (Q)</span>
                                        <span>Joules (J)</span>
                                    </label>
                                    <input type="number" value={Q} onChange={(e) => setQ(e.target.value)} 
                                        className="w-full p-3 rounded-xl border border-slate-700 font-mono font-bold text-white bg-slate-800 focus:ring-2 focus:ring-rose-300 outline-none" placeholder={isDisabled('Q') ? '?' : 'e.g. 4200'} />
                                </div>

                                {/* Mass Input */}
                                <div className={`relative group ${isDisabled('m') ? 'opacity-50 pointer-events-none' : ''}`}>
                                    <label className="text-xs font-bold text-blue-400 uppercase mb-1 flex justify-between">
                                        <span>Mass (m)</span>
                                        <span>grams (g)</span>
                                    </label>
                                    <input type="number" value={m} onChange={(e) => setM(e.target.value)} 
                                        className="w-full p-3 rounded-xl border border-slate-700 font-mono font-bold text-white bg-slate-800 focus:ring-2 focus:ring-blue-300 outline-none" placeholder={isDisabled('m') ? '?' : 'e.g. 100'} />
                                </div>

                                {/* c Input & Presets */}
                                <div className={`relative group ${isDisabled('c') ? 'opacity-50' : ''}`}>
                                    <div className="flex justify-between items-center mb-2">
                                        <label className="text-xs font-bold text-emerald-400 uppercase">Specific Heat (c)</label>
                                        <span className="text-[10px] text-slate-400">J g‚Åª¬π K‚Åª¬π</span>
                                    </div>
                                    
                                    <div className="grid grid-cols-3 gap-2 mb-3">
                                        {Materials.map(mat => (
                                            <button 
                                                key={mat.name} 
                                                onClick={() => handleMaterialSelect(mat)}
                                                disabled={isDisabled('c')}
                                                className={`material-btn flex flex-col items-center justify-center py-2 px-1 border border-slate-700 rounded-xl transition-all ${mat.name === materialName && !isDisabled('c') ? 'selected' : 'hover:bg-slate-700'}`}
                                            >
                                                <span className="text-lg">{mat.icon}</span>
                                                <span className="text-[10px] font-bold mt-0.5 text-slate-300">{mat.name}</span>
                                                <span className="text-[9px] font-mono text-slate-500">{mat.c}</span>
                                            </button>
                                        ))}
                                    </div>

                                    <input type="number" value={c} onChange={(e) => setC(e.target.value)} 
                                        className="w-full p-3 rounded-xl border border-slate-700 font-mono font-bold text-white bg-slate-800 focus:ring-2 focus:ring-emerald-300 outline-none" placeholder={isDisabled('c') ? '?' : 'e.g. 4.18'} disabled={isDisabled('c')} />
                                </div>

                                {/* Delta T Input */}
                                <div className={`relative group ${isDisabled('dt') ? 'opacity-50' : ''}`}>
                                    <label className="text-xs font-bold text-amber-400 uppercase mb-1 flex justify-between">
                                        <span>Temp Change (ŒîT)</span>
                                        <span>¬∞C or K</span>
                                    </label>
                                    
                                    {!isDisabled('dt') && (
                                        <div className="flex gap-2 mb-2">
                                            <input type="number" value={t1} onChange={(e) => setT1(e.target.value)} className="w-1/2 p-2 rounded border text-sm text-white bg-slate-800 border-slate-700 focus:ring-2 focus:ring-amber-300 outline-none" placeholder="T1 (Initial)" />
                                            <input type="number" value={t2} onChange={(e) => setT2(e.target.value)} className="w-1/2 p-2 rounded border text-sm text-white bg-slate-800 border-slate-700 focus:ring-2 focus:ring-amber-300 outline-none" placeholder="T2 (Final)" />
                                        </div>
                                    )}

                                    <input type="number" value={dt} onChange={(e) => { setDt(e.target.value); setT1(''); setT2(''); }} 
                                        className="w-full p-3 rounded-xl border border-slate-700 font-mono font-bold text-white bg-slate-800 focus:ring-2 focus:ring-amber-300 outline-none" placeholder={isDisabled('dt') ? '?' : 'Or enter ŒîT directly'} disabled={isDisabled('dt')} />
                                </div>

                                {error && (
                                    <div className="p-3 bg-red-900/30 text-red-400 text-sm font-bold rounded-lg flex items-center gap-2 animate-pulse border border-red-800/50">
                                        <Icon name="AlertCircle" size={16}/> {error}
                                    </div>
                                )}

                                <button onClick={calculate} disabled={isHeating} className="w-full py-4 bg-rose-600 text-white rounded-xl font-bold shadow-lg hover:bg-rose-500 transition-all active:scale-95 text-lg flex items-center justify-center gap-2 disabled:bg-rose-900/50">
                                    {isHeating ? <Icon name="Loader2" className="animate-spin" /> : <Icon name="Calculator" />}
                                    Calculate Result
                                </button>
                            </div>
                        </div>

                        {/* Right: Visualization & Result */}
                        <div className="w-full lg:w-7/12 flex flex-col gap-6">
                            
                            {/* Visualization */}
                            <div className="bg-slate-900 p-8 rounded-3xl shadow-xl border border-slate-800 flex items-center justify-center min-h-[350px] relative overflow-hidden">
                                
                                {/* Heater Base */}
                                <div className="absolute bottom-10 w-40 h-6 bg-slate-700 rounded-sm flex justify-center items-center z-10">
                                    <div className="text-[10px] text-slate-400 uppercase font-bold tracking-widest">Heater</div>
                                </div>
                                {/* Heat Waves */}
                                {(isHeating || result) && (
                                    <div className="absolute bottom-16 w-40 h-20 flex justify-center gap-4 overflow-hidden pointer-events-none z-0">
                                        <div className="heat-wave" style={{left: '20%', animationDelay: '0s'}}></div>
                                        <div className="heat-wave" style={{left: '50%', animationDelay: '0.3s'}}></div>
                                        <div className="heat-wave" style={{left: '80%', animationDelay: '0.6s'}}></div>
                                    </div>
                                )}

                                {/* Beaker */}
                                <div className="relative w-48 h-56 border-4 border-slate-600 border-t-0 rounded-b-2xl bg-white/5 backdrop-blur-sm flex items-end justify-center mb-6 overflow-visible z-10">
                                    {/* Liquid/Block */}
                                    <div className={`w-full h-3/4 ${materialColor} rounded-b-xl transition-all duration-1000 relative`}>
                                        <div className="absolute inset-0 flex items-center justify-center font-bold text-white opacity-50 text-2xl">
                                            {m ? `${m} g` : materialName}
                                        </div>
                                    </div>

                                    {/* Thermometer */}
                                    <div className="absolute right-4 bottom-4 w-4 h-64 bg-slate-800 border-2 border-slate-600 rounded-full flex flex-col justify-end overflow-hidden shadow-lg">
                                        <div className="thermometer-liquid w-full" 
                                            style={{ 
                                                height: `${tempHeight()}%`,
                                                backgroundColor: getTempColor(tempHeight())
                                            }}></div>
                                        {/* Ticks (simplified) */}
                                        <div className="absolute right-0 top-0 h-full w-2 flex flex-col justify-between py-2">
                                            {[...Array(10)].map((_, i) => <div key={i} className="h-px w-full bg-slate-600"></div>)}
                                        </div>
                                    </div>
                                </div>

                                {/* Labels */}
                                <div className="absolute top-4 right-4 bg-slate-950/80 p-2 rounded-lg border border-slate-700 text-xs font-mono shadow-sm z-20">
                                    <div className="text-slate-400">c = {c || '?'} J g‚Åª¬π K‚Åª¬π</div>
                                    <div className="text-amber-400">ŒîT = {dt || '?'} ¬∞C</div>
                                </div>

                            </div>

                            {/* Result Card */}
                            {result && (
                                <div className="bg-slate-900 p-6 rounded-3xl shadow-xl border border-slate-800 text-white animate-in slide-in-from-bottom-4">
                                    <div className="flex items-center justify-between mb-4">
                                        <div className="text-sm font-bold text-rose-400 uppercase tracking-wider">
                                            Result ({target})
                                        </div>
                                        <Icon name="CheckCircle" className="text-emerald-400" />
                                    </div>
                                    
                                    <div className="text-5xl font-mono font-black mb-2 text-indigo-400">
                                        {parseFloat(result.value.toFixed(2))}
                                        <span className="text-xl ml-2 font-sans font-normal text-slate-400">
                                            {result.unit}
                                        </span>
                                    </div>

                                    <div className="mt-4 pt-4 border-t border-slate-700">
                                        <div className="text-xs text-slate-500 mb-1 uppercase font-bold">Formula Used</div>
                                        <div className="font-mono text-sm text-slate-300">
                                            {target} = {result.formula}
                                        </div>
                                    </div>
                                </div>
                            )}

                        </div>
                    </div>
                    
                    <div className="text-center text-slate-600 text-xs mt-8 border-t border-slate-800 pt-4">
                        Luminous Learner International | IB/A-Level Physics/Chemistry
                    </div>
                </div>
            );
        };

        lucide.createIcons();
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
