<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nanomaterial Gallery - LuminousLearner International</title>
    
    <!-- React & Tailwind -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Three.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #0F172A; color: #e2e8f0; margin: 0; overflow: hidden; }
        .font-mono { font-family: 'JetBrains Mono', monospace; }
        canvas { outline: none; }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #1e293b; }
        ::-webkit-scrollbar-thumb { background: #475569; border-radius: 3px; }
        
        .safe-area-bottom { padding-bottom: max(2rem, env(safe-area-inset-bottom)); }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const Icon = ({ name, className = "", size = 20 }) => {
            const [svgHtml, setSvgHtml] = useState('');
            useEffect(() => {
                if (window.lucide && window.lucide.icons) {
                    const pascalName = name.split('-').map(part => part.charAt(0).toUpperCase() + part.slice(1)).join('');
                    const iconData = window.lucide.icons[pascalName];
                    if (iconData && typeof window.lucide.createElement === 'function') {
                        const svgElement = window.lucide.createElement(iconData);
                        svgElement.setAttribute('class', className);
                        svgElement.setAttribute('width', size);
                        svgElement.setAttribute('height', size);
                        setSvgHtml(svgElement.outerHTML);
                    }
                }
            }, [name, className, size]);
            if (!svgHtml) return <span className={className} style={{ width: size, height: size, display: 'inline-block' }}></span>;
            return <span dangerouslySetInnerHTML={{ __html: svgHtml }} className="flex items-center justify-center" />;
        };

        // --- MATERIAL DATA ---
        const MATERIALS = {
            silver: {
                id: 'silver',
                name: 'Silver Nanoparticles',
                formula: 'Ag',
                type: 'Metallic',
                color: 0xE0E0E0, 
                desc: 'Particles of silver between 1 nm and 100 nm in size. Known for potent antibacterial properties.',
                app: 'Medical dressings, antibacterial sprays, socks.',
                stats: { surfaceArea: 'Extremely High', strength: 'Medium', conductivity: 'High' }
            },
            cnt: {
                id: 'cnt',
                name: 'Carbon Nanotube',
                formula: 'C',
                type: 'Covalent',
                color: 0x333333,
                desc: 'A tube made of carbon with diameters measurable in nanometers. Essentially a rolled-up sheet of graphene.',
                app: 'Composite materials, electronics, energy storage.',
                stats: { surfaceArea: 'Very High', strength: 'Ultra High', conductivity: 'High (depends on chirality)' }
            },
            graphene: {
                id: 'graphene',
                name: 'Graphene',
                formula: 'C',
                type: 'Covalent',
                color: 0x555555,
                desc: 'A single layer of carbon atoms arranged in a two-dimensional honeycomb lattice.',
                app: 'Flexible electronics, filtration, supercapacitors.',
                stats: { surfaceArea: 'Theoretical Max', strength: 'Ultra High', conductivity: 'Excellent' }
            },
            buckyball: {
                id: 'buckyball',
                name: 'Buckminsterfullerene',
                formula: 'C₆₀',
                type: 'Molecular',
                color: 0x713f12, 
                desc: 'A spherical molecule with the formula C60. It has a cage-like fused-ring structure (truncated icosahedron).',
                app: 'Drug delivery systems, lubricants, antioxidants.',
                stats: { surfaceArea: 'High', strength: 'High', conductivity: 'Semiconductor' }
            }
        };

        // --- 3D SCENE COMPONENT ---
        const NanoScene = ({ type }) => {
            const mountRef = useRef(null);
            
            useEffect(() => {
                if (!mountRef.current) return;

                // 1. Setup
                const width = mountRef.current.clientWidth;
                const height = mountRef.current.clientHeight;
                const scene = new THREE.Scene();
                scene.background = new THREE.Color(0x020617); // Dark background

                const camera = new THREE.PerspectiveCamera(45, width / height, 0.1, 1000);
                camera.position.set(0, 0, 25);

                const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
                renderer.setSize(width, height);
                renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
                
                // Clear previous canvas
                if (mountRef.current.children.length > 0) {
                     mountRef.current.removeChild(mountRef.current.children[0]);
                }
                mountRef.current.appendChild(renderer.domElement);

                const controls = new THREE.OrbitControls(camera, renderer.domElement);
                controls.enableDamping = true;
                controls.autoRotate = true;
                controls.autoRotateSpeed = 1.5;

                // Lights
                const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
                scene.add(ambientLight);
                const dirLight = new THREE.DirectionalLight(0xffffff, 1.0);
                dirLight.position.set(10, 10, 10);
                scene.add(dirLight);
                const pointLight = new THREE.PointLight(0x38bdf8, 0.8);
                pointLight.position.set(-10, -10, 10);
                scene.add(pointLight);

                // --- BUILD STRUCTURES ---
                const group = new THREE.Group();
                
                if (type === 'silver') {
                    // Cluster of spheres (Ag NPs)
                    const geo = new THREE.SphereGeometry(0.8, 32, 32);
                    // Updated Material: Lighter color, higher roughness for better visibility
                    const mat = new THREE.MeshStandardMaterial({ 
                        color: 0xE0E0E0, metalness: 0.8, roughness: 0.4 
                    });
                    
                    // Create a rough sphere cluster
                    for(let i=0; i<50; i++) {
                        const mesh = new THREE.Mesh(geo, mat);
                        // Random pos within a sphere
                        const u = Math.random();
                        const v = Math.random();
                        const theta = 2 * Math.PI * u;
                        const phi = Math.acos(2 * v - 1);
                        const r = 4 * Math.cbrt(Math.random()); // Cube root for uniform distribution
                        
                        mesh.position.set(
                            r * Math.sin(phi) * Math.cos(theta),
                            r * Math.sin(phi) * Math.sin(theta),
                            r * Math.cos(phi)
                        );
                        group.add(mesh);
                    }
                } 
                else if (type === 'cnt') {
                    // Carbon Nanotube (Cylinder of hexagons)
                    // Simplified visualization: Rings of atoms
                    const radius = 3;
                    const length = 12;
                    const atomGeo = new THREE.SphereGeometry(0.3, 16, 16);
                    const atomMat = new THREE.MeshStandardMaterial({ color: 0x333333 });
                    const bondMat = new THREE.MeshStandardMaterial({ color: 0x555555 });

                    // Create a spiral pattern to simulate chirality
                    for(let y = -length/2; y <= length/2; y+=0.8) {
                        for(let a = 0; a < Math.PI * 2; a += Math.PI / 6) {
                            // Hexagonal offset
                            const offset = (Math.round(y) % 2) * (Math.PI / 12);
                            const angle = a + offset;
                            
                            const x = Math.cos(angle) * radius;
                            const z = Math.sin(angle) * radius;
                            
                            const atom = new THREE.Mesh(atomGeo, atomMat);
                            atom.position.set(x, y, z);
                            group.add(atom);
                            
                            // Visual bonds (simplified, just vertical and horizontal-ish)
                            // Vertical bond
                            if (y < length/2) {
                                const bondGeo = new THREE.CylinderGeometry(0.08, 0.08, 0.8, 8);
                                const bond = new THREE.Mesh(bondGeo, bondMat);
                                bond.position.set(x, y + 0.4, z);
                                group.add(bond);
                            }
                        }
                    }
                    group.rotation.z = Math.PI / 6; // Tilt
                }
                else if (type === 'graphene') {
                    // Graphene Sheet (Honeycomb)
                    const atomGeo = new THREE.SphereGeometry(0.3, 16, 16);
                    const atomMat = new THREE.MeshStandardMaterial({ color: 0x555555 });
                    const bondMat = new THREE.MeshStandardMaterial({ color: 0x888888 });
                    
                    const hexSize = 1.5;
                    const rows = 6;
                    const cols = 6;

                    for(let i = -rows; i <= rows; i++) {
                        for(let j = -cols; j <= cols; j++) {
                            const xOffset = (j % 2 === 0) ? 0 : hexSize * Math.sqrt(3) / 2;
                            const x = i * hexSize * Math.sqrt(3) + xOffset;
                            const y = j * hexSize * 1.5;
                            
                            // Don't render atoms too far
                            if (Math.sqrt(x*x + y*y) > 8) continue;

                            const atom = new THREE.Mesh(atomGeo, atomMat);
                            atom.position.set(x, y, 0);
                            group.add(atom);

                            // Bonds (3 directions)
                            const angles = [0, Math.PI/3, 2*Math.PI/3];
                            angles.forEach(ang => {
                                const bondGeo = new THREE.CylinderGeometry(0.08, 0.08, hexSize, 8);
                                const bond = new THREE.Mesh(bondGeo, bondMat);
                                bond.position.set(x + Math.cos(ang)*hexSize/2, y + Math.sin(ang)*hexSize/2, 0);
                                bond.rotation.z = ang + Math.PI/2;
                                group.add(bond);
                            });
                        }
                    }
                }
                else if (type === 'buckyball') {
                    // C60 (Icosahedron geometry vertices)
                    const radius = 4;
                    const icoGeo = new THREE.IcosahedronGeometry(radius, 1); 
                    
                    const positions = icoGeo.attributes.position.array;
                    const atomGeo = new THREE.SphereGeometry(0.4, 16, 16);
                    const atomMat = new THREE.MeshStandardMaterial({ color: 0x713f12 });
                    
                    for(let i = 0; i < positions.length; i+=3) {
                        const x = positions[i];
                        const y = positions[i+1];
                        const z = positions[i+2];
                        
                        const atom = new THREE.Mesh(atomGeo, atomMat);
                        atom.position.set(x, y, z);
                        group.add(atom);
                    }
                    
                    // Wireframe for bonds
                    const wireGeo = new THREE.WireframeGeometry(icoGeo);
                    const wireMat = new THREE.LineBasicMaterial({ color: 0xca8a04, linewidth: 2 });
                    const wireframe = new THREE.LineSegments(wireGeo, wireMat);
                    group.add(wireframe);
                }

                scene.add(group);

                // Animation
                let frameId;
                const animate = () => {
                    frameId = requestAnimationFrame(animate);
                    controls.update();
                    renderer.render(scene, camera);
                };
                animate();

                // Cleanup
                const handleResize = () => {
                    if (!mountRef.current) return;
                    const w = mountRef.current.clientWidth;
                    const h = mountRef.current.clientHeight;
                    camera.aspect = w / h;
                    camera.updateProjectionMatrix();
                    renderer.setSize(w, h);
                };
                window.addEventListener('resize', handleResize);

                return () => {
                    cancelAnimationFrame(frameId);
                    window.removeEventListener('resize', handleResize);
                    if (mountRef.current && renderer.domElement) {
                        mountRef.current.removeChild(renderer.domElement);
                    }
                    renderer.dispose();
                };
            }, [type]);

            return <div ref={mountRef} className="w-full h-full" />;
        };

        // --- MAIN APP ---
        const App = () => {
            const [selected, setSelected] = useState('silver');
            const data = MATERIALS[selected];

            return (
                <div className="min-h-screen bg-[#0F172A] text-white flex flex-col md:flex-row overflow-hidden">
                    
                    {/* Sidebar */}
                    <div className="w-full md:w-80 bg-slate-900 border-r border-slate-800 flex flex-col z-10 shadow-xl h-screen shrink-0">
                        <div className="p-6 border-b border-slate-800">
                            <h1 className="text-xl font-bold flex items-center gap-2">
                                <Icon name="Atom" className="text-emerald-400" /> Nanomaterials
                            </h1>
                            <p className="text-xs text-slate-400 mt-1">Structure & Applications</p>
                        </div>

                        <div className="p-4 space-y-2">
                            <label className="text-xs font-bold text-slate-500 uppercase tracking-widest px-2 mb-2 block">Select Material</label>
                            
                            {Object.entries(MATERIALS).map(([key, mat]) => (
                                <button 
                                    key={key}
                                    onClick={() => setSelected(key)}
                                    className={`w-full text-left p-4 rounded-xl border transition-all flex items-center gap-3 relative overflow-hidden
                                        ${selected === key 
                                            ? 'bg-slate-800 border-blue-500 ring-1 ring-blue-500/50' 
                                            : 'bg-slate-900/50 border-slate-700 hover:bg-slate-800'}
                                    `}
                                >
                                    <div className={`w-10 h-10 rounded-full flex items-center justify-center font-bold text-xs ${selected === key ? 'bg-blue-500 text-white' : 'bg-slate-700 text-slate-300'}`}>
                                        {mat.formula}
                                    </div>
                                    <div className="flex-1">
                                        <div className={`text-sm font-bold ${selected === key ? 'text-white' : 'text-slate-300'}`}>
                                            {mat.name.split(' (')[0]}
                                        </div>
                                        <div className="text-[10px] text-slate-500">{mat.type}</div>
                                    </div>
                                </button>
                            ))}
                        </div>

                        {/* Stats */}
                        <div className="mt-auto p-6 border-t border-slate-800 bg-slate-900">
                            <div className="text-xs font-bold text-slate-500 uppercase mb-3">Key Properties</div>
                            <div className="space-y-3 text-xs">
                                <div className="flex justify-between items-center">
                                    <span className="text-slate-400">Surface Area</span>
                                    <span className="font-bold text-emerald-400 bg-emerald-900/20 px-2 py-0.5 rounded">{data.stats.surfaceArea}</span>
                                </div>
                                <div className="flex justify-between items-center">
                                    <span className="text-slate-400">Strength</span>
                                    <span className="font-bold text-blue-400 bg-blue-900/20 px-2 py-0.5 rounded">{data.stats.strength}</span>
                                </div>
                                <div className="flex justify-between items-center">
                                    <span className="text-slate-400">Conductivity</span>
                                    <span className="font-bold text-yellow-400 bg-yellow-900/20 px-2 py-0.5 rounded">{data.stats.conductivity}</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* Main Stage */}
                    <div className="flex-1 flex flex-col relative bg-[#020617]">
                        
                        {/* 3D Viewport */}
                        <div className="flex-1 relative overflow-hidden">
                            <NanoScene type={selected} />
                            
                            {/* Overlay Label */}
                            <div className="absolute top-6 left-6 pointer-events-none">
                                <h2 className="text-4xl font-black text-white drop-shadow-lg opacity-90">{data.name.split(' (')[0]}</h2>
                                <p className="text-emerald-400 font-mono text-lg mt-1">{data.formula}</p>
                            </div>

                            <div className="absolute bottom-6 right-6 text-slate-500 text-xs pointer-events-none select-none bg-black/40 backdrop-blur px-4 py-2 rounded-full border border-white/10">
                                Left Click: Rotate • Right Click: Pan • Scroll: Zoom
                            </div>
                        </div>

                        {/* Info Panel */}
                        <div className="h-48 bg-slate-800 border-t border-slate-700 p-8 shrink-0 flex gap-8 overflow-x-auto safe-area-bottom">
                            
                            <div className="flex-1 min-w-[300px]">
                                <div className="text-xs font-bold text-slate-500 uppercase mb-2 flex items-center gap-2">
                                    <Icon name="info" size={14} /> Description
                                </div>
                                <p className="text-sm text-slate-300 leading-relaxed">
                                    {data.desc}
                                </p>
                            </div>

                            <div className="w-px bg-slate-700 mx-4 hidden md:block"></div>

                            <div className="flex-1 min-w-[300px]">
                                <div className="text-xs font-bold text-slate-500 uppercase mb-2 flex items-center gap-2">
                                    <Icon name="lightbulb" size={14} className="text-yellow-400"/> Applications
                                </div>
                                <p className="text-sm text-white font-medium bg-slate-900/50 p-3 rounded-lg border border-slate-600">
                                    {data.app}
                                </p>
                            </div>

                        </div>
                    </div>

                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
