<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pH Calculator - LuminousLearner International</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=JetBrains+Mono:wght@400;700&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #0F172A; color: #e2e8f0; }
        .font-mono { font-family: 'JetBrains Mono', monospace; }
        
        /* pH Gradient Background */
        .ph-gradient {
            background: linear-gradient(to right, 
                #ef4444 0%,    /* pH 0 Red */
                #f97316 14%,   /* pH 2 Orange */
                #eab308 28%,   /* pH 4 Yellow */
                #84cc16 42%,   /* pH 6 Lime */
                #22c55e 50%,   /* pH 7 Green */
                #06b6d4 57%,   /* pH 8 Cyan */
                #3b82f6 71%,   /* pH 10 Blue */
                #6366f1 85%,   /* pH 12 Indigo */
                #a855f7 100%   /* pH 14 Purple */
            );
        }

        .input-focus-ring:focus-within {
            box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.3);
            border-color: #3b82f6;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <div id="root" class="flex-grow flex flex-col"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // Common Substances Data (Internationalized)
        const Substances = [
            { ph: 0, name: 'Battery Acid', icon: 'üîã' },
            { ph: 1, name: 'Stomach Acid', icon: 'ü§¢' },
            { ph: 2, name: 'Lemon Juice', icon: 'üçã' },
            { ph: 3, name: 'Vinegar / Soda', icon: 'ü•§' },
            { ph: 4, name: 'Tomato Juice', icon: 'üçÖ' },
            { ph: 5, name: 'Black Coffee', icon: '‚òï' },
            { ph: 6, name: 'Milk / Urine', icon: 'ü•õ' },
            { ph: 7, name: 'Pure Water', icon: 'üíß' },
            { ph: 8, name: 'Sea Water / Egg', icon: 'üåä' },
            { ph: 9, name: 'Baking Soda', icon: 'üç™' },
            { ph: 10, name: 'Antacid', icon: 'üíä' },
            { ph: 11, name: 'Ammonia Solution', icon: 'üß™' },
            { ph: 12, name: 'Soapy Water', icon: 'üßº' },
            { ph: 13, name: 'Bleach', icon: 'üß¥' },
            { ph: 14, name: 'Drain Cleaner', icon: '‚ò†Ô∏è' }
        ];

        const Icon = ({ name, size = 20, className = "" }) => {
            const [svg, setSvg] = useState('');
            useEffect(() => {
                if (window.lucide) {
                    const iconNode = window.lucide.icons[name];
                    if (iconNode) {
                        const iconSvg = window.lucide.createElement(iconNode);
                        iconSvg.setAttribute('width', size);
                        iconSvg.setAttribute('height', size);
                        iconSvg.setAttribute('class', className);
                        setSvg(iconSvg.outerHTML);
                    }
                }
            }, [name, size, className]);
            return <span dangerouslySetInnerHTML={{ __html: svg }} className="flex items-center" />;
        };

        const App = () => {
            const [hConc, setHConc] = useState('');
            const [phValue, setPhValue] = useState('');
            const [activeInput, setActiveInput] = useState(null); // 'H' or 'pH'
            const [error, setError] = useState('');

            // Format Helper: Scientific Notation
            const formatSci = (num) => {
                if (num === 0) return '0';
                if (Math.abs(num) < 0.0001 || Math.abs(num) > 10000) {
                    return num.toExponential(2).replace('e+', ' √ó 10^').replace('e-', ' √ó 10^-');
                }
                return parseFloat(num.toFixed(4)); // Limit decimals
            };

            // Calculate from [H+]
            const calculateFromH = (val) => {
                setHConc(val);
                setActiveInput('H');
                setError('');
                
                if (!val) {
                    setPhValue('');
                    return;
                }

                const h = parseFloat(val);
                if (isNaN(h) || h <= 0) {
                    // Don't show error immediately for typing like "1."
                    if (val !== '' && val !== '1.' && !val.endsWith('e') && !val.endsWith('e-')) {
                        // setError('Concentration must be positive'); 
                    }
                    setPhValue('');
                    return;
                }

                const ph = -Math.log10(h);
                // Limit pH range for display reasonableness, though math works
                if (ph < -1 || ph > 15) {
                    setError('pH is outside typical range (-1 ~ 15)');
                }
                setPhValue(ph.toFixed(2));
            };

            // Calculate from pH
            const calculateFromPh = (val) => {
                setPhValue(val);
                setActiveInput('pH');
                setError('');

                if (!val) {
                    setHConc('');
                    return;
                }

                const ph = parseFloat(val);
                if (isNaN(ph)) {
                    setHConc('');
                    return;
                }

                const h = Math.pow(10, -ph);
                setHConc(h.toExponential(2).replace('e+', 'e')); // Keep 'e' for input value
            };

            // Get substance match
            const getSubstance = () => {
                const p = parseFloat(phValue);
                if (isNaN(p)) return null;
                const roundPh = Math.round(p);
                return Substances.find(s => s.ph === roundPh);
            };

            const substance = getSubstance();
            const currentPh = parseFloat(phValue) || 7;
            const clampedPh = Math.min(14, Math.max(0, currentPh)); // For UI slider

            // Color Logic
            const getPhColor = (ph) => {
                if (ph < 3) return 'text-red-500';
                if (ph < 6) return 'text-orange-500';
                if (ph < 8) return 'text-green-500';
                if (ph < 11) return 'text-blue-500';
                return 'text-purple-500';
            };

            return (
                <div className="flex flex-col h-full container mx-auto px-4 py-6 max-w-5xl">
                    
                    {/* Header */}
                    <div className="flex justify-between items-center mb-6 border-b border-slate-800 pb-4">
                        <div>
                            <h1 className="text-2xl font-bold text-indigo-400 flex items-center gap-2">
                                <Icon name="TestTube2" /> pH Calculator
                            </h1>
                            <p className="text-slate-500 text-sm">Convert between [H‚Å∫] and pH</p>
                        </div>
                        <button onClick={() => { setHConc(''); setPhValue(''); setError(''); }} className="px-4 py-2 bg-slate-800 text-slate-400 rounded-lg hover:bg-slate-700 hover:text-white font-bold text-sm flex items-center gap-2 transition-colors border border-slate-700">
                            <Icon name="RotateCcw" size={16} /> Reset
                        </button>
                    </div>

                    <div className="flex flex-col lg:flex-row gap-8 flex-grow">
                        
                        {/* Left: Calculator Inputs */}
                        <div className="w-full lg:w-1/2 flex flex-col gap-6">
                            
                            <div className="bg-slate-900 p-6 rounded-2xl shadow-xl border border-slate-800">
                                <h3 className="text-lg font-bold mb-6 text-slate-400 flex items-center gap-2">
                                    <Icon name="Calculator" className="text-indigo-400"/> Input Values
                                </h3>

                                {/* H+ Input */}
                                <div className={`mb-6 p-4 rounded-xl border-2 transition-all input-focus-ring
                                    ${activeInput === 'H' ? 'bg-indigo-900/30 border-indigo-500' : 'bg-slate-800 border-slate-700'}
                                `}>
                                    <label className="block text-sm font-bold text-blue-400 mb-2 flex justify-between">
                                        <span>Hydrogen Ion [H‚Å∫] (mol dm‚Åª¬≥)</span>
                                        <span className="text-xs font-normal bg-blue-900/50 text-blue-300 px-2 rounded border border-blue-800">Molarity</span>
                                    </label>
                                    <div className="relative">
                                        <input 
                                            type="number" 
                                            value={hConc}
                                            onChange={(e) => calculateFromH(e.target.value)}
                                            placeholder="e.g. 1e-7"
                                            className="w-full text-2xl font-mono font-bold bg-transparent outline-none text-white placeholder-slate-600"
                                        />
                                        <div className="text-xs text-slate-500 mt-1">
                                            Tip: Use 'e' for scientific notation (e.g., 1e-3 for 10‚Åª¬≥)
                                        </div>
                                    </div>
                                    {activeInput === 'pH' && (
                                        <div className="mt-2 text-xs font-mono text-indigo-400 font-bold bg-slate-900/50 p-2 rounded border border-indigo-900/50">
                                            Formula: [H‚Å∫] = 10^(-pH)
                                        </div>
                                    )}
                                </div>

                                {/* Divider Icon */}
                                <div className="flex justify-center -my-9 relative z-10">
                                    <div className="bg-slate-900 p-2 rounded-full shadow-lg border border-slate-700 text-slate-500">
                                        <Icon name="ArrowUpDown" size={20} />
                                    </div>
                                </div>

                                {/* pH Input */}
                                <div className={`mt-6 p-4 rounded-xl border-2 transition-all input-focus-ring
                                    ${activeInput === 'pH' ? 'bg-purple-900/30 border-purple-500' : 'bg-slate-800 border-slate-700'}
                                `}>
                                    <label className="block text-sm font-bold text-purple-400 mb-2">
                                        pH Value
                                    </label>
                                    <div className="relative">
                                        <input 
                                            type="number" 
                                            value={phValue}
                                            onChange={(e) => calculateFromPh(e.target.value)}
                                            placeholder="e.g. 7.0"
                                            className="w-full text-3xl font-mono font-bold bg-transparent outline-none text-white placeholder-slate-600"
                                        />
                                    </div>
                                    {activeInput === 'H' && (
                                        <div className="mt-2 text-xs font-mono text-purple-400 font-bold bg-slate-900/50 p-2 rounded border border-purple-900/50">
                                            Formula: pH = -log[H‚Å∫]
                                        </div>
                                    )}
                                </div>

                                {error && (
                                    <div className="mt-4 p-3 bg-red-900/30 border border-red-500/50 text-red-400 rounded-lg text-sm font-bold flex items-center gap-2 animate-pulse">
                                        <Icon name="AlertCircle" size={16} /> {error}
                                    </div>
                                )}
                            </div>

                        </div>

                        {/* Right: Visual Scale & Info */}
                        <div className="w-full lg:w-1/2 flex flex-col gap-6">
                            
                            {/* pH Scale Visual */}
                            <div className="bg-slate-900 p-6 rounded-2xl shadow-xl border border-slate-800">
                                <h3 className="text-lg font-bold mb-4 text-slate-300 flex items-center gap-2">
                                    <Icon name="BarChartHorizontal" className="text-emerald-400"/> pH Scale
                                </h3>
                                
                                <div className="relative h-16 w-full mb-8 mt-6">
                                    {/* Gradient Bar */}
                                    <div className="absolute inset-0 rounded-full ph-gradient shadow-inner border border-white/10"></div>
                                    
                                    {/* Labels */}
                                    <div className="absolute -bottom-6 left-0 text-xs font-bold text-red-500">0 (Acidic)</div>
                                    <div className="absolute -bottom-6 left-1/2 -translate-x-1/2 text-xs font-bold text-green-500">7 (Neutral)</div>
                                    <div className="absolute -bottom-6 right-0 text-xs font-bold text-purple-500">14 (Alkaline)</div>

                                    {/* Indicator Needle */}
                                    <div 
                                        className="absolute top-0 h-full w-1 bg-white shadow-[0_0_15px_rgba(255,255,255,0.8)] transition-all duration-500 ease-out z-10"
                                        style={{ left: `${(clampedPh / 14) * 100}%` }}
                                    >
                                        <div className="absolute -top-3 left-1/2 -translate-x-1/2 w-4 h-4 bg-white rotate-45 rounded-sm"></div>
                                        <div className="absolute -bottom-10 left-1/2 -translate-x-1/2 bg-slate-800 text-white text-xs font-bold px-2 py-1 rounded shadow-lg border border-slate-600">
                                            {phValue ? parseFloat(phValue).toFixed(1) : '?'}
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {/* Context Info */}
                            <div className="bg-slate-800 p-6 rounded-2xl border border-slate-700 shadow-lg flex-grow flex flex-col justify-center items-center text-center relative overflow-hidden">
                                <div className="absolute inset-0 opacity-5" style={{backgroundImage: 'radial-gradient(#fff 1px, transparent 1px)', backgroundSize: '20px 20px'}}></div>
                                
                                {phValue ? (
                                    <div className="animate-in relative z-10">
                                        <div className="text-slate-400 text-xs uppercase font-bold mb-4 tracking-wider">
                                            Approx. Substance
                                        </div>
                                        
                                        {substance ? (
                                            <>
                                                <div className="text-7xl mb-4 animate-bounce drop-shadow-2xl">{substance.icon}</div>
                                                <div className={`text-3xl font-bold mb-2 ${getPhColor(currentPh)}`}>
                                                    {substance.name}
                                                </div>
                                                <div className="text-sm text-slate-400 font-mono bg-slate-900/50 px-3 py-1 rounded-full border border-slate-600 inline-block">
                                                    {currentPh < 7 ? 'Acidic' : currentPh > 7 ? 'Alkaline' : 'Neutral'}
                                                </div>
                                            </>
                                        ) : (
                                            <>
                                                <div className="text-6xl mb-4 text-slate-600">?</div>
                                                <div className="text-xl font-bold text-slate-300">
                                                    Extreme pH Environment
                                                </div>
                                            </>
                                        )}

                                        <div className="mt-8 pt-6 border-t border-slate-700 w-full">
                                            <div className="text-xs text-slate-500 mb-2 font-bold uppercase">Scientific Notation</div>
                                            <div className="font-mono text-lg text-emerald-400 bg-slate-900 p-3 rounded-lg border border-slate-600 inline-block shadow-inner">
                                                [H‚Å∫] = {hConc ? formatSci(parseFloat(hConc)) : '?'} M
                                            </div>
                                        </div>
                                    </div>
                                ) : (
                                    <div className="text-slate-500">
                                        <Icon name="ArrowLeft" className="mx-auto mb-2 opacity-50" size={32} />
                                        <p>Enter a value to see details</p>
                                    </div>
                                )}
                            </div>

                        </div>

                    </div>
                    
                    <div className="text-center text-slate-600 text-xs mt-8 border-t border-slate-800 pt-4">
                        Luminous Learner International | IB/A-Level Chemistry
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
