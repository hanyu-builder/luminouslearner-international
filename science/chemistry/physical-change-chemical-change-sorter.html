<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Physical vs Chemical Change Sorter - LuminousLearner International</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=JetBrains+Mono:wght@400;700&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #0F172A; color: #e2e8f0; }
        .font-mono { font-family: 'JetBrains Mono', monospace; }
        
        /* Card Animation */
        .card-pop { animation: pop 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        @keyframes pop {
            0% { transform: scale(0.5); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        /* Drop Zone Hover */
        .drag-over { 
            border-color: #60a5fa !important; /* Blue-400 */
            background-color: rgba(30, 58, 138, 0.5) !important; /* Blue-900/50 */
            transform: scale(1.02); 
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <div id="root" class="flex-grow flex flex-col"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const Icon = ({ name, size = 20, className = "" }) => {
            const [svg, setSvg] = useState('');
            useEffect(() => {
                if (window.lucide) {
                    const iconNode = window.lucide.icons[name];
                    if (iconNode) {
                        const iconSvg = window.lucide.createElement(iconNode);
                        iconSvg.setAttribute('width', size);
                        iconSvg.setAttribute('height', size);
                        iconSvg.setAttribute('class', className);
                        setSvg(iconSvg.outerHTML);
                    }
                }
            }, [name, size, className]);
            return <span dangerouslySetInnerHTML={{ __html: svg }} className="flex items-center" />;
        };

        // Game Data (Internationalized)
        const Items = [
            { id: 1, text: 'Melting of Ice', type: 'physical', reason: 'Change of state (Solid → Liquid). No new substance formed.' },
            { id: 2, text: 'Rusting of Iron', type: 'chemical', reason: 'New substance formed: Iron Oxide (Rust).' },
            { id: 3, text: 'Tearing Paper', type: 'physical', reason: 'Only shape changes. It is still paper.' },
            { id: 4, text: 'Burning Wood', type: 'chemical', reason: 'Irreversible. Ash and smoke are new substances.' },
            { id: 5, text: 'Dissolving Sugar', type: 'physical', reason: 'Sugar molecules disperse but remain sugar. Reversible by evaporation.' },
            { id: 6, text: 'Souring of Milk', type: 'chemical', reason: 'Bacteria produce acid. New substance formed (sour taste).' },
            { id: 7, text: 'Boiling Water', type: 'physical', reason: 'Change of state (Liquid → Gas). Molecules are unchanged (H₂O).' },
            { id: 8, text: 'Frying an Egg', type: 'chemical', reason: 'Proteins are denatured by heat. Permanent change.' },
            { id: 9, text: 'Mixing Sand & Salt', type: 'physical', reason: 'No reaction occurs. Can be separated physically.' },
            { id: 10, text: 'Photosynthesis', type: 'chemical', reason: 'CO₂ and Water turn into Glucose and Oxygen.' },
            { id: 11, text: 'Sublimation of Dry Ice', type: 'physical', reason: 'Solid CO₂ turns directly to gas. No chemical change.' },
            { id: 12, text: 'Browning of Apple', type: 'chemical', reason: 'Enzymatic oxidation produces new brown pigments.' }
        ];

        const App = () => {
            const [currentItems, setCurrentItems] = useState([]);
            const [score, setScore] = useState(0);
            const [gameState, setGameState] = useState('start'); // start, playing, finished
            const [feedback, setFeedback] = useState(null); // { type: 'success'/'error', msg: '' }
            const [draggedItem, setDraggedItem] = useState(null);
            
            // Timer
            const [timeLeft, setTimeLeft] = useState(60);

            useEffect(() => {
                let timer;
                if (gameState === 'playing' && timeLeft > 0) {
                    timer = setInterval(() => setTimeLeft(prev => prev - 1), 1000);
                } else if (timeLeft === 0) {
                    setGameState('finished');
                }
                return () => clearInterval(timer);
            }, [gameState, timeLeft]);

            const startGame = () => {
                setScore(0);
                setTimeLeft(60);
                setGameState('playing');
                // Shuffle and pick 10 items
                const shuffled = [...Items].sort(() => 0.5 - Math.random()).slice(0, 10);
                setCurrentItems(shuffled);
            };

            const handleDrop = (targetType) => {
                if (!draggedItem) return;

                if (draggedItem.type === targetType) {
                    // Correct
                    setScore(prev => prev + 10);
                    setFeedback({ type: 'success', msg: 'Correct! (+10 pts)' });
                    // Remove item
                    setCurrentItems(prev => prev.filter(i => i.id !== draggedItem.id));
                    
                    // Check win
                    if (currentItems.length === 1) { // This was the last one
                        setGameState('finished');
                    }
                } else {
                    // Incorrect
                    setScore(prev => Math.max(0, prev - 5));
                    setFeedback({ type: 'error', msg: `Wrong! ${draggedItem.reason} (-5 pts)` });
                }
                
                setDraggedItem(null);
                
                // Clear feedback after 2s
                setTimeout(() => setFeedback(null), 2500);
            };

            const handleDragStart = (e, item) => {
                // For desktop drag
                setDraggedItem(item);
                // For mobile/touch support logic would be added here if using a library, 
                // but basic HTML5 drag works mostly on desktop.
            };

            return (
                <div className="flex flex-col h-full container mx-auto px-4 py-6 max-w-4xl">
                    
                    {/* Header */}
                    <div className="flex justify-between items-center mb-6 border-b border-slate-700 pb-4">
                        <div>
                            <h1 className="text-2xl font-bold text-indigo-400 flex items-center gap-2">
                                <Icon name="ArrowLeftRight" /> Physical vs Chemical
                            </h1>
                            <p className="text-slate-400 text-sm">Change Sorter Game</p>
                        </div>
                        {gameState === 'playing' && (
                            <div className="flex gap-4 text-xl font-mono font-bold">
                                <div className="text-indigo-400">Score: {score}</div>
                                <div className={`${timeLeft < 10 ? 'text-red-500 animate-pulse' : 'text-slate-400'}`}>
                                    {timeLeft}s
                                </div>
                            </div>
                        )}
                    </div>

                    {/* Game Area */}
                    {gameState === 'start' && (
                        <div className="flex-grow flex flex-col items-center justify-center space-y-6 animate-in zoom-in">
                            <div className="p-8 bg-slate-800 rounded-2xl shadow-lg text-center max-w-md border border-slate-700">
                                <div className="w-20 h-20 bg-indigo-900/50 rounded-full flex items-center justify-center mx-auto mb-4 text-indigo-400 border border-indigo-500/30">
                                    <Icon name="Gamepad2" size={40} />
                                </div>
                                <h2 className="text-2xl font-bold text-white mb-2">Ready to Sort?</h2>
                                <p className="text-slate-400 mb-6">
                                    You have 60 seconds to sort 10 phenomena into "Physical Change" or "Chemical Change".
                                </p>
                                <button 
                                    onClick={startGame}
                                    className="px-8 py-3 bg-indigo-600 hover:bg-indigo-500 text-white font-bold rounded-full shadow-lg transition-transform active:scale-95 w-full flex items-center justify-center gap-2"
                                >
                                    <Icon name="Play" size={18} /> Start Game
                                </button>
                            </div>
                        </div>
                    )}

                    {gameState === 'playing' && (
                        <div className="flex flex-col h-full">
                            
                            {/* Feedback Banner */}
                            <div className={`h-12 mb-4 rounded-lg flex items-center justify-center font-bold transition-all border
                                ${feedback?.type === 'success' ? 'bg-green-900/30 border-green-500 text-green-400' : 
                                  feedback?.type === 'error' ? 'bg-red-900/30 border-red-500 text-red-400' : 'bg-transparent border-transparent'}
                            `}>
                                {feedback && (
                                    <div className="flex items-center gap-2">
                                        <Icon name={feedback.type === 'success' ? 'CheckCircle' : 'XCircle'} size={18} />
                                        {feedback.msg}
                                    </div>
                                )}
                            </div>

                            {/* Drop Zones */}
                            <div className="grid grid-cols-2 gap-8 mb-8">
                                {/* Physical Zone */}
                                <div 
                                    onDragOver={(e) => { e.preventDefault(); e.currentTarget.classList.add('drag-over'); }}
                                    onDragLeave={(e) => e.currentTarget.classList.remove('drag-over')}
                                    onDrop={(e) => { e.preventDefault(); e.currentTarget.classList.remove('drag-over'); handleDrop('physical'); }}
                                    className="h-64 border-4 border-dashed border-blue-500/30 bg-blue-900/10 rounded-2xl flex flex-col items-center justify-center transition-all relative group"
                                >
                                    <Icon name="Snowflake" size={48} className="text-blue-400 mb-2 group-hover:scale-110 transition-transform" />
                                    <h3 className="text-xl font-bold text-blue-400">Physical Change</h3>
                                    <span className="text-sm text-blue-300/50">Reversible / No New Substance</span>
                                </div>

                                {/* Chemical Zone */}
                                <div 
                                    onDragOver={(e) => { e.preventDefault(); e.currentTarget.classList.add('drag-over'); }}
                                    onDragLeave={(e) => e.currentTarget.classList.remove('drag-over')}
                                    onDrop={(e) => { e.preventDefault(); e.currentTarget.classList.remove('drag-over'); handleDrop('chemical'); }}
                                    className="h-64 border-4 border-dashed border-orange-500/30 bg-orange-900/10 rounded-2xl flex flex-col items-center justify-center transition-all relative group"
                                >
                                    <Icon name="Flame" size={48} className="text-orange-400 mb-2 group-hover:scale-110 transition-transform" />
                                    <h3 className="text-xl font-bold text-orange-400">Chemical Change</h3>
                                    <span className="text-sm text-orange-300/50">Irreversible / New Substance</span>
                                </div>
                            </div>

                            {/* Card Deck */}
                            <div className="flex-grow relative flex justify-center h-48">
                                {currentItems.length > 0 ? (
                                    <div 
                                        draggable
                                        onDragStart={(e) => handleDragStart(e, currentItems[0])}
                                        onDragEnd={() => setDraggedItem(null)}
                                        className="w-64 h-40 bg-slate-800 rounded-xl shadow-2xl border border-slate-600 flex flex-col items-center justify-center p-4 text-center cursor-grab active:cursor-grabbing hover:-translate-y-1 transition-transform card-pop absolute top-0 z-20 select-none"
                                    >
                                        <div className="font-bold text-lg text-white mb-2">{currentItems[0].text}</div>
                                        <div className="mt-2 text-xs text-slate-400 flex items-center gap-1 bg-slate-900 px-2 py-1 rounded-full border border-slate-700">
                                            <Icon name="Hand" size={12} /> Drag this card
                                        </div>
                                    </div>
                                ) : null}
                                {/* Stack effect */}
                                {currentItems.length > 1 && (
                                    <div className="w-64 h-40 bg-slate-800/60 rounded-xl border border-slate-700 absolute top-2 scale-95 -z-10"></div>
                                )}
                                {currentItems.length > 2 && (
                                    <div className="w-64 h-40 bg-slate-800/30 rounded-xl border border-slate-700/50 absolute top-4 scale-90 -z-20"></div>
                                )}
                            </div>
                        </div>
                    )}

                    {gameState === 'finished' && (
                        <div className="flex-grow flex flex-col items-center justify-center animate-in fade-in">
                            <h2 className="text-3xl font-bold text-white mb-2">Game Over!</h2>
                            <div className="text-6xl font-black text-indigo-400 mb-6">{score} <span className="text-2xl text-slate-500 font-normal">pts</span></div>
                            
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 w-full max-w-2xl mb-8 overflow-y-auto max-h-60 p-2 custom-scrollbar">
                                <div className="bg-blue-900/20 p-4 rounded-lg border border-blue-500/30">
                                    <h3 className="font-bold text-blue-400 mb-2 border-b border-blue-500/30 pb-1 flex items-center gap-2">
                                        <Icon name="Snowflake" size={16}/> Physical Traits
                                    </h3>
                                    <ul className="text-sm text-blue-200 list-disc list-inside space-y-1">
                                        <li>No new substance formed</li>
                                        <li>Usually reversible</li>
                                        <li>Only state or shape changes</li>
                                    </ul>
                                </div>
                                <div className="bg-orange-900/20 p-4 rounded-lg border border-orange-500/30">
                                    <h3 className="font-bold text-orange-400 mb-2 border-b border-orange-500/30 pb-1 flex items-center gap-2">
                                        <Icon name="Flame" size={16}/> Chemical Traits
                                    </h3>
                                    <ul className="text-sm text-orange-200 list-disc list-inside space-y-1">
                                        <li>New substance created</li>
                                        <li>Usually irreversible</li>
                                        <li>Energy change (Heat/Light)</li>
                                    </ul>
                                </div>
                            </div>

                            <button 
                                onClick={startGame}
                                className="px-8 py-3 bg-indigo-600 hover:bg-indigo-500 text-white font-bold rounded-full shadow-lg transition-colors flex items-center gap-2"
                            >
                                <Icon name="RotateCcw" size={18} /> Play Again
                            </button>
                        </div>
                    )}

                    <div className="text-center text-slate-500 text-xs mt-auto pt-4">
                        Luminous Learner Science Tools
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
