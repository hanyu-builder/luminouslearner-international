<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cell Voltage Predictor - LuminousLearner International</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=JetBrains+Mono:wght@400;700&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #0F172A; color: #e2e8f0; }
        .font-mono { font-family: 'JetBrains Mono', monospace; }

        /* Electron Flow Animation */
        @keyframes flow {
            0% { transform: translateX(0); opacity: 0; }
            20% { opacity: 1; }
            80% { opacity: 1; }
            100% { transform: translateX(100px); opacity: 0; }
        }
        .electron-dot {
            animation: flow 1.5s linear infinite;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <div id="root" class="flex-grow flex flex-col"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Standard Electrode Potentials (E standard)
        // Sorted by E value (descending)
        const HalfCells = [
            { id: 'Ag', name: 'Silver (Ag)', reaction: 'Ag⁺(aq) + e⁻ ⇌ Ag(s)', E: 0.80, color: 'bg-slate-400' },
            { id: 'Cu', name: 'Copper (Cu)', reaction: 'Cu²⁺(aq) + 2e⁻ ⇌ Cu(s)', E: 0.34, color: 'bg-orange-500' },
            { id: 'H', name: 'Hydrogen (H₂)', reaction: '2H⁺(aq) + 2e⁻ ⇌ H₂(g)', E: 0.00, color: 'bg-slate-200' }, // SHE
            { id: 'Pb', name: 'Lead (Pb)', reaction: 'Pb²⁺(aq) + 2e⁻ ⇌ Pb(s)', E: -0.13, color: 'bg-slate-600' },
            { id: 'Fe', name: 'Iron (Fe)', reaction: 'Fe²⁺(aq) + 2e⁻ ⇌ Fe(s)', E: -0.44, color: 'bg-stone-600' },
            { id: 'Zn', name: 'Zinc (Zn)', reaction: 'Zn²⁺(aq) + 2e⁻ ⇌ Zn(s)', E: -0.76, color: 'bg-zinc-500' },
            { id: 'Mg', name: 'Magnesium (Mg)', reaction: 'Mg²⁺(aq) + 2e⁻ ⇌ Mg(s)', E: -2.37, color: 'bg-gray-300' }
        ];

        const Icon = ({ name, size = 20, className = "" }) => {
            const [svg, setSvg] = useState('');
            useEffect(() => {
                if (window.lucide) {
                    const iconNode = window.lucide.icons[name];
                    if (iconNode) {
                        const iconSvg = window.lucide.createElement(iconNode);
                        iconSvg.setAttribute('width', size);
                        iconSvg.setAttribute('height', size);
                        iconSvg.setAttribute('class', className);
                        setSvg(iconSvg.outerHTML);
                    }
                }
            }, [name, size, className]);
            return <span dangerouslySetInnerHTML={{ __html: svg }} className="flex items-center" />;
        };

        const App = () => {
            const [leftElectrode, setLeftElectrode] = useState(HalfCells[5]); // Zn
            const [rightElectrode, setRightElectrode] = useState(HalfCells[1]); // Cu
            
            const [anode, setAnode] = useState(null);
            const [cathode, setCathode] = useState(null);
            const [cellVoltage, setCellVoltage] = useState(0);
            const [electronDirection, setElectronDirection] = useState('right'); // 'left' or 'right'

            useEffect(() => {
                // Determine Anode and Cathode based on E values
                // More negative E => Anode (Oxidation)
                // More positive E => Cathode (Reduction)
                
                let a, c, voltage, dir;

                if (leftElectrode.E < rightElectrode.E) {
                    // Left is Anode
                    a = { ...leftElectrode, side: 'left' };
                    c = { ...rightElectrode, side: 'right' };
                    dir = 'right';
                } else {
                    // Right is Anode
                    a = { ...rightElectrode, side: 'right' };
                    c = { ...leftElectrode, side: 'left' };
                    dir = 'left';
                }

                // Calculate Voltage: E_cell = E_cathode - E_anode
                voltage = c.E - a.E;

                setAnode(a);
                setCathode(c);
                setCellVoltage(voltage.toFixed(2));
                setElectronDirection(dir);

            }, [leftElectrode, rightElectrode]);

            // Helper to reverse equation for oxidation
            const getOxidationEq = (reductionEq) => {
                // Simply swap sides visually for demo purposes
                const parts = reductionEq.split('⇌');
                if (parts.length === 2) {
                    return `${parts[1].trim()} → ${parts[0].trim()}`;
                }
                return reductionEq;
            };

            // Helper to format reduction eq
            const getReductionEq = (eq) => {
                return eq.replace('⇌', '→');
            };

            const getVoltageColor = (v) => {
                if (v > 2.0) return 'text-red-400 border-red-500/50 bg-red-900/20';
                if (v > 1.0) return 'text-orange-400 border-orange-500/50 bg-orange-900/20';
                if (v > 0.5) return 'text-yellow-400 border-yellow-500/50 bg-yellow-900/20';
                return 'text-slate-400 border-slate-700 bg-slate-800';
            };

            return (
                <div className="flex flex-col h-full container mx-auto px-4 py-6 max-w-5xl">
                    
                    {/* Header */}
                    <div className="flex justify-between items-center mb-6 border-b border-slate-800 pb-4">
                        <div>
                            <h1 className="text-2xl font-bold text-amber-500 flex items-center gap-2">
                                <Icon name="BatteryCharging" /> Cell Voltage Predictor
                            </h1>
                            <p className="text-slate-500 text-sm">Electrochemical Series & E° Values</p>
                        </div>
                    </div>

                    <div className="flex flex-col gap-6 flex-grow">
                        
                        {/* Row 1: Visualization (Full Width) */}
                        <div className="w-full">
                            <div className="bg-slate-900 rounded-2xl shadow-xl border border-slate-800 p-8 relative overflow-hidden min-h-[320px] flex flex-col justify-end">
                                
                                {/* Voltmeter */}
                                <div className="absolute top-6 left-1/2 -translate-x-1/2 w-32 h-24 bg-slate-950 rounded-lg border-4 border-slate-700 flex flex-col items-center justify-center shadow-lg z-20">
                                    <div className="text-green-400 font-mono text-2xl font-bold">{cellVoltage} V</div>
                                    <div className="text-slate-500 text-[10px] uppercase mt-1">Voltmeter</div>
                                    
                                    {/* Wires */}
                                    <div className="absolute bottom-0 left-4 w-1 h-16 bg-slate-800 translate-y-full"></div>
                                    <div className="absolute bottom-0 right-4 w-1 h-16 bg-red-900 translate-y-full"></div>
                                </div>

                                {/* Electron Flow */}
                                <div className="absolute top-16 left-0 w-full flex justify-center pointer-events-none">
                                    <div className={`w-64 h-2 bg-transparent relative overflow-hidden ${electronDirection === 'left' ? 'rotate-180' : ''}`}>
                                        {[...Array(5)].map((_, i) => (
                                            <div key={i} className="electron-dot absolute top-0 w-2 h-2 bg-yellow-400 rounded-full shadow-[0_0_5px_yellow]" 
                                                 style={{ animationDelay: `${i * 0.3}s` }}></div>
                                        ))}
                                    </div>
                                </div>
                                <div className={`absolute top-12 ${electronDirection === 'right' ? 'left-1/4' : 'right-1/4'} text-xs font-bold text-yellow-500 animate-pulse`}>
                                    e⁻ Flow &rarr;
                                </div>

                                {/* Beakers Container */}
                                <div className="flex justify-around items-end w-full mt-12 relative z-10">
                                    
                                    {/* Left Beaker */}
                                    <div className="flex flex-col items-center">
                                        <div className="w-32 h-40 border-4 border-slate-600 border-t-0 rounded-b-xl relative bg-white/5 overflow-hidden backdrop-blur-sm">
                                            <div className="absolute bottom-0 w-full h-3/4 bg-blue-500/20"></div>
                                            {/* Electrode */}
                                            <div className={`absolute top-[-20px] left-1/2 -translate-x-1/2 w-8 h-48 ${leftElectrode.color} border-2 border-slate-600 rounded-sm shadow-inner`}></div>
                                        </div>
                                        <div className="mt-2 font-bold text-slate-400">{leftElectrode.name.split(' ')[0]}</div>
                                    </div>

                                    {/* Salt Bridge */}
                                    <div className="absolute bottom-24 left-1/2 -translate-x-1/2 w-40 h-16 border-t-8 border-x-8 border-slate-700 rounded-t-2xl pointer-events-none opacity-50"></div>
                                    <div className="absolute bottom-12 left-1/2 -translate-x-1/2 bg-slate-800 px-2 py-1 text-xs text-slate-500 font-bold border border-slate-700 rounded">Salt Bridge</div>

                                    {/* Right Beaker */}
                                    <div className="flex flex-col items-center">
                                        <div className="w-32 h-40 border-4 border-slate-600 border-t-0 rounded-b-xl relative bg-white/5 overflow-hidden backdrop-blur-sm">
                                            <div className="absolute bottom-0 w-full h-3/4 bg-blue-500/20"></div>
                                            {/* Electrode */}
                                            <div className={`absolute top-[-20px] left-1/2 -translate-x-1/2 w-8 h-48 ${rightElectrode.color} border-2 border-slate-600 rounded-sm shadow-inner`}></div>
                                        </div>
                                        <div className="mt-2 font-bold text-slate-400">{rightElectrode.name.split(' ')[0]}</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        {/* Row 2: Configuration (Split) */}
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-6 relative">
                            
                            {/* Left Electrode Selector */}
                            <div className="bg-slate-900 p-5 rounded-2xl shadow-md border border-slate-800">
                                <div className="flex justify-between items-center mb-3">
                                    <h3 className="font-bold text-slate-300">Left Electrode</h3>
                                    <span className={`text-xs font-bold px-2 py-1 rounded ${anode?.side === 'left' ? 'bg-red-900/30 text-red-400 border border-red-500/30' : 'bg-blue-900/30 text-blue-400 border border-blue-500/30'}`}>
                                        {anode?.side === 'left' ? 'Anode (Oxidation) -' : 'Cathode (Reduction) +'}
                                    </span>
                                </div>
                                <select 
                                    value={leftElectrode.id} 
                                    onChange={(e) => setLeftElectrode(HalfCells.find(c => c.id === e.target.value))}
                                    className="w-full p-3 bg-slate-800 border border-slate-700 rounded-xl font-bold text-slate-200 outline-none focus:ring-2 focus:ring-amber-500"
                                >
                                    {HalfCells.map(c => (
                                        <option key={c.id} value={c.id} disabled={c.id === rightElectrode.id}>
                                            {c.name} (E° = {c.E > 0 ? '+' : ''}{c.E.toFixed(2)} V)
                                        </option>
                                    ))}
                                </select>
                                <div className="mt-3 p-3 bg-slate-800/50 rounded-lg text-xs text-slate-500 font-mono border border-slate-700">
                                    {leftElectrode.reaction}
                                </div>
                            </div>

                            {/* VS Badge */}
                            <div className="hidden md:flex absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 z-10">
                                <div className="bg-slate-800 text-amber-500 font-black rounded-full w-12 h-12 flex items-center justify-center border-4 border-slate-900 shadow-xl text-lg">VS</div>
                            </div>

                            {/* Right Electrode Selector */}
                            <div className="bg-slate-900 p-5 rounded-2xl shadow-md border border-slate-800">
                                <div className="flex justify-between items-center mb-3">
                                    <h3 className="font-bold text-slate-300">Right Electrode</h3>
                                    <span className={`text-xs font-bold px-2 py-1 rounded ${anode?.side === 'right' ? 'bg-red-900/30 text-red-400 border border-red-500/30' : 'bg-blue-900/30 text-blue-400 border border-blue-500/30'}`}>
                                        {anode?.side === 'right' ? 'Anode (Oxidation) -' : 'Cathode (Reduction) +'}
                                    </span>
                                </div>
                                <select 
                                    value={rightElectrode.id} 
                                    onChange={(e) => setRightElectrode(HalfCells.find(c => c.id === e.target.value))}
                                    className="w-full p-3 bg-slate-800 border border-slate-700 rounded-xl font-bold text-slate-200 outline-none focus:ring-2 focus:ring-amber-500"
                                >
                                    {HalfCells.map(c => (
                                        <option key={c.id} value={c.id} disabled={c.id === leftElectrode.id}>
                                            {c.name} (E° = {c.E > 0 ? '+' : ''}{c.E.toFixed(2)} V)
                                        </option>
                                    ))}
                                </select>
                                <div className="mt-3 p-3 bg-slate-800/50 rounded-lg text-xs text-slate-500 font-mono border border-slate-700">
                                    {rightElectrode.reaction}
                                </div>
                            </div>

                        </div>

                        {/* Row 3: Results & Breakdown */}
                        {anode && cathode && (
                            <div className="bg-slate-900 p-6 rounded-2xl shadow-md border border-slate-800 w-full">
                                <h3 className="text-lg font-bold mb-4 text-slate-300 flex items-center gap-2">
                                    <Icon name="Sigma" /> Calculations & Half-Equations
                                </h3>
                                
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    {/* Anode (Oxidation) */}
                                    <div className="p-4 bg-red-900/10 rounded-lg border-l-4 border-red-500">
                                        <div className="flex justify-between items-center mb-2">
                                            <span className="font-bold text-red-400 text-sm uppercase">Anode (Oxidation)</span>
                                            <span className="font-mono font-bold text-red-500 text-sm">E° = {anode.E.toFixed(2)} V</span>
                                        </div>
                                        <div className="font-mono text-sm text-slate-300 break-words">
                                            {getOxidationEq(anode.reaction)}
                                        </div>
                                    </div>

                                    {/* Cathode (Reduction) */}
                                    <div className="p-4 bg-blue-900/10 rounded-lg border-l-4 border-blue-500">
                                        <div className="flex justify-between items-center mb-2">
                                            <span className="font-bold text-blue-400 text-sm uppercase">Cathode (Reduction)</span>
                                            <span className="font-mono font-bold text-blue-500 text-sm">E° = {cathode.E.toFixed(2)} V</span>
                                        </div>
                                        <div className="font-mono text-sm text-slate-300 break-words">
                                            {getReductionEq(cathode.reaction)}
                                        </div>
                                    </div>
                                </div>

                                {/* Total E_cell */}
                                <div className="mt-4 p-4 bg-slate-950 rounded-lg border border-amber-500/30 text-center">
                                    <div className="text-xs text-amber-500 font-bold uppercase mb-2">Standard Cell Potential (E°cell)</div>
                                    <div className="font-mono text-lg text-slate-400 mb-1">
                                        E°cell = E°(Cathode) - E°(Anode)
                                    </div>
                                    <div className="font-mono text-2xl font-bold text-white">
                                        = {cathode.E.toFixed(2)} - ({anode.E.toFixed(2)}) = <span className="text-amber-400">{cellVoltage} V</span>
                                    </div>
                                </div>
                            </div>
                        )}

                    </div>
                    
                    <div className="text-center text-slate-600 text-xs mt-8 mb-4">
                        Luminous Learner International | IB/A-Level Chemistry
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
