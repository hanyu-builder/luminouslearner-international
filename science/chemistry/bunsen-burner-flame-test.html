<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Virtual Bunsen Burner & Flame Test - LuminousLearner International</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=JetBrains+Mono:wght@400;700&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #0F172A; color: #e2e8f0; }
        .font-mono { font-family: 'JetBrains Mono', monospace; }
        
        /* Flame Animation Base */
        .flame-container {
            filter: blur(4px) contrast(2);
        }
        
        @keyframes flicker {
            0% { transform: scale(1, 1) skewX(0deg) translate(0,0); }
            25% { transform: scale(1.05, 1.05) skewX(-2deg) translate(-1px, -2px); }
            50% { transform: scale(0.95, 1.02) skewX(2deg) translate(1px, 0); }
            75% { transform: scale(1.02, 0.98) skewX(-1deg) translate(-1px, 2px); }
            100% { transform: scale(1, 1) skewX(0deg) translate(0,0); }
        }
        
        @keyframes roar {
            0% { transform: scale(1, 1); opacity: 0.9; }
            50% { transform: scale(0.98, 1.05); opacity: 1; }
            100% { transform: scale(1, 1); opacity: 0.9; }
        }

        /* Luminous Flame (Yellow) */
        .flame-luminous {
            background: linear-gradient(to top, orange, yellow, rgba(255, 255, 255, 0.5));
            border-radius: 50% 50% 20% 20%;
            box-shadow: 0 0 30px orange;
            animation: flicker 0.5s infinite alternate;
            width: 80px;
            height: 180px;
        }

        /* Non-luminous Flame (Blue) */
        .flame-non-luminous {
            background: linear-gradient(to top, rgba(0,0,255,0.1) 0%, rgba(100, 200, 255, 0.6) 40%, rgba(100, 200, 255, 0) 100%);
            border-radius: 50% 50% 30% 30%;
            width: 50px;
            height: 160px;
            animation: roar 0.1s infinite linear;
            position: relative;
        }
        /* Inner Cone */
        .flame-non-luminous::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 20px;
            height: 50px;
            background: cyan;
            border-radius: 50% 50% 0 0;
            filter: blur(1px);
            opacity: 0.8;
        }

        /* Flame Test Colors (Overlay) */
        .flame-color-li { box-shadow: 0 -40px 40px crimson; background: linear-gradient(to top, blue 10%, crimson 50%, red 100%); }
        .flame-color-na { box-shadow: 0 -40px 40px gold; background: linear-gradient(to top, blue 10%, gold 60%, orange 100%); }
        .flame-color-k { box-shadow: 0 -40px 40px plum; background: linear-gradient(to top, blue 10%, plum 60%, violet 100%); }
        .flame-color-ca { box-shadow: 0 -40px 40px orangered; background: linear-gradient(to top, blue 10%, orangered 60%, red 100%); }
        .flame-color-ba { box-shadow: 0 -40px 40px yellowgreen; background: linear-gradient(to top, blue 10%, yellowgreen 60%, #aaff00 100%); }
        .flame-color-cu { box-shadow: 0 -40px 40px seagreen; background: linear-gradient(to top, blue 10%, limegreen 40%, seagreen 100%); }
        /* Mg has no color */
        .flame-color-mg { }

        /* Platinum Wire Animation */
        @keyframes dip-in {
            0% { transform: translate(100%, -100%) rotate(45deg); }
            100% { transform: translate(0, 0) rotate(10deg); }
        }
        .wire-rod {
            animation: dip-in 1s ease-out forwards;
            transform-origin: top right;
        }

        /* Slider Styling */
        input[type=range] {
            -webkit-appearance: none;
            width: 100%;
            background: transparent;
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 24px;
            width: 24px;
            border-radius: 50%;
            background: #eab308; /* Yellow-500 */
            cursor: pointer;
            margin-top: -10px;
            box-shadow: 0 0 5px rgba(0,0,0,0.5);
            border: 2px solid #a16207;
        }
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%;
            height: 4px;
            cursor: pointer;
            background: #475569;
            border-radius: 2px;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <div id="root" class="flex-grow flex flex-col"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        
        // Metal Data (Internationalized)
        const Metals = [
            { id: 'none', name: 'None', symbol: '', color: '', desc: '' },
            { id: 'li', name: 'Lithium', symbol: 'Li⁺', color: 'flame-color-li', desc: 'Deep Red / Crimson' },
            { id: 'na', name: 'Sodium', symbol: 'Na⁺', color: 'flame-color-na', desc: 'Golden Yellow' },
            { id: 'k', name: 'Potassium', symbol: 'K⁺', color: 'flame-color-k', desc: 'Lilac' },
            { id: 'ca', name: 'Calcium', symbol: 'Ca²⁺', color: 'flame-color-ca', desc: 'Brick Red' },
            { id: 'ba', name: 'Barium', symbol: 'Ba²⁺', color: 'flame-color-ba', desc: 'Apple Green' },
            { id: 'cu', name: 'Copper', symbol: 'Cu²⁺', color: 'flame-color-cu', desc: 'Bluish Green' },
            { id: 'mg', name: 'Magnesium', symbol: 'Mg²⁺', color: 'flame-color-mg', desc: 'No characteristic flame color' },
        ];

        const Icon = ({ name, size = 20, className = "" }) => {
            const [svg, setSvg] = useState('');
            useEffect(() => {
                if (window.lucide) {
                    const iconNode = window.lucide.icons[name];
                    if (iconNode) {
                        const iconSvg = window.lucide.createElement(iconNode);
                        iconSvg.setAttribute('width', size);
                        iconSvg.setAttribute('height', size);
                        iconSvg.setAttribute('class', className);
                        setSvg(iconSvg.outerHTML);
                    }
                }
            }, [name, size, className]);
            return <span dangerouslySetInnerHTML={{ __html: svg }} className="flex items-center" />;
        };

        const App = () => {
            const [airHoleOpen, setAirHoleOpen] = useState(0); // 0 = closed, 100 = full open
            const [selectedMetal, setSelectedMetal] = useState(Metals[0]);
            const [showWire, setShowWire] = useState(false);
            
            // Derived states
            const isLuminous = airHoleOpen < 50;
            const flameClass = isLuminous ? 'flame-luminous' : 'flame-non-luminous';
            
            // Handle Metal Selection
            const handleMetalSelect = (metal) => {
                setShowWire(false);
                // Small delay to reset animation
                setTimeout(() => {
                    setSelectedMetal(metal);
                    if (metal.id !== 'none') {
                        setShowWire(true);
                    }
                }, 50);
            };

            const getFlameStatus = () => {
                if (isLuminous) return { 
                    type: 'Luminous Flame', 
                    desc: 'Air hole CLOSED. Incomplete combustion produces soot particles which glow yellow. Flame is unstable. unsuitable for heating or flame tests.',
                    color: 'text-yellow-400'
                };
                return { 
                    type: 'Non-luminous Flame', 
                    desc: 'Air hole OPEN. Complete combustion. High temperature. Flame is blue and stable. Suitable for heating and flame tests.',
                    color: 'text-blue-300'
                };
            };

            const status = getFlameStatus();

            return (
                <div className="flex flex-col h-full container mx-auto px-4 py-6 max-w-6xl">
                    
                    {/* Header */}
                    <div className="flex justify-between items-center mb-6 border-b border-slate-700 pb-4">
                        <div>
                            <h1 className="text-2xl font-bold text-blue-400 flex items-center gap-2">
                                <Icon name="Flame" /> Virtual Bunsen Burner Lab
                            </h1>
                        </div>
                        <div className="bg-slate-800 px-4 py-2 rounded-lg text-sm border border-slate-700">
                            Current Mode: <span className={`font-bold ${status.color}`}>{status.type}</span>
                        </div>
                    </div>

                    <div className="flex flex-col lg:flex-row gap-8 flex-grow">
                        
                        {/* Left: The Burner Visualization */}
                        <div className="w-full lg:w-1/2 bg-slate-800 rounded-2xl shadow-2xl border border-slate-700 relative flex flex-col items-center justify-end overflow-hidden min-h-[500px]">
                            
                            {/* Background Lab Context */}
                            <div className="absolute top-0 left-0 w-full h-full opacity-20 pointer-events-none" 
                                 style={{backgroundImage: 'radial-gradient(circle at 50% 80%, #475569 0%, #0f172a 70%)'}}></div>

                            {/* Flame Area */}
                            <div className="relative mb-2 z-10 flex justify-center items-end h-[300px] w-full">
                                <div className="flame-container flex justify-center items-end transform translate-y-4">
                                    <div className={`transition-all duration-500 ${flameClass} 
                                        ${(!isLuminous && showWire && selectedMetal.id !== 'none') ? selectedMetal.color : ''}
                                    `}></div>
                                </div>

                                {/* Platinum Wire Animation */}
                                {showWire && (
                                    <div className="wire-rod absolute bottom-[60px] right-[25%] w-[200px] h-[10px] flex items-center z-20 pointer-events-none">
                                        <div className="w-full h-1 bg-gray-400 rounded-full relative">
                                            {/* Handle */}
                                            <div className="absolute right-0 w-24 h-3 bg-amber-800 rounded shadow-lg"></div>
                                            {/* Loop with Chemical */}
                                            <div className="absolute left-0 w-3 h-3 rounded-full bg-white shadow-[0_0_15px_white] animate-pulse"></div>
                                        </div>
                                    </div>
                                )}
                            </div>

                            {/* Burner Hardware */}
                            <div className="relative z-10 flex flex-col items-center transform translate-y-4">
                                {/* Chimney */}
                                <div className="w-10 h-36 bg-gradient-to-r from-slate-400 via-slate-200 to-slate-400 border-x border-slate-600 relative">
                                    {/* Heat distortion effect at top */}
                                    <div className="absolute -top-4 left-0 w-full h-8 bg-white/10 blur-md animate-pulse"></div>
                                </div>
                                
                                {/* Collar (The Air Hole Control) */}
                                <div className="w-14 h-12 bg-gradient-to-r from-yellow-700 via-yellow-500 to-yellow-700 rounded-sm relative flex items-center justify-center shadow-lg transition-transform"
                                     style={{transform: `rotate(${airHoleOpen * 1.8}deg)`}}>
                                    {/* The Air Hole Visual */}
                                    <div className="w-5 h-8 bg-slate-900 rounded-full overflow-hidden relative border border-yellow-900 shadow-inner">
                                        {/* Inner sliding shutter */}
                                        <div className="absolute bottom-0 w-full bg-yellow-600 transition-all duration-100"
                                             style={{height: `${100 - airHoleOpen}%`}}></div>
                                    </div>
                                </div>

                                {/* Base */}
                                <div className="w-28 h-8 bg-gradient-to-b from-slate-600 to-slate-800 rounded-t-lg mt-1 shadow-xl border-t border-slate-500"></div>
                                <div className="w-40 h-4 bg-slate-900 rounded-full -mt-2 shadow-2xl"></div>

                                {/* Gas Tubing */}
                                <div className="absolute bottom-6 right-[-50px] w-48 h-5 bg-orange-700 -z-10 rounded-full transform -rotate-12 shadow-lg border-b border-orange-900"></div>
                            </div>

                            {/* Safety Warning for Luminous Flame Test */}
                            {isLuminous && selectedMetal.id !== 'none' && (
                                <div className="absolute top-6 left-6 right-6 bg-yellow-500 text-black p-3 rounded-lg shadow-xl font-bold flex items-center gap-3 animate-bounce z-30 border-2 border-yellow-600">
                                    <Icon name="AlertTriangle" size={24} />
                                    <div>
                                        Safety Alert: Luminous flame interferes with color!
                                        <div className="text-xs font-normal opacity-80">Open the air hole to use a non-luminous flame for testing.</div>
                                    </div>
                                </div>
                            )}

                        </div>

                        {/* Right: Controls */}
                        <div className="w-full lg:w-1/2 flex flex-col gap-6">
                            
                            {/* 1. Air Hole Control */}
                            <div className="bg-slate-800 p-6 rounded-xl border border-slate-700 shadow-lg">
                                <h3 className="text-lg font-bold mb-4 flex items-center gap-2 text-yellow-400">
                                    <Icon name="Wind" /> Step 1: Adjust Air Hole
                                </h3>
                                <div className="mb-2 flex justify-between text-xs text-slate-400 uppercase font-bold">
                                    <span>Closed</span>
                                    <span>Open</span>
                                </div>
                                <input 
                                    type="range" 
                                    min="0" 
                                    max="100" 
                                    value={airHoleOpen} 
                                    onChange={(e) => setAirHoleOpen(Number(e.target.value))}
                                    className="w-full h-4 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-yellow-500"
                                />
                                <div className="mt-4 p-3 bg-slate-900/50 rounded-lg border border-slate-600 flex gap-3 items-start">
                                    <Icon name="Info" size={20} className="text-blue-400 flex-shrink-0 mt-0.5" />
                                    <p className="text-sm text-slate-300 leading-relaxed">
                                        {status.desc}
                                    </p>
                                </div>
                            </div>

                            {/* 2. Flame Test Selection */}
                            <div className="bg-slate-800 p-6 rounded-xl border border-slate-700 shadow-lg flex-grow flex flex-col">
                                <h3 className="text-lg font-bold mb-4 flex items-center gap-2 text-purple-400">
                                    <Icon name="FlaskConical" /> Step 2: Select Metal Salt
                                </h3>
                                
                                <div className="grid grid-cols-2 gap-2 mb-4">
                                    {Metals.map((m) => (
                                        <button
                                            key={m.id}
                                            onClick={() => handleMetalSelect(m)}
                                            className={`
                                                flex flex-col items-center justify-center p-3 rounded-lg border transition-all text-center h-20
                                                ${selectedMetal.id === m.id 
                                                    ? 'bg-blue-600 border-blue-400 text-white shadow-lg transform scale-105 ring-2 ring-blue-300 ring-opacity-50' 
                                                    : 'bg-slate-700/50 border-slate-600 text-slate-300 hover:bg-slate-700 hover:border-slate-500'}
                                            `}
                                        >
                                            <span className="font-bold text-sm">{m.name.split(' ')[0]}</span>
                                            {m.id !== 'none' && (
                                                <span className="font-mono text-xs opacity-70 mt-1">
                                                    {m.symbol}
                                                </span>
                                            )}
                                        </button>
                                    ))}
                                </div>

                                {/* Result Display */}
                                <div className="mt-auto">
                                    {selectedMetal.id !== 'none' ? (
                                        <div className={`bg-slate-900 p-4 rounded-lg border border-slate-600 text-center transition-all duration-500 ${isLuminous ? 'opacity-50 blur-[1px]' : 'opacity-100'}`}>
                                            <p className="text-xs text-slate-500 uppercase font-bold mb-1">Observation</p>
                                            <p className={`text-xl font-bold ${
                                                selectedMetal.id === 'li' ? 'text-rose-500' :
                                                selectedMetal.id === 'na' ? 'text-yellow-400' :
                                                selectedMetal.id === 'k' ? 'text-purple-300' :
                                                selectedMetal.id === 'ca' ? 'text-red-400' :
                                                selectedMetal.id === 'ba' ? 'text-lime-400' :
                                                selectedMetal.id === 'cu' ? 'text-teal-300' : 'text-slate-300'
                                            }`}>
                                                {selectedMetal.desc}
                                            </p>
                                        </div>
                                    ) : (
                                        <div className="bg-slate-900/50 p-4 rounded-lg border border-slate-700/50 text-center text-slate-500 text-sm">
                                            Select a metal salt to test
                                        </div>
                                    )}
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div className="text-center text-slate-600 text-xs mt-6 border-t border-slate-800 pt-4">
                        Luminous Learner Science Tools
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
