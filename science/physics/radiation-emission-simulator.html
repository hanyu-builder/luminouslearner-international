<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blackbody Radiation Lab: Temperature & IR Intensity | Luminous Learner</title>
    <meta name="description" content="Interactive Blackbody Radiation Simulator. Adjust temperature to observe color shifts, Planck curves, and the relationship between temperature and infrared emission intensity. Ideal for physics students.">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@0.263.1"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;700&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; background-color: #0f172a; color: #e2e8f0; }
        .slider-thumb::-webkit-slider-thumb {
            -webkit-appearance: none; appearance: none; width: 20px; height: 20px;
            border-radius: 50%; background: #3b82f6; cursor: pointer; border: 2px solid #ffffff;
        }
        .glow-text { text-shadow: 0 0 10px rgba(255,255,255,0.5); }
    </style>
</head>
<body>

<div id="root"></div>

<script type="text/babel">
    const { useState, useEffect, useRef, useMemo } = React;

    // --- Helper: Kelvin to RGB Approximation ---
    const kelvinToRgb = (k) => {
        let temp = k / 100;
        let r, g, b;

        if (temp <= 66) {
            r = 255;
            g = temp;
            g = 99.4708025861 * Math.log(g) - 161.1195681661;
            
            if (temp <= 19) {
                b = 0;
            } else {
                b = temp - 10;
                b = 138.5177312231 * Math.log(b) - 305.0447927307;
            }
        } else {
            r = temp - 60;
            r = 329.698727446 * Math.pow(r, -0.1332047592);
            
            g = temp - 60;
            g = 288.1221695283 * Math.pow(g, -0.0755148492);
            
            b = 255;
        }

        return {
            r: Math.max(0, Math.min(255, Math.floor(r))),
            g: Math.max(0, Math.min(255, Math.floor(g))),
            b: Math.max(0, Math.min(255, Math.floor(b)))
        };
    };

    // --- Helper: Planck's Law Calculation ---
    // I(lambda, T) ~ (1 / lambda^5) * (1 / (exp(b / (lambda * T)) - 1))
    const planck = (wavelengthNm, tempK) => {
        const c1 = 3.7418e-16; // 2*h*c^2
        const c2 = 1.4388e-2;  // h*c/k
        const lambdaM = wavelengthNm * 1e-9;
        
        // Prevent division by zero
        if (lambdaM === 0) return 0;

        const p = (c1 / Math.pow(lambdaM, 5)) / (Math.exp(c2 / (lambdaM * tempK)) - 1);
        return p;
    };

    const App = () => {
        const [temperature, setTemperature] = useState(3000); // Kelvin
        const canvasRef = useRef(null);
        
        // Derived Data
        const peakWavelength = Math.round(2898000 / temperature); // Wien's Law (nm)
        const rgb = kelvinToRgb(temperature);
        const colorString = `rgb(${rgb.r}, ${rgb.g}, ${rgb.b})`;
        
        // Stefan-Boltzmann Law: Intensity ~ T^4
        // Normalized for visual progress bar
        const maxSimTemp = 10000;
        const relativeIntensity = Math.pow(temperature / maxSimTemp, 4) * 100;
        
        // Infrared Ratio (Simplified estimation for visual feedback)
        const infraredRatio = temperature < 3000 ? 0.9 : Math.max(0.1, 1 - (temperature / 15000));

        // --- Draw Spectrum Graph ---
        useEffect(() => {
            const canvas = canvasRef.current;
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;

            // Clear Canvas
            ctx.clearRect(0, 0, width, height);

            // Background Grid
            ctx.strokeStyle = '#1e293b';
            ctx.lineWidth = 1;
            ctx.beginPath();
            for(let i=0; i<width; i+=50) { ctx.moveTo(i, 0); ctx.lineTo(i, height); }
            for(let i=0; i<height; i+=50) { ctx.moveTo(0, i); ctx.lineTo(width, i); }
            ctx.stroke();

            // Draw Visible Spectrum Band (380nm - 750nm)
            // X-Axis Mapping: 0px = 0nm, Width = 3000nm
            const xToNm = (x) => (x / width) * 3000;
            const nmToX = (nm) => (nm / 3000) * width;

            const visStart = nmToX(380);
            const visEnd = nmToX(750);
            
            const gradient = ctx.createLinearGradient(visStart, 0, visEnd, 0);
            gradient.addColorStop(0, 'rgba(100, 0, 255, 0.2)'); // Violet
            gradient.addColorStop(0.2, 'rgba(0, 0, 255, 0.2)'); // Blue
            gradient.addColorStop(0.4, 'rgba(0, 255, 0, 0.2)'); // Green
            gradient.addColorStop(0.6, 'rgba(255, 255, 0, 0.2)'); // Yellow
            gradient.addColorStop(0.8, 'rgba(255, 165, 0, 0.2)'); // Orange
            gradient.addColorStop(1, 'rgba(255, 0, 0, 0.2)');   // Red
            
            ctx.fillStyle = gradient;
            ctx.fillRect(visStart, 0, visEnd - visStart, height);

            // Region Labels
            ctx.fillStyle = '#64748b';
            ctx.font = '10px Inter';
            ctx.fillText('UV', nmToX(100), 20);
            ctx.fillText('Visible Light', nmToX(500), 20);
            ctx.fillText('Infrared (IR)', nmToX(1500), 20);

            // Draw Planck Curve
            ctx.beginPath();
            ctx.lineWidth = 3;
            ctx.strokeStyle = '#fcd34d'; // Amber-300

            // Dynamic Y-axis scaling to keep curve visible across large T ranges
            const peakIntensity = planck(peakWavelength, temperature);
            const scaleY = (height * 0.8) / peakIntensity;

            ctx.moveTo(0, height);

            for (let x = 0; x < width; x+=2) {
                const nm = xToNm(x);
                if (nm === 0) continue;
                
                const intensity = planck(nm, temperature);
                const y = height - (intensity * scaleY); // Invert Y
                
                ctx.lineTo(x, y);
            }
            
            ctx.stroke();

            // Fill area under curve
            ctx.lineTo(width, height);
            ctx.lineTo(0, height);
            ctx.fillStyle = 'rgba(252, 211, 77, 0.1)';
            ctx.fill();

            // Mark Peak
            const peakX = nmToX(peakWavelength);
            const peakY = height - (peakIntensity * scaleY);
            
            ctx.beginPath();
            ctx.arc(peakX, peakY, 5, 0, Math.PI * 2);
            ctx.fillStyle = '#ffffff';
            ctx.fill();
            
            ctx.fillStyle = '#e2e8f0';
            ctx.fillText(`λmax: ${peakWavelength} nm`, peakX + 10, peakY);

        }, [temperature, peakWavelength]);

        // --- Init Icons ---
        useEffect(() => {
            if (window.lucide) {
                window.lucide.createIcons();
            }
        }, []);

        return (
            <div className="min-h-screen bg-slate-900 pb-12 font-sans">
                {/* Navbar */}
                <nav className="bg-slate-800 border-b border-slate-700 px-6 py-4 flex items-center justify-between sticky top-0 z-10">
                    <div className="flex items-center space-x-3">
                        <div className="bg-orange-500/20 p-2 rounded-lg">
                            <i data-lucide="flame" className="w-6 h-6 text-orange-500"></i>
                        </div>
                        <h1 className="text-xl font-bold text-white tracking-wide">Blackbody Radiation Lab</h1>
                    </div>
                    <div className="text-xs text-slate-400 font-mono bg-slate-900 px-3 py-1 rounded-full border border-slate-700">
                        Topic: Quantum Physics
                    </div>
                </nav>

                <main className="max-w-7xl mx-auto p-4 md:p-6 space-y-8">
                    
                    {/* Top Control & Visual Section */}
                    <div className="grid grid-cols-1 lg:grid-cols-12 gap-6">
                        
                        {/* 1. Controls & Info (Left Panel) */}
                        <div className="lg:col-span-4 space-y-6">
                            <div className="bg-slate-800 rounded-2xl p-6 border border-slate-700 shadow-xl">
                                <h2 className="text-blue-400 font-bold mb-6 flex items-center">
                                    <i data-lucide="sliders" className="w-5 h-5 mr-2"></i> Parameters
                                </h2>

                                {/* Temperature Slider */}
                                <div className="mb-8">
                                    <div className="flex justify-between items-end mb-4">
                                        <label className="text-slate-300 font-medium">Temperature</label>
                                        <div className="text-right">
                                            <span className="text-3xl font-bold text-white tabular-nums glow-text" style={{color: temperature > 6000 ? '#93c5fd' : temperature > 3500 ? '#ffffff' : '#fca5a5'}}>{temperature}</span>
                                            <span className="text-slate-500 ml-1">K</span>
                                        </div>
                                    </div>
                                    <input 
                                        type="range" 
                                        min="100" 
                                        max="10000" 
                                        step="50" 
                                        value={temperature}
                                        onChange={(e) => setTemperature(Number(e.target.value))}
                                        className="w-full h-3 bg-slate-700 rounded-lg appearance-none cursor-pointer slider-thumb"
                                    />
                                    <div className="flex justify-between text-xs text-slate-500 mt-2 font-mono">
                                        <span>100K (Cold)</span>
                                        <span>5800K (Sun)</span>
                                        <span>10000K (Blue Star)</span>
                                    </div>
                                </div>

                                {/* Data Readout */}
                                <div className="space-y-4">
                                    <div className="bg-slate-900/50 p-4 rounded-xl border border-slate-700/50 flex justify-between items-center">
                                        <div>
                                            <div className="text-slate-400 text-xs uppercase tracking-wider mb-1">Peak Wavelength (λmax)</div>
                                            <div className="text-emerald-400 font-mono font-bold text-lg">{peakWavelength} nm</div>
                                        </div>
                                        <div className="w-8 h-8 rounded-full" style={{backgroundColor: colorString, boxShadow: `0 0 10px ${colorString}`}}></div>
                                    </div>

                                    {/* Infrared Meter */}
                                    <div className="bg-slate-900/50 p-4 rounded-xl border border-slate-700/50">
                                        <div className="flex justify-between items-center mb-2">
                                            <div className="text-slate-400 text-xs uppercase tracking-wider flex items-center">
                                                <i data-lucide="waves" className="w-3 h-3 mr-1"></i> IR Intensity
                                            </div>
                                            <div className="text-red-400 font-mono text-sm font-bold">{(relativeIntensity * infraredRatio).toFixed(1)} Units</div>
                                        </div>
                                        <div className="w-full bg-slate-700 h-2 rounded-full overflow-hidden">
                                            <div 
                                                className="h-full bg-gradient-to-r from-red-900 to-red-500 transition-all duration-300"
                                                style={{width: `${Math.min(100, (temperature/3000) * 40)}%`}}
                                            ></div>
                                        </div>
                                        <p className="text-[10px] text-slate-500 mt-2 leading-tight">
                                            {temperature < 1000 
                                                ? "The object appears black but is emitting strong Infrared Radiation (Heat)." 
                                                : "The object glows with visible light, but a large portion of energy is still emitted as Infrared."}
                                        </p>
                                    </div>
                                </div>
                            </div>

                            {/* Legend */}
                            <div className="bg-slate-800/50 p-4 rounded-xl border border-slate-700 text-sm text-slate-400">
                                <h3 className="text-white font-bold mb-2">Key Observations:</h3>
                                <ul className="list-disc pl-4 space-y-2 text-xs">
                                    <li>As temperature rises, the peak wavelength shifts to the left (shorter wavelength/bluer color). This is <b>Wien's Law</b>.</li>
                                    <li>The total area under the curve (total power) increases drastically with temperature. This is the <b>Stefan-Boltzmann Law</b>.</li>
                                </ul>
                            </div>
                        </div>

                        {/* 2. Visual & Graph (Right Panel) */}
                        <div className="lg:col-span-8 grid grid-rows-2 gap-6">
                            
                            {/* Object Visualization */}
                            <div className="bg-black rounded-2xl relative overflow-hidden flex items-center justify-center border border-slate-700 shadow-2xl h-64">
                                <div className="absolute top-4 left-4 text-slate-500 text-xs font-mono border border-slate-700 px-2 py-1 rounded">
                                    VIEW: VISIBLE SPECTRUM
                                </div>
                                
                                {/* The Blackbody Object */}
                                <div 
                                    className="w-32 h-32 rounded-full transition-all duration-100 ease-out relative"
                                    style={{
                                        backgroundColor: temperature < 500 ? '#1a1a1a' : colorString,
                                        boxShadow: temperature > 500 
                                            ? `0 0 ${Math.min(100, (temperature - 500)/20)}px ${Math.min(20, (temperature - 500)/100)}px ${colorString}` 
                                            : 'none'
                                    }}
                                >
                                    {/* Heat haze effect wrapper */}
                                    {temperature > 1000 && (
                                        <div className="absolute inset-0 rounded-full animate-pulse opacity-50 bg-white blur-xl"></div>
                                    )}
                                </div>

                                {/* Visual Labels */}
                                {temperature < 800 && (
                                    <div className="absolute bottom-4 text-center text-slate-600 text-sm animate-pulse">
                                        (Object is radiating heat, but invisible to the eye)
                                    </div>
                                )}
                            </div>

                            {/* Graph Canvas */}
                            <div className="bg-slate-900 rounded-2xl border border-slate-700 p-4 flex flex-col shadow-xl">
                                <div className="flex justify-between items-center mb-2">
                                    <h3 className="text-slate-300 text-sm font-bold flex items-center">
                                        <i data-lucide="activity" className="w-4 h-4 mr-2 text-indigo-400"></i>
                                        Spectral Radiance Distribution
                                    </h3>
                                    <div className="flex gap-4 text-[10px]">
                                        <span className="flex items-center text-slate-400"><div className="w-2 h-2 bg-red-500/20 mr-1"></div> Visible Region</span>
                                        <span className="flex items-center text-slate-400"><div className="w-2 h-2 bg-yellow-400 mr-1"></div> Intensity Curve</span>
                                    </div>
                                </div>
                                <div className="flex-1 relative w-full h-full min-h-[250px]">
                                    <canvas 
                                        ref={canvasRef} 
                                        width={800} 
                                        height={300}
                                        className="w-full h-full block"
                                    />
                                    {/* Axis Labels */}
                                    <div className="absolute bottom-0 right-0 text-slate-500 text-[10px]">Wavelength (nm) →</div>
                                    <div className="absolute top-0 left-0 text-slate-500 text-[10px]">Intensity ↑</div>
                                </div>
                            </div>

                        </div>
                    </div>

                    {/* 3. Educational Content Section */}
                    <article className="bg-slate-800 rounded-2xl p-8 border border-slate-700 prose prose-invert max-w-none">
                        <h2 className="text-2xl font-bold text-white mb-6 border-b border-slate-700 pb-2">Physics Principles Explained</h2>
                        
                        <div className="grid md:grid-cols-2 gap-8">
                            <div>
                                <h3 className="text-lg font-bold text-blue-400 mb-3">1. Blackbody Radiation</h3>
                                <p className="text-slate-300 text-sm leading-relaxed mb-4">
                                    All objects above absolute zero emit electromagnetic radiation. An ideal "Blackbody" absorbs all radiation falling on it and emits a spectrum defined solely by its temperature.
                                </p>
                                <p className="text-slate-400 text-sm bg-slate-900/50 p-3 rounded-lg border-l-4 border-blue-500">
                                    Examples: Red-hot iron, the filament of a light bulb, or stars like our Sun can be approximated as blackbodies.
                                </p>
                            </div>

                            <div>
                                <h3 className="text-lg font-bold text-orange-400 mb-3">2. Stefan-Boltzmann Law</h3>
                                <p className="text-slate-300 text-sm leading-relaxed mb-4">
                                    The total energy radiated per unit surface area of a blackbody is proportional to the fourth power of its temperature.
                                </p>
                                <div className="font-mono bg-slate-950 p-3 rounded text-center text-orange-200 mb-4">
                                    E ∝ T⁴
                                </div>
                                <p className="text-slate-400 text-xs">
                                    This implies that if you double the temperature (e.g., from 1000K to 2000K), the total radiated energy increases by 16 times! This is why the area under the curve grows explosively in the simulation.
                                </p>
                            </div>

                            <div>
                                <h3 className="text-lg font-bold text-emerald-400 mb-3">3. Wien's Displacement Law</h3>
                                <p className="text-slate-300 text-sm leading-relaxed mb-4">
                                    As the temperature of a blackbody increases, the peak wavelength (λmax) of the emitted radiation shifts to shorter wavelengths (bluer light).
                                </p>
                                <div className="font-mono bg-slate-950 p-3 rounded text-center text-emerald-200">
                                    λmax ≈ 2,898,000 / T (nm)
                                </div>
                            </div>

                            <div>
                                <h3 className="text-lg font-bold text-purple-400 mb-3">4. Applications of Infrared</h3>
                                <p className="text-slate-300 text-sm leading-relaxed">
                                    At room temperature (approx. 300K), objects emit peak radiation in the infrared region (around 10,000nm), which is invisible to the human eye. Thermal cameras detect this infrared radiation and convert it into visible images, allowing us to "see heat" in the dark.
                                </p>
                            </div>
                        </div>
                    </article>

                </main>

                <footer className="text-center text-slate-600 py-8 text-sm">
                    <p>© 2024 Luminous Learner Physics Simulations. Developed for Science Education.</p>
                </footer>
            </div>
        );
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
</script>
</body>
</html>
